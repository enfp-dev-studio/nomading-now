import{r as h,b as Zd,j as o,R as I,c as Kd,d as Ts,P as je,u as At,e as pt,O as Co,f as Gd,C as To,g as Jd,T as Eo,D as Ro,h as Yd,L as Ao,i as Po,k as Io,l as Xd,m as Es,n as le,o as Sn,p as Me,q as Oo,s as Lo,t as en,v as Mo,A as $o,w as Do,x as Uo,y as Qd,z as eu,B as tu,a as Bo,E as $a,F as ru,G as su,H as nu,I as au,S as Vo,J as Fo,K as iu,M as zo,N as Wo,Q as qo,U as Ho,V as Zo,W as Ko,X as Go,Y as ou,Z as lu,_ as cu}from"./ui-BK9_o0nW.js";import{a as du,b as uu,g as hu}from"./vendor-CXPvv_bO.js";import{t as fu,c as Jo,f as mu}from"./utils-nR0Y-M1a.js";import{l as Rs,M as pu,T as gu,a as Zn,P as Kn,u as vu,b as yu}from"./map-BQCQGV__.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function t(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(n){if(n.ep)return;n.ep=!0;const a=t(n);fetch(n.href,a)}})();var Fs={},xi;function xu(){if(xi)return Fs;xi=1;var r=du();return Fs.createRoot=r.createRoot,Fs.hydrateRoot=r.hydrateRoot,Fs}var wu=xu();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ls(){return ls=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},ls.apply(this,arguments)}var qt;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(qt||(qt={}));const wi="popstate";function bu(r){r===void 0&&(r={});function e(s,n){let{pathname:a,search:i,hash:l}=s.location;return oa("",{pathname:a,search:i,hash:l},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function t(s,n){return typeof n=="string"?n:tn(n)}return ku(e,t,null,r)}function Ee(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Yo(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function _u(){return Math.random().toString(36).substr(2,8)}function bi(r,e){return{usr:r.state,key:r.key,idx:e}}function oa(r,e,t,s){return t===void 0&&(t=null),ls({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?zr(e):e,{state:t,key:e&&e.key||s||_u()})}function tn(r){let{pathname:e="/",search:t="",hash:s=""}=r;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function zr(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substr(t),r=r.substr(0,t));let s=r.indexOf("?");s>=0&&(e.search=r.substr(s),r=r.substr(0,s)),r&&(e.pathname=r)}return e}function ku(r,e,t,s){s===void 0&&(s={});let{window:n=document.defaultView,v5Compat:a=!1}=s,i=n.history,l=qt.Pop,c=null,d=u();d==null&&(d=0,i.replaceState(ls({},i.state,{idx:d}),""));function u(){return(i.state||{idx:null}).idx}function f(){l=qt.Pop;let w=u(),k=w==null?null:w-d;d=w,c&&c({action:l,location:y.location,delta:k})}function p(w,k){l=qt.Push;let v=oa(y.location,w,k);d=u()+1;let x=bi(v,d),S=y.createHref(v);try{i.pushState(x,"",S)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;n.location.assign(S)}a&&c&&c({action:l,location:y.location,delta:1})}function m(w,k){l=qt.Replace;let v=oa(y.location,w,k);d=u();let x=bi(v,d),S=y.createHref(v);i.replaceState(x,"",S),a&&c&&c({action:l,location:y.location,delta:0})}function b(w){let k=n.location.origin!=="null"?n.location.origin:n.location.href,v=typeof w=="string"?w:tn(w);return v=v.replace(/ $/,"%20"),Ee(k,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,k)}let y={get action(){return l},get location(){return r(n,i)},listen(w){if(c)throw new Error("A history only accepts one active listener");return n.addEventListener(wi,f),c=w,()=>{n.removeEventListener(wi,f),c=null}},createHref(w){return e(n,w)},createURL:b,encodeLocation(w){let k=b(w);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:p,replace:m,go(w){return i.go(w)}};return y}var _i;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(_i||(_i={}));function ju(r,e,t){return t===void 0&&(t="/"),Su(r,e,t)}function Su(r,e,t,s){let n=typeof e=="string"?zr(e):e,a=Mr(n.pathname||"/",t);if(a==null)return null;let i=Xo(r);Nu(i);let l=null;for(let c=0;l==null&&c<i.length;++c){let d=$u(a);l=Lu(i[c],d)}return l}function Xo(r,e,t,s){e===void 0&&(e=[]),t===void 0&&(t=[]),s===void 0&&(s="");let n=(a,i,l)=>{let c={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:i,route:a};c.relativePath.startsWith("/")&&(Ee(c.relativePath.startsWith(s),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(s.length));let d=Zt([s,c.relativePath]),u=t.concat(c);a.children&&a.children.length>0&&(Ee(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Xo(a.children,e,u,d)),!(a.path==null&&!a.index)&&e.push({path:d,score:Iu(d,a.index),routesMeta:u})};return r.forEach((a,i)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))n(a,i);else for(let c of Qo(a.path))n(a,i,c)}),e}function Qo(r){let e=r.split("/");if(e.length===0)return[];let[t,...s]=e,n=t.endsWith("?"),a=t.replace(/\?$/,"");if(s.length===0)return n?[a,""]:[a];let i=Qo(s.join("/")),l=[];return l.push(...i.map(c=>c===""?a:[a,c].join("/"))),n&&l.push(...i),l.map(c=>r.startsWith("/")&&c===""?"/":c)}function Nu(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:Ou(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}const Cu=/^:[\w-]+$/,Tu=3,Eu=2,Ru=1,Au=10,Pu=-2,ki=r=>r==="*";function Iu(r,e){let t=r.split("/"),s=t.length;return t.some(ki)&&(s+=Pu),e&&(s+=Eu),t.filter(n=>!ki(n)).reduce((n,a)=>n+(Cu.test(a)?Tu:a===""?Ru:Au),s)}function Ou(r,e){return r.length===e.length&&r.slice(0,-1).every((s,n)=>s===e[n])?r[r.length-1]-e[e.length-1]:0}function Lu(r,e,t){let{routesMeta:s}=r,n={},a="/",i=[];for(let l=0;l<s.length;++l){let c=s[l],d=l===s.length-1,u=a==="/"?e:e.slice(a.length)||"/",f=la({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),p=c.route;if(!f)return null;Object.assign(n,f.params),i.push({params:n,pathname:Zt([a,f.pathname]),pathnameBase:Vu(Zt([a,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(a=Zt([a,f.pathnameBase]))}return i}function la(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,s]=Mu(r.path,r.caseSensitive,r.end),n=e.match(t);if(!n)return null;let a=n[0],i=a.replace(/(.)\/+$/,"$1"),l=n.slice(1);return{params:s.reduce((d,u,f)=>{let{paramName:p,isOptional:m}=u;if(p==="*"){let y=l[f]||"";i=a.slice(0,a.length-y.length).replace(/(.)\/+$/,"$1")}const b=l[f];return m&&!b?d[p]=void 0:d[p]=(b||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:i,pattern:r}}function Mu(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Yo(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let s=[],n="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,l,c)=>(s.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(s.push({paramName:"*"}),n+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?n+="\\/*$":r!==""&&r!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,e?void 0:"i"),s]}function $u(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Yo(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function Mr(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=r.charAt(t);return s&&s!=="/"?null:r.slice(t)||"/"}function Du(r,e){e===void 0&&(e="/");let{pathname:t,search:s="",hash:n=""}=typeof r=="string"?zr(r):r;return{pathname:t?t.startsWith("/")?t:Uu(t,e):e,search:Fu(s),hash:zu(n)}}function Uu(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(n=>{n===".."?t.length>1&&t.pop():n!=="."&&t.push(n)}),t.length>1?t.join("/"):"/"}function Gn(r,e,t,s){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Bu(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function el(r,e){let t=Bu(r);return e?t.map((s,n)=>n===t.length-1?s.pathname:s.pathnameBase):t.map(s=>s.pathnameBase)}function tl(r,e,t,s){s===void 0&&(s=!1);let n;typeof r=="string"?n=zr(r):(n=ls({},r),Ee(!n.pathname||!n.pathname.includes("?"),Gn("?","pathname","search",n)),Ee(!n.pathname||!n.pathname.includes("#"),Gn("#","pathname","hash",n)),Ee(!n.search||!n.search.includes("#"),Gn("#","search","hash",n)));let a=r===""||n.pathname==="",i=a?"/":n.pathname,l;if(i==null)l=t;else{let f=e.length-1;if(!s&&i.startsWith("..")){let p=i.split("/");for(;p[0]==="..";)p.shift(),f-=1;n.pathname=p.join("/")}l=f>=0?e[f]:"/"}let c=Du(n,l),d=i&&i!=="/"&&i.endsWith("/"),u=(a||i===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const Zt=r=>r.join("/").replace(/\/\/+/g,"/"),Vu=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),Fu=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,zu=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function Wu(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const rl=["post","put","patch","delete"];new Set(rl);const qu=["get",...rl];new Set(qu);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cs(){return cs=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},cs.apply(this,arguments)}const Nn=h.createContext(null),sl=h.createContext(null),Qt=h.createContext(null),Cn=h.createContext(null),er=h.createContext({outlet:null,matches:[],isDataRoute:!1}),nl=h.createContext(null);function Hu(r,e){let{relative:t}=e===void 0?{}:e;As()||Ee(!1);let{basename:s,navigator:n}=h.useContext(Qt),{hash:a,pathname:i,search:l}=Tn(r,{relative:t}),c=i;return s!=="/"&&(c=i==="/"?s:Zt([s,i])),n.createHref({pathname:c,search:l,hash:a})}function As(){return h.useContext(Cn)!=null}function yr(){return As()||Ee(!1),h.useContext(Cn).location}function al(r){h.useContext(Qt).static||h.useLayoutEffect(r)}function Zu(){let{isDataRoute:r}=h.useContext(er);return r?lh():Ku()}function Ku(){As()||Ee(!1);let r=h.useContext(Nn),{basename:e,future:t,navigator:s}=h.useContext(Qt),{matches:n}=h.useContext(er),{pathname:a}=yr(),i=JSON.stringify(el(n,t.v7_relativeSplatPath)),l=h.useRef(!1);return al(()=>{l.current=!0}),h.useCallback(function(d,u){if(u===void 0&&(u={}),!l.current)return;if(typeof d=="number"){s.go(d);return}let f=tl(d,JSON.parse(i),a,u.relative==="path");r==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Zt([e,f.pathname])),(u.replace?s.replace:s.push)(f,u.state,u)},[e,s,i,a,r])}const Gu=h.createContext(null);function Ju(r){let e=h.useContext(er).outlet;return e&&h.createElement(Gu.Provider,{value:r},e)}function Tn(r,e){let{relative:t}=e===void 0?{}:e,{future:s}=h.useContext(Qt),{matches:n}=h.useContext(er),{pathname:a}=yr(),i=JSON.stringify(el(n,s.v7_relativeSplatPath));return h.useMemo(()=>tl(r,JSON.parse(i),a,t==="path"),[r,i,a,t])}function Yu(r,e){return Xu(r,e)}function Xu(r,e,t,s){As()||Ee(!1);let{navigator:n}=h.useContext(Qt),{matches:a}=h.useContext(er),i=a[a.length-1],l=i?i.params:{};i&&i.pathname;let c=i?i.pathnameBase:"/";i&&i.route;let d=yr(),u;if(e){var f;let w=typeof e=="string"?zr(e):e;c==="/"||(f=w.pathname)!=null&&f.startsWith(c)||Ee(!1),u=w}else u=d;let p=u.pathname||"/",m=p;if(c!=="/"){let w=c.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(w.length).join("/")}let b=ju(r,{pathname:m}),y=sh(b&&b.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:Zt([c,n.encodeLocation?n.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:Zt([c,n.encodeLocation?n.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),a,t,s);return e&&y?h.createElement(Cn.Provider,{value:{location:cs({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:qt.Pop}},y):y}function Qu(){let r=oh(),e=Wu(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return h.createElement(h.Fragment,null,h.createElement("h2",null,"Unexpected Application Error!"),h.createElement("h3",{style:{fontStyle:"italic"}},e),t?h.createElement("pre",{style:n},t):null,null)}const eh=h.createElement(Qu,null);class th extends h.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?h.createElement(er.Provider,{value:this.props.routeContext},h.createElement(nl.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function rh(r){let{routeContext:e,match:t,children:s}=r,n=h.useContext(Nn);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),h.createElement(er.Provider,{value:e},s)}function sh(r,e,t,s){var n;if(e===void 0&&(e=[]),t===void 0&&(t=null),s===void 0&&(s=null),r==null){var a;if(!t)return null;if(t.errors)r=t.matches;else if((a=s)!=null&&a.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let i=r,l=(n=t)==null?void 0:n.errors;if(l!=null){let u=i.findIndex(f=>f.route.id&&l?.[f.route.id]!==void 0);u>=0||Ee(!1),i=i.slice(0,Math.min(i.length,u+1))}let c=!1,d=-1;if(t&&s&&s.v7_partialHydration)for(let u=0;u<i.length;u++){let f=i[u];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=u),f.route.id){let{loaderData:p,errors:m}=t,b=f.route.loader&&p[f.route.id]===void 0&&(!m||m[f.route.id]===void 0);if(f.route.lazy||b){c=!0,d>=0?i=i.slice(0,d+1):i=[i[0]];break}}}return i.reduceRight((u,f,p)=>{let m,b=!1,y=null,w=null;t&&(m=l&&f.route.id?l[f.route.id]:void 0,y=f.route.errorElement||eh,c&&(d<0&&p===0?(ch("route-fallback"),b=!0,w=null):d===p&&(b=!0,w=f.route.hydrateFallbackElement||null)));let k=e.concat(i.slice(0,p+1)),v=()=>{let x;return m?x=y:b?x=w:f.route.Component?x=h.createElement(f.route.Component,null):f.route.element?x=f.route.element:x=u,h.createElement(rh,{match:f,routeContext:{outlet:u,matches:k,isDataRoute:t!=null},children:x})};return t&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?h.createElement(th,{location:t.location,revalidation:t.revalidation,component:y,error:m,children:v(),routeContext:{outlet:null,matches:k,isDataRoute:!0}}):v()},null)}var il=function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r}(il||{}),ol=function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r}(ol||{});function nh(r){let e=h.useContext(Nn);return e||Ee(!1),e}function ah(r){let e=h.useContext(sl);return e||Ee(!1),e}function ih(r){let e=h.useContext(er);return e||Ee(!1),e}function ll(r){let e=ih(),t=e.matches[e.matches.length-1];return t.route.id||Ee(!1),t.route.id}function oh(){var r;let e=h.useContext(nl),t=ah(),s=ll();return e!==void 0?e:(r=t.errors)==null?void 0:r[s]}function lh(){let{router:r}=nh(il.UseNavigateStable),e=ll(ol.UseNavigateStable),t=h.useRef(!1);return al(()=>{t.current=!0}),h.useCallback(function(n,a){a===void 0&&(a={}),t.current&&(typeof n=="number"?r.navigate(n):r.navigate(n,cs({fromRouteId:e},a)))},[r,e])}const ji={};function ch(r,e,t){ji[r]||(ji[r]=!0)}function dh(r,e){r?.v7_startTransition,r?.v7_relativeSplatPath}function uh(r){return Ju(r.context)}function Yr(r){Ee(!1)}function hh(r){let{basename:e="/",children:t=null,location:s,navigationType:n=qt.Pop,navigator:a,static:i=!1,future:l}=r;As()&&Ee(!1);let c=e.replace(/^\/*/,"/"),d=h.useMemo(()=>({basename:c,navigator:a,static:i,future:cs({v7_relativeSplatPath:!1},l)}),[c,l,a,i]);typeof s=="string"&&(s=zr(s));let{pathname:u="/",search:f="",hash:p="",state:m=null,key:b="default"}=s,y=h.useMemo(()=>{let w=Mr(u,c);return w==null?null:{location:{pathname:w,search:f,hash:p,state:m,key:b},navigationType:n}},[c,u,f,p,m,b,n]);return y==null?null:h.createElement(Qt.Provider,{value:d},h.createElement(Cn.Provider,{children:t,value:y}))}function fh(r){let{children:e,location:t}=r;return Yu(ca(e),t)}new Promise(()=>{});function ca(r,e){e===void 0&&(e=[]);let t=[];return h.Children.forEach(r,(s,n)=>{if(!h.isValidElement(s))return;let a=[...e,n];if(s.type===h.Fragment){t.push.apply(t,ca(s.props.children,a));return}s.type!==Yr&&Ee(!1),!s.props.index||!s.props.children||Ee(!1);let i={id:s.props.id||a.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(i.children=ca(s.props.children,a)),t.push(i)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rn(){return rn=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},rn.apply(this,arguments)}function cl(r,e){if(r==null)return{};var t={},s=Object.keys(r),n,a;for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&(t[n]=r[n]);return t}function mh(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function ph(r,e){return r.button===0&&(!e||e==="_self")&&!mh(r)}const gh=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],vh=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],yh="6";try{window.__reactRouterVersion=yh}catch{}const xh=h.createContext({isTransitioning:!1}),wh="startTransition",Si=Zd[wh];function bh(r){let{basename:e,children:t,future:s,window:n}=r,a=h.useRef();a.current==null&&(a.current=bu({window:n,v5Compat:!0}));let i=a.current,[l,c]=h.useState({action:i.action,location:i.location}),{v7_startTransition:d}=s||{},u=h.useCallback(f=>{d&&Si?Si(()=>c(f)):c(f)},[c,d]);return h.useLayoutEffect(()=>i.listen(u),[i,u]),h.useEffect(()=>dh(s),[s]),h.createElement(hh,{basename:e,children:t,location:l.location,navigationType:l.action,navigator:i,future:s})}const _h=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",kh=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,jh=h.forwardRef(function(e,t){let{onClick:s,relative:n,reloadDocument:a,replace:i,state:l,target:c,to:d,preventScrollReset:u,viewTransition:f}=e,p=cl(e,gh),{basename:m}=h.useContext(Qt),b,y=!1;if(typeof d=="string"&&kh.test(d)&&(b=d,_h))try{let x=new URL(window.location.href),S=d.startsWith("//")?new URL(x.protocol+d):new URL(d),R=Mr(S.pathname,m);S.origin===x.origin&&R!=null?d=R+S.search+S.hash:y=!0}catch{}let w=Hu(d,{relative:n}),k=Nh(d,{replace:i,state:l,target:c,preventScrollReset:u,relative:n,viewTransition:f});function v(x){s&&s(x),x.defaultPrevented||k(x)}return h.createElement("a",rn({},p,{href:b||w,onClick:y||a?s:v,ref:t,target:c}))}),da=h.forwardRef(function(e,t){let{"aria-current":s="page",caseSensitive:n=!1,className:a="",end:i=!1,style:l,to:c,viewTransition:d,children:u}=e,f=cl(e,vh),p=Tn(c,{relative:f.relative}),m=yr(),b=h.useContext(sl),{navigator:y,basename:w}=h.useContext(Qt),k=b!=null&&Ch(p)&&d===!0,v=y.encodeLocation?y.encodeLocation(p).pathname:p.pathname,x=m.pathname,S=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;n||(x=x.toLowerCase(),S=S?S.toLowerCase():null,v=v.toLowerCase()),S&&w&&(S=Mr(S,w)||S);const R=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let $=x===v||!i&&x.startsWith(v)&&x.charAt(R)==="/",N=S!=null&&(S===v||!i&&S.startsWith(v)&&S.charAt(v.length)==="/"),C={isActive:$,isPending:N,isTransitioning:k},T=$?s:void 0,P;typeof a=="function"?P=a(C):P=[a,$?"active":null,N?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let Z=typeof l=="function"?l(C):l;return h.createElement(jh,rn({},f,{"aria-current":T,className:P,ref:t,style:Z,to:c,viewTransition:d}),typeof u=="function"?u(C):u)});var ua;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(ua||(ua={}));var Ni;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(Ni||(Ni={}));function Sh(r){let e=h.useContext(Nn);return e||Ee(!1),e}function Nh(r,e){let{target:t,replace:s,state:n,preventScrollReset:a,relative:i,viewTransition:l}=e===void 0?{}:e,c=Zu(),d=yr(),u=Tn(r,{relative:i});return h.useCallback(f=>{if(ph(f,t)){f.preventDefault();let p=s!==void 0?s:tn(d)===tn(u);c(r,{replace:p,state:n,preventScrollReset:a,relative:i,viewTransition:l})}},[d,c,u,s,n,t,r,a,i,l])}function Ch(r,e){e===void 0&&(e={});let t=h.useContext(xh);t==null&&Ee(!1);let{basename:s}=Sh(ua.useViewTransitionState),n=Tn(r,{relative:e.relative});if(!t.isTransitioning)return!1;let a=Mr(t.currentLocation.pathname,s)||t.currentLocation.pathname,i=Mr(t.nextLocation.pathname,s)||t.nextLocation.pathname;return la(n.pathname,i)!=null||la(n.pathname,a)!=null}const Th={theme:"system",setTheme:()=>null},Eh=h.createContext(Th);function Rh({children:r,defaultTheme:e="system",storageKey:t="vite-ui-theme",...s}){const[n,a]=h.useState(()=>localStorage.getItem(t)||e);h.useEffect(()=>{const l=window.document.documentElement;if(l.classList.remove("light","dark"),n==="system"){const c=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";l.classList.add(c);return}l.classList.add(n)},[n]);const i={theme:n,setTheme:l=>{localStorage.setItem(t,l),a(l)}};return o.jsx(Eh.Provider,{...s,value:i,children:r})}var Ah=(r,e,t,s,n,a,i,l)=>{let c=document.documentElement,d=["light","dark"];function u(m){(Array.isArray(r)?r:[r]).forEach(b=>{let y=b==="class",w=y&&a?n.map(k=>a[k]||k):n;y?(c.classList.remove(...w),c.classList.add(a&&a[m]?a[m]:m)):c.setAttribute(b,m)}),f(m)}function f(m){l&&d.includes(m)&&(c.style.colorScheme=m)}function p(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(s)u(s);else try{let m=localStorage.getItem(e)||t,b=i&&m==="system"?p():m;u(b)}catch{}},Ph=h.createContext(void 0),Ih={setTheme:r=>{},themes:[]},Oh=()=>{var r;return(r=h.useContext(Ph))!=null?r:Ih};h.memo(({forcedTheme:r,storageKey:e,attribute:t,enableSystem:s,enableColorScheme:n,defaultTheme:a,value:i,themes:l,nonce:c,scriptProps:d})=>{let u=JSON.stringify([t,e,a,r,l,i,s,n]).slice(1,-1);return h.createElement("script",{...d,suppressHydrationWarning:!0,nonce:typeof window>"u"?c:"",dangerouslySetInnerHTML:{__html:`(${Ah.toString()})(${u})`}})});var Lh=r=>{switch(r){case"success":return Dh;case"info":return Bh;case"warning":return Uh;case"error":return Vh;default:return null}},Mh=Array(12).fill(0),$h=({visible:r,className:e})=>I.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":r},I.createElement("div",{className:"sonner-spinner"},Mh.map((t,s)=>I.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${s}`})))),Dh=I.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},I.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Uh=I.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},I.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Bh=I.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},I.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Vh=I.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},I.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Fh=I.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},I.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),I.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),zh=()=>{let[r,e]=I.useState(document.hidden);return I.useEffect(()=>{let t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),r},ha=1,Wh=class{constructor(){this.subscribe=r=>(this.subscribers.push(r),()=>{let e=this.subscribers.indexOf(r);this.subscribers.splice(e,1)}),this.publish=r=>{this.subscribers.forEach(e=>e(r))},this.addToast=r=>{this.publish(r),this.toasts=[...this.toasts,r]},this.create=r=>{var e;let{message:t,...s}=r,n=typeof r?.id=="number"||((e=r.id)==null?void 0:e.length)>0?r.id:ha++,a=this.toasts.find(l=>l.id===n),i=r.dismissible===void 0?!0:r.dismissible;return this.dismissedToasts.has(n)&&this.dismissedToasts.delete(n),a?this.toasts=this.toasts.map(l=>l.id===n?(this.publish({...l,...r,id:n,title:t}),{...l,...r,id:n,dismissible:i,title:t}):l):this.addToast({title:t,...s,dismissible:i,id:n}),n},this.dismiss=r=>(this.dismissedToasts.add(r),r||this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:r,dismiss:!0})),r),this.message=(r,e)=>this.create({...e,message:r}),this.error=(r,e)=>this.create({...e,message:r,type:"error"}),this.success=(r,e)=>this.create({...e,type:"success",message:r}),this.info=(r,e)=>this.create({...e,type:"info",message:r}),this.warning=(r,e)=>this.create({...e,type:"warning",message:r}),this.loading=(r,e)=>this.create({...e,type:"loading",message:r}),this.promise=(r,e)=>{if(!e)return;let t;e.loading!==void 0&&(t=this.create({...e,promise:r,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let s=r instanceof Promise?r:r(),n=t!==void 0,a,i=s.then(async c=>{if(a=["resolve",c],I.isValidElement(c))n=!1,this.create({id:t,type:"default",message:c});else if(Hh(c)&&!c.ok){n=!1;let d=typeof e.error=="function"?await e.error(`HTTP error! status: ${c.status}`):e.error,u=typeof e.description=="function"?await e.description(`HTTP error! status: ${c.status}`):e.description;this.create({id:t,type:"error",message:d,description:u})}else if(e.success!==void 0){n=!1;let d=typeof e.success=="function"?await e.success(c):e.success,u=typeof e.description=="function"?await e.description(c):e.description;this.create({id:t,type:"success",message:d,description:u})}}).catch(async c=>{if(a=["reject",c],e.error!==void 0){n=!1;let d=typeof e.error=="function"?await e.error(c):e.error,u=typeof e.description=="function"?await e.description(c):e.description;this.create({id:t,type:"error",message:d,description:u})}}).finally(()=>{var c;n&&(this.dismiss(t),t=void 0),(c=e.finally)==null||c.call(e)}),l=()=>new Promise((c,d)=>i.then(()=>a[0]==="reject"?d(a[1]):c(a[1])).catch(d));return typeof t!="string"&&typeof t!="number"?{unwrap:l}:Object.assign(t,{unwrap:l})},this.custom=(r,e)=>{let t=e?.id||ha++;return this.create({jsx:r(t),id:t,...e}),t},this.getActiveToasts=()=>this.toasts.filter(r=>!this.dismissedToasts.has(r.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Ke=new Wh,qh=(r,e)=>{let t=e?.id||ha++;return Ke.addToast({title:r,...e,id:t}),t},Hh=r=>r&&typeof r=="object"&&"ok"in r&&typeof r.ok=="boolean"&&"status"in r&&typeof r.status=="number",Zh=qh,Kh=()=>Ke.toasts,Gh=()=>Ke.getActiveToasts(),z=Object.assign(Zh,{success:Ke.success,info:Ke.info,warning:Ke.warning,error:Ke.error,custom:Ke.custom,message:Ke.message,promise:Ke.promise,dismiss:Ke.dismiss,loading:Ke.loading},{getHistory:Kh,getToasts:Gh});function Jh(r,{insertAt:e}={}){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",e==="top"&&t.firstChild?t.insertBefore(s,t.firstChild):t.appendChild(s),s.styleSheet?s.styleSheet.cssText=r:s.appendChild(document.createTextNode(r))}Jh(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function zs(r){return r.label!==void 0}var Yh=3,Xh="32px",Qh="16px",Ci=4e3,ef=356,tf=14,rf=20,sf=200;function ot(...r){return r.filter(Boolean).join(" ")}function nf(r){let[e,t]=r.split("-"),s=[];return e&&s.push(e),t&&s.push(t),s}var af=r=>{var e,t,s,n,a,i,l,c,d,u,f;let{invert:p,toast:m,unstyled:b,interacting:y,setHeights:w,visibleToasts:k,heights:v,index:x,toasts:S,expanded:R,removeToast:$,defaultRichColors:N,closeButton:C,style:T,cancelButtonStyle:P,actionButtonStyle:Z,className:E="",descriptionClassName:W="",duration:X,position:oe,gap:ae,loadingIcon:me,expandByDefault:Pe,classNames:K,icons:Ce,closeButtonAriaLabel:st="Close toast",pauseWhenPageIsHidden:de}=r,[ue,he]=I.useState(null),[Te,We]=I.useState(null),[V,we]=I.useState(!1),[Se,fe]=I.useState(!1),[pe,_e]=I.useState(!1),[Xe,Qe]=I.useState(!1),[Ot,Lt]=I.useState(!1),[nr,$s]=I.useState(0),[Ds,g]=I.useState(0),_=I.useRef(m.duration||X||Ci),j=I.useRef(null),M=I.useRef(null),L=x===0,O=x+1<=k,U=m.type,ne=m.dismissible!==!1,ge=m.className||"",qe=m.descriptionClassName||"",St=I.useMemo(()=>v.findIndex(Q=>Q.toastId===m.id)||0,[v,m.id]),vt=I.useMemo(()=>{var Q;return(Q=m.closeButton)!=null?Q:C},[m.closeButton,C]),Us=I.useMemo(()=>m.duration||X||Ci,[m.duration,X]),ar=I.useRef(0),yt=I.useRef(0),Bs=I.useRef(0),Nt=I.useRef(null),[qn,Vs]=oe.split("-"),vi=I.useMemo(()=>v.reduce((Q,ve,ke)=>ke>=St?Q:Q+ve.height,0),[v,St]),yi=zh(),qd=m.invert||p,Hn=U==="loading";yt.current=I.useMemo(()=>St*ae+vi,[St,vi]),I.useEffect(()=>{_.current=Us},[Us]),I.useEffect(()=>{we(!0)},[]),I.useEffect(()=>{let Q=M.current;if(Q){let ve=Q.getBoundingClientRect().height;return g(ve),w(ke=>[{toastId:m.id,height:ve,position:m.position},...ke]),()=>w(ke=>ke.filter(nt=>nt.toastId!==m.id))}},[w,m.id]),I.useLayoutEffect(()=>{if(!V)return;let Q=M.current,ve=Q.style.height;Q.style.height="auto";let ke=Q.getBoundingClientRect().height;Q.style.height=ve,g(ke),w(nt=>nt.find(at=>at.toastId===m.id)?nt.map(at=>at.toastId===m.id?{...at,height:ke}:at):[{toastId:m.id,height:ke,position:m.position},...nt])},[V,m.title,m.description,w,m.id]);let Mt=I.useCallback(()=>{fe(!0),$s(yt.current),w(Q=>Q.filter(ve=>ve.toastId!==m.id)),setTimeout(()=>{$(m)},sf)},[m,$,w,yt]);I.useEffect(()=>{if(m.promise&&U==="loading"||m.duration===1/0||m.type==="loading")return;let Q;return R||y||de&&yi?(()=>{if(Bs.current<ar.current){let ve=new Date().getTime()-ar.current;_.current=_.current-ve}Bs.current=new Date().getTime()})():_.current!==1/0&&(ar.current=new Date().getTime(),Q=setTimeout(()=>{var ve;(ve=m.onAutoClose)==null||ve.call(m,m),Mt()},_.current)),()=>clearTimeout(Q)},[R,y,m,U,de,yi,Mt]),I.useEffect(()=>{m.delete&&Mt()},[Mt,m.delete]);function Hd(){var Q,ve,ke;return Ce!=null&&Ce.loading?I.createElement("div",{className:ot(K?.loader,(Q=m?.classNames)==null?void 0:Q.loader,"sonner-loader"),"data-visible":U==="loading"},Ce.loading):me?I.createElement("div",{className:ot(K?.loader,(ve=m?.classNames)==null?void 0:ve.loader,"sonner-loader"),"data-visible":U==="loading"},me):I.createElement($h,{className:ot(K?.loader,(ke=m?.classNames)==null?void 0:ke.loader),visible:U==="loading"})}return I.createElement("li",{tabIndex:0,ref:M,className:ot(E,ge,K?.toast,(e=m?.classNames)==null?void 0:e.toast,K?.default,K?.[U],(t=m?.classNames)==null?void 0:t[U]),"data-sonner-toast":"","data-rich-colors":(s=m.richColors)!=null?s:N,"data-styled":!(m.jsx||m.unstyled||b),"data-mounted":V,"data-promise":!!m.promise,"data-swiped":Ot,"data-removed":Se,"data-visible":O,"data-y-position":qn,"data-x-position":Vs,"data-index":x,"data-front":L,"data-swiping":pe,"data-dismissible":ne,"data-type":U,"data-invert":qd,"data-swipe-out":Xe,"data-swipe-direction":Te,"data-expanded":!!(R||Pe&&V),style:{"--index":x,"--toasts-before":x,"--z-index":S.length-x,"--offset":`${Se?nr:yt.current}px`,"--initial-height":Pe?"auto":`${Ds}px`,...T,...m.style},onDragEnd:()=>{_e(!1),he(null),Nt.current=null},onPointerDown:Q=>{Hn||!ne||(j.current=new Date,$s(yt.current),Q.target.setPointerCapture(Q.pointerId),Q.target.tagName!=="BUTTON"&&(_e(!0),Nt.current={x:Q.clientX,y:Q.clientY}))},onPointerUp:()=>{var Q,ve,ke,nt;if(Xe||!ne)return;Nt.current=null;let at=Number(((Q=M.current)==null?void 0:Q.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),$t=Number(((ve=M.current)==null?void 0:ve.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),ir=new Date().getTime()-((ke=j.current)==null?void 0:ke.getTime()),it=ue==="x"?at:$t,Dt=Math.abs(it)/ir;if(Math.abs(it)>=rf||Dt>.11){$s(yt.current),(nt=m.onDismiss)==null||nt.call(m,m),We(ue==="x"?at>0?"right":"left":$t>0?"down":"up"),Mt(),Qe(!0),Lt(!1);return}_e(!1),he(null)},onPointerMove:Q=>{var ve,ke,nt,at;if(!Nt.current||!ne||((ve=window.getSelection())==null?void 0:ve.toString().length)>0)return;let $t=Q.clientY-Nt.current.y,ir=Q.clientX-Nt.current.x,it=(ke=r.swipeDirections)!=null?ke:nf(oe);!ue&&(Math.abs(ir)>1||Math.abs($t)>1)&&he(Math.abs(ir)>Math.abs($t)?"x":"y");let Dt={x:0,y:0};ue==="y"?(it.includes("top")||it.includes("bottom"))&&(it.includes("top")&&$t<0||it.includes("bottom")&&$t>0)&&(Dt.y=$t):ue==="x"&&(it.includes("left")||it.includes("right"))&&(it.includes("left")&&ir<0||it.includes("right")&&ir>0)&&(Dt.x=ir),(Math.abs(Dt.x)>0||Math.abs(Dt.y)>0)&&Lt(!0),(nt=M.current)==null||nt.style.setProperty("--swipe-amount-x",`${Dt.x}px`),(at=M.current)==null||at.style.setProperty("--swipe-amount-y",`${Dt.y}px`)}},vt&&!m.jsx?I.createElement("button",{"aria-label":st,"data-disabled":Hn,"data-close-button":!0,onClick:Hn||!ne?()=>{}:()=>{var Q;Mt(),(Q=m.onDismiss)==null||Q.call(m,m)},className:ot(K?.closeButton,(n=m?.classNames)==null?void 0:n.closeButton)},(a=Ce?.close)!=null?a:Fh):null,m.jsx||h.isValidElement(m.title)?m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title:I.createElement(I.Fragment,null,U||m.icon||m.promise?I.createElement("div",{"data-icon":"",className:ot(K?.icon,(i=m?.classNames)==null?void 0:i.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||Hd():null,m.type!=="loading"?m.icon||Ce?.[U]||Lh(U):null):null,I.createElement("div",{"data-content":"",className:ot(K?.content,(l=m?.classNames)==null?void 0:l.content)},I.createElement("div",{"data-title":"",className:ot(K?.title,(c=m?.classNames)==null?void 0:c.title)},typeof m.title=="function"?m.title():m.title),m.description?I.createElement("div",{"data-description":"",className:ot(W,qe,K?.description,(d=m?.classNames)==null?void 0:d.description)},typeof m.description=="function"?m.description():m.description):null),h.isValidElement(m.cancel)?m.cancel:m.cancel&&zs(m.cancel)?I.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||P,onClick:Q=>{var ve,ke;zs(m.cancel)&&ne&&((ke=(ve=m.cancel).onClick)==null||ke.call(ve,Q),Mt())},className:ot(K?.cancelButton,(u=m?.classNames)==null?void 0:u.cancelButton)},m.cancel.label):null,h.isValidElement(m.action)?m.action:m.action&&zs(m.action)?I.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||Z,onClick:Q=>{var ve,ke;zs(m.action)&&((ke=(ve=m.action).onClick)==null||ke.call(ve,Q),!Q.defaultPrevented&&Mt())},className:ot(K?.actionButton,(f=m?.classNames)==null?void 0:f.actionButton)},m.action.label):null))};function Ti(){if(typeof window>"u"||typeof document>"u")return"ltr";let r=document.documentElement.getAttribute("dir");return r==="auto"||!r?window.getComputedStyle(document.documentElement).direction:r}function of(r,e){let t={};return[r,e].forEach((s,n)=>{let a=n===1,i=a?"--mobile-offset":"--offset",l=a?Qh:Xh;function c(d){["top","right","bottom","left"].forEach(u=>{t[`${i}-${u}`]=typeof d=="number"?`${d}px`:d})}typeof s=="number"||typeof s=="string"?c(s):typeof s=="object"?["top","right","bottom","left"].forEach(d=>{s[d]===void 0?t[`${i}-${d}`]=l:t[`${i}-${d}`]=typeof s[d]=="number"?`${s[d]}px`:s[d]}):c(l)}),t}var lf=h.forwardRef(function(r,e){let{invert:t,position:s="bottom-right",hotkey:n=["altKey","KeyT"],expand:a,closeButton:i,className:l,offset:c,mobileOffset:d,theme:u="light",richColors:f,duration:p,style:m,visibleToasts:b=Yh,toastOptions:y,dir:w=Ti(),gap:k=tf,loadingIcon:v,icons:x,containerAriaLabel:S="Notifications",pauseWhenPageIsHidden:R}=r,[$,N]=I.useState([]),C=I.useMemo(()=>Array.from(new Set([s].concat($.filter(de=>de.position).map(de=>de.position)))),[$,s]),[T,P]=I.useState([]),[Z,E]=I.useState(!1),[W,X]=I.useState(!1),[oe,ae]=I.useState(u!=="system"?u:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),me=I.useRef(null),Pe=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),K=I.useRef(null),Ce=I.useRef(!1),st=I.useCallback(de=>{N(ue=>{var he;return(he=ue.find(Te=>Te.id===de.id))!=null&&he.delete||Ke.dismiss(de.id),ue.filter(({id:Te})=>Te!==de.id)})},[]);return I.useEffect(()=>Ke.subscribe(de=>{if(de.dismiss){N(ue=>ue.map(he=>he.id===de.id?{...he,delete:!0}:he));return}setTimeout(()=>{Kd.flushSync(()=>{N(ue=>{let he=ue.findIndex(Te=>Te.id===de.id);return he!==-1?[...ue.slice(0,he),{...ue[he],...de},...ue.slice(he+1)]:[de,...ue]})})})}),[]),I.useEffect(()=>{if(u!=="system"){ae(u);return}if(u==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ae("dark"):ae("light")),typeof window>"u")return;let de=window.matchMedia("(prefers-color-scheme: dark)");try{de.addEventListener("change",({matches:ue})=>{ae(ue?"dark":"light")})}catch{de.addListener(({matches:he})=>{try{ae(he?"dark":"light")}catch(Te){console.error(Te)}})}},[u]),I.useEffect(()=>{$.length<=1&&E(!1)},[$]),I.useEffect(()=>{let de=ue=>{var he,Te;n.every(We=>ue[We]||ue.code===We)&&(E(!0),(he=me.current)==null||he.focus()),ue.code==="Escape"&&(document.activeElement===me.current||(Te=me.current)!=null&&Te.contains(document.activeElement))&&E(!1)};return document.addEventListener("keydown",de),()=>document.removeEventListener("keydown",de)},[n]),I.useEffect(()=>{if(me.current)return()=>{K.current&&(K.current.focus({preventScroll:!0}),K.current=null,Ce.current=!1)}},[me.current]),I.createElement("section",{ref:e,"aria-label":`${S} ${Pe}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},C.map((de,ue)=>{var he;let[Te,We]=de.split("-");return $.length?I.createElement("ol",{key:de,dir:w==="auto"?Ti():w,tabIndex:-1,ref:me,className:l,"data-sonner-toaster":!0,"data-theme":oe,"data-y-position":Te,"data-lifted":Z&&$.length>1&&!a,"data-x-position":We,style:{"--front-toast-height":`${((he=T[0])==null?void 0:he.height)||0}px`,"--width":`${ef}px`,"--gap":`${k}px`,...m,...of(c,d)},onBlur:V=>{Ce.current&&!V.currentTarget.contains(V.relatedTarget)&&(Ce.current=!1,K.current&&(K.current.focus({preventScroll:!0}),K.current=null))},onFocus:V=>{V.target instanceof HTMLElement&&V.target.dataset.dismissible==="false"||Ce.current||(Ce.current=!0,K.current=V.relatedTarget)},onMouseEnter:()=>E(!0),onMouseMove:()=>E(!0),onMouseLeave:()=>{W||E(!1)},onDragEnd:()=>E(!1),onPointerDown:V=>{V.target instanceof HTMLElement&&V.target.dataset.dismissible==="false"||X(!0)},onPointerUp:()=>X(!1)},$.filter(V=>!V.position&&ue===0||V.position===de).map((V,we)=>{var Se,fe;return I.createElement(af,{key:V.id,icons:x,index:we,toast:V,defaultRichColors:f,duration:(Se=y?.duration)!=null?Se:p,className:y?.className,descriptionClassName:y?.descriptionClassName,invert:t,visibleToasts:b,closeButton:(fe=y?.closeButton)!=null?fe:i,interacting:W,position:de,style:y?.style,unstyled:y?.unstyled,classNames:y?.classNames,cancelButtonStyle:y?.cancelButtonStyle,actionButtonStyle:y?.actionButtonStyle,removeToast:st,toasts:$.filter(pe=>pe.position==V.position),heights:T.filter(pe=>pe.position==V.position),setHeights:P,expandByDefault:a,gap:k,loadingIcon:v,expanded:Z,pauseWhenPageIsHidden:R,swipeDirections:r.swipeDirections})})):null}))});const cf=({...r})=>{const{theme:e="system"}=Oh();return o.jsx(lf,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...r})},df="modulepreload",uf=function(r){return"/"+r},Ei={},Wr=function(e,t,s){let n=Promise.resolve();if(t&&t.length>0){let i=function(d){return Promise.all(d.map(u=>Promise.resolve(u).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=l?.nonce||l?.getAttribute("nonce");n=i(t.map(d=>{if(d=uf(d),d in Ei)return;Ei[d]=!0;const u=d.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${f}`))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":df,u||(p.as="script"),p.crossOrigin="",p.href=d,c&&p.setAttribute("nonce",c),document.head.appendChild(p),u)return new Promise((m,b)=>{p.addEventListener("load",m),p.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${d}`)))})}))}function a(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return n.then(i=>{for(const l of i||[])l.status==="rejected"&&a(l.reason);return e().catch(a)})},Ri=r=>{let e;const t=new Set,s=(d,u)=>{const f=typeof d=="function"?d(e):d;if(!Object.is(f,e)){const p=e;e=u??(typeof f!="object"||f===null)?f:Object.assign({},e,f),t.forEach(m=>m(e,p))}},n=()=>e,l={setState:s,getState:n,getInitialState:()=>c,subscribe:d=>(t.add(d),()=>t.delete(d))},c=e=r(s,n,l);return l},hf=r=>r?Ri(r):Ri,ff=r=>r;function mf(r,e=ff){const t=I.useSyncExternalStore(r.subscribe,()=>e(r.getState()),()=>e(r.getInitialState()));return I.useDebugValue(t),t}const Ai=r=>{const e=hf(r),t=s=>mf(e,s);return Object.assign(t,e),t},dl=r=>r?Ai(r):Ai,It=dl((r,e)=>({user:null,isLoading:!0,setUser:t=>r({user:t}),setLoading:t=>r({isLoading:t}),signOut:async()=>{const{auth:t}=await Wr(async()=>{const{auth:s}=await Promise.resolve().then(()=>xp);return{auth:s}},void 0);await t.signOut(),r({user:null})}})),pf=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>Wr(async()=>{const{default:s}=await Promise.resolve().then(()=>qr);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)};class Da extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class gf extends Da{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class vf extends Da{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class yf extends Da{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var fa;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(fa||(fa={}));var xf=function(r,e,t,s){function n(a){return a instanceof t?a:new t(function(i){i(a)})}return new(t||(t=Promise))(function(a,i){function l(u){try{d(s.next(u))}catch(f){i(f)}}function c(u){try{d(s.throw(u))}catch(f){i(f)}}function d(u){u.done?a(u.value):n(u.value).then(l,c)}d((s=s.apply(r,e||[])).next())})};class wf{constructor(e,{headers:t={},customFetch:s,region:n=fa.Any}={}){this.url=e,this.headers=t,this.region=n,this.fetch=pf(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var s;return xf(this,void 0,void 0,function*(){try{const{headers:n,method:a,body:i}=t;let l={},{region:c}=t;c||(c=this.region),c&&c!=="any"&&(l["x-region"]=c);let d;i&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&i instanceof Blob||i instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=i):typeof i=="string"?(l["Content-Type"]="text/plain",d=i):typeof FormData<"u"&&i instanceof FormData?d=i:(l["Content-Type"]="application/json",d=JSON.stringify(i)));const u=yield this.fetch(`${this.url}/${e}`,{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),n),body:d}).catch(b=>{throw new gf(b)}),f=u.headers.get("x-relay-error");if(f&&f==="true")throw new vf(u);if(!u.ok)throw new yf(u);let p=((s=u.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),m;return p==="application/json"?m=yield u.json():p==="application/octet-stream"?m=yield u.blob():p==="text/event-stream"?m=u:p==="multipart/form-data"?m=yield u.formData():m=yield u.text(),{data:m,error:null}}catch(n){return{data:null,error:n}}})}}var Oe={},wr={},br={},_r={},kr={},jr={},bf=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},$r=bf();const _f=$r.fetch,ul=$r.fetch.bind($r),hl=$r.Headers,kf=$r.Request,jf=$r.Response,qr=Object.freeze(Object.defineProperty({__proto__:null,Headers:hl,Request:kf,Response:jf,default:ul,fetch:_f},Symbol.toStringTag,{value:"Module"})),Sf=uu(qr);var Ws={},Pi;function fl(){if(Pi)return Ws;Pi=1,Object.defineProperty(Ws,"__esModule",{value:!0});class r extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return Ws.default=r,Ws}var Ii;function ml(){if(Ii)return jr;Ii=1;var r=jr&&jr.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(jr,"__esModule",{value:!0});const e=r(Sf),t=r(fl());class s{constructor(a){this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=a.headers,this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=a.shouldThrowOnError,this.signal=a.signal,this.isMaybeSingle=a.isMaybeSingle,a.fetch?this.fetch=a.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,i){return this.headers=Object.assign({},this.headers),this.headers[a]=i,this}then(a,i){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const l=this.fetch;let c=l(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async d=>{var u,f,p;let m=null,b=null,y=null,w=d.status,k=d.statusText;if(d.ok){if(this.method!=="HEAD"){const R=await d.text();R===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?b=R:b=JSON.parse(R))}const x=(u=this.headers.Prefer)===null||u===void 0?void 0:u.match(/count=(exact|planned|estimated)/),S=(f=d.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");x&&S&&S.length>1&&(y=parseInt(S[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(b)&&(b.length>1?(m={code:"PGRST116",details:`Results contain ${b.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},b=null,y=null,w=406,k="Not Acceptable"):b.length===1?b=b[0]:b=null)}else{const x=await d.text();try{m=JSON.parse(x),Array.isArray(m)&&d.status===404&&(b=[],m=null,w=200,k="OK")}catch{d.status===404&&x===""?(w=204,k="No Content"):m={message:x}}if(m&&this.isMaybeSingle&&(!((p=m?.details)===null||p===void 0)&&p.includes("0 rows"))&&(m=null,w=200,k="OK"),m&&this.shouldThrowOnError)throw new t.default(m)}return{error:m,data:b,count:y,status:w,statusText:k}});return this.shouldThrowOnError||(c=c.catch(d=>{var u,f,p;return{error:{message:`${(u=d?.name)!==null&&u!==void 0?u:"FetchError"}: ${d?.message}`,details:`${(f=d?.stack)!==null&&f!==void 0?f:""}`,hint:"",code:`${(p=d?.code)!==null&&p!==void 0?p:""}`},data:null,count:null,status:0,statusText:""}})),c.then(a,i)}returns(){return this}overrideTypes(){return this}}return jr.default=s,jr}var Oi;function pl(){if(Oi)return kr;Oi=1;var r=kr&&kr.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(kr,"__esModule",{value:!0});const e=r(ml());class t extends e.default{select(n){let a=!1;const i=(n??"*").split("").map(l=>/\s/.test(l)&&!a?"":(l==='"'&&(a=!a),l)).join("");return this.url.searchParams.set("select",i),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(n,{ascending:a=!0,nullsFirst:i,foreignTable:l,referencedTable:c=l}={}){const d=c?`${c}.order`:"order",u=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${u?`${u},`:""}${n}.${a?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(n,{foreignTable:a,referencedTable:i=a}={}){const l=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(l,`${n}`),this}range(n,a,{foreignTable:i,referencedTable:l=i}={}){const c=typeof l>"u"?"offset":`${l}.offset`,d=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(c,`${n}`),this.url.searchParams.set(d,`${a-n+1}`),this}abortSignal(n){return this.signal=n,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:n=!1,verbose:a=!1,settings:i=!1,buffers:l=!1,wal:c=!1,format:d="text"}={}){var u;const f=[n?"analyze":null,a?"verbose":null,i?"settings":null,l?"buffers":null,c?"wal":null].filter(Boolean).join("|"),p=(u=this.headers.Accept)!==null&&u!==void 0?u:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${d}; for="${p}"; options=${f};`,d==="json"?this:this}rollback(){var n;return((n=this.headers.Prefer)!==null&&n!==void 0?n:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return kr.default=t,kr}var Li;function Ua(){if(Li)return _r;Li=1;var r=_r&&_r.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(_r,"__esModule",{value:!0});const e=r(pl());class t extends e.default{eq(n,a){return this.url.searchParams.append(n,`eq.${a}`),this}neq(n,a){return this.url.searchParams.append(n,`neq.${a}`),this}gt(n,a){return this.url.searchParams.append(n,`gt.${a}`),this}gte(n,a){return this.url.searchParams.append(n,`gte.${a}`),this}lt(n,a){return this.url.searchParams.append(n,`lt.${a}`),this}lte(n,a){return this.url.searchParams.append(n,`lte.${a}`),this}like(n,a){return this.url.searchParams.append(n,`like.${a}`),this}likeAllOf(n,a){return this.url.searchParams.append(n,`like(all).{${a.join(",")}}`),this}likeAnyOf(n,a){return this.url.searchParams.append(n,`like(any).{${a.join(",")}}`),this}ilike(n,a){return this.url.searchParams.append(n,`ilike.${a}`),this}ilikeAllOf(n,a){return this.url.searchParams.append(n,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(n,a){return this.url.searchParams.append(n,`ilike(any).{${a.join(",")}}`),this}is(n,a){return this.url.searchParams.append(n,`is.${a}`),this}in(n,a){const i=Array.from(new Set(a)).map(l=>typeof l=="string"&&new RegExp("[,()]").test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(n,`in.(${i})`),this}contains(n,a){return typeof a=="string"?this.url.searchParams.append(n,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(n,`cs.{${a.join(",")}}`):this.url.searchParams.append(n,`cs.${JSON.stringify(a)}`),this}containedBy(n,a){return typeof a=="string"?this.url.searchParams.append(n,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(n,`cd.{${a.join(",")}}`):this.url.searchParams.append(n,`cd.${JSON.stringify(a)}`),this}rangeGt(n,a){return this.url.searchParams.append(n,`sr.${a}`),this}rangeGte(n,a){return this.url.searchParams.append(n,`nxl.${a}`),this}rangeLt(n,a){return this.url.searchParams.append(n,`sl.${a}`),this}rangeLte(n,a){return this.url.searchParams.append(n,`nxr.${a}`),this}rangeAdjacent(n,a){return this.url.searchParams.append(n,`adj.${a}`),this}overlaps(n,a){return typeof a=="string"?this.url.searchParams.append(n,`ov.${a}`):this.url.searchParams.append(n,`ov.{${a.join(",")}}`),this}textSearch(n,a,{config:i,type:l}={}){let c="";l==="plain"?c="pl":l==="phrase"?c="ph":l==="websearch"&&(c="w");const d=i===void 0?"":`(${i})`;return this.url.searchParams.append(n,`${c}fts${d}.${a}`),this}match(n){return Object.entries(n).forEach(([a,i])=>{this.url.searchParams.append(a,`eq.${i}`)}),this}not(n,a,i){return this.url.searchParams.append(n,`not.${a}.${i}`),this}or(n,{foreignTable:a,referencedTable:i=a}={}){const l=i?`${i}.or`:"or";return this.url.searchParams.append(l,`(${n})`),this}filter(n,a,i){return this.url.searchParams.append(n,`${a}.${i}`),this}}return _r.default=t,_r}var Mi;function gl(){if(Mi)return br;Mi=1;var r=br&&br.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(br,"__esModule",{value:!0});const e=r(Ua());class t{constructor(n,{headers:a={},schema:i,fetch:l}){this.url=n,this.headers=a,this.schema=i,this.fetch=l}select(n,{head:a=!1,count:i}={}){const l=a?"HEAD":"GET";let c=!1;const d=(n??"*").split("").map(u=>/\s/.test(u)&&!c?"":(u==='"'&&(c=!c),u)).join("");return this.url.searchParams.set("select",d),i&&(this.headers.Prefer=`count=${i}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(n,{count:a,defaultToNull:i=!0}={}){const l="POST",c=[];if(this.headers.Prefer&&c.push(this.headers.Prefer),a&&c.push(`count=${a}`),i||c.push("missing=default"),this.headers.Prefer=c.join(","),Array.isArray(n)){const d=n.reduce((u,f)=>u.concat(Object.keys(f)),[]);if(d.length>0){const u=[...new Set(d)].map(f=>`"${f}"`);this.url.searchParams.set("columns",u.join(","))}}return new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:this.fetch,allowEmpty:!1})}upsert(n,{onConflict:a,ignoreDuplicates:i=!1,count:l,defaultToNull:c=!0}={}){const d="POST",u=[`resolution=${i?"ignore":"merge"}-duplicates`];if(a!==void 0&&this.url.searchParams.set("on_conflict",a),this.headers.Prefer&&u.push(this.headers.Prefer),l&&u.push(`count=${l}`),c||u.push("missing=default"),this.headers.Prefer=u.join(","),Array.isArray(n)){const f=n.reduce((p,m)=>p.concat(Object.keys(m)),[]);if(f.length>0){const p=[...new Set(f)].map(m=>`"${m}"`);this.url.searchParams.set("columns",p.join(","))}}return new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:this.fetch,allowEmpty:!1})}update(n,{count:a}={}){const i="PATCH",l=[];return this.headers.Prefer&&l.push(this.headers.Prefer),a&&l.push(`count=${a}`),this.headers.Prefer=l.join(","),new e.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:this.fetch,allowEmpty:!1})}delete({count:n}={}){const a="DELETE",i=[];return n&&i.push(`count=${n}`),this.headers.Prefer&&i.unshift(this.headers.Prefer),this.headers.Prefer=i.join(","),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return br.default=t,br}var Zr={},Kr={},$i;function Nf(){return $i||($i=1,Object.defineProperty(Kr,"__esModule",{value:!0}),Kr.version=void 0,Kr.version="0.0.0-automated"),Kr}var Di;function Cf(){if(Di)return Zr;Di=1,Object.defineProperty(Zr,"__esModule",{value:!0}),Zr.DEFAULT_HEADERS=void 0;const r=Nf();return Zr.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${r.version}`},Zr}var Ui;function Tf(){if(Ui)return wr;Ui=1;var r=wr&&wr.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(wr,"__esModule",{value:!0});const e=r(gl()),t=r(Ua()),s=Cf();class n{constructor(i,{headers:l={},schema:c,fetch:d}={}){this.url=i,this.headers=Object.assign(Object.assign({},s.DEFAULT_HEADERS),l),this.schemaName=c,this.fetch=d}from(i){const l=new URL(`${this.url}/${i}`);return new e.default(l,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new n(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,l={},{head:c=!1,get:d=!1,count:u}={}){let f;const p=new URL(`${this.url}/rpc/${i}`);let m;c||d?(f=c?"HEAD":"GET",Object.entries(l).filter(([y,w])=>w!==void 0).map(([y,w])=>[y,Array.isArray(w)?`{${w.join(",")}}`:`${w}`]).forEach(([y,w])=>{p.searchParams.append(y,w)})):(f="POST",m=l);const b=Object.assign({},this.headers);return u&&(b.Prefer=`count=${u}`),new t.default({method:f,url:p,headers:b,schema:this.schemaName,body:m,fetch:this.fetch,allowEmpty:!1})}}return wr.default=n,wr}var Bi;function Ef(){if(Bi)return Oe;Bi=1;var r=Oe&&Oe.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(Oe,"__esModule",{value:!0}),Oe.PostgrestError=Oe.PostgrestBuilder=Oe.PostgrestTransformBuilder=Oe.PostgrestFilterBuilder=Oe.PostgrestQueryBuilder=Oe.PostgrestClient=void 0;const e=r(Tf());Oe.PostgrestClient=e.default;const t=r(gl());Oe.PostgrestQueryBuilder=t.default;const s=r(Ua());Oe.PostgrestFilterBuilder=s.default;const n=r(pl());Oe.PostgrestTransformBuilder=n.default;const a=r(ml());Oe.PostgrestBuilder=a.default;const i=r(fl());return Oe.PostgrestError=i.default,Oe.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:n.default,PostgrestBuilder:a.default,PostgrestError:i.default},Oe}var Rf=Ef();const Af=hu(Rf),{PostgrestClient:Pf,PostgrestQueryBuilder:$x,PostgrestFilterBuilder:Dx,PostgrestTransformBuilder:Ux,PostgrestBuilder:Bx,PostgrestError:Vx}=Af;function If(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const Of=If(),Lf="2.11.15",Mf=`realtime-js/${Lf}`,$f="1.0.0",vl=1e4,Df=1e3;var rs;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(rs||(rs={}));var Ue;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(Ue||(Ue={}));var dt;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(dt||(dt={}));var ma;(function(r){r.websocket="websocket"})(ma||(ma={}));var cr;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(cr||(cr={}));class Uf{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){const n=t.getUint8(1),a=t.getUint8(2);let i=this.HEADER_LENGTH+2;const l=s.decode(e.slice(i,i+n));i=i+n;const c=s.decode(e.slice(i,i+a));i=i+a;const d=JSON.parse(s.decode(e.slice(i,e.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}class yl{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var be;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(be||(be={}));const Vi=(r,e,t={})=>{var s;const n=(s=t.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(e).reduce((a,i)=>(a[i]=Bf(i,r,e,n),a),{})},Bf=(r,e,t,s)=>{const n=e.find(l=>l.name===r),a=n?.type,i=t[r];return a&&!s.includes(a)?xl(a,i):pa(i)},xl=(r,e)=>{if(r.charAt(0)==="_"){const t=r.slice(1,r.length);return Wf(e,t)}switch(r){case be.bool:return Vf(e);case be.float4:case be.float8:case be.int2:case be.int4:case be.int8:case be.numeric:case be.oid:return Ff(e);case be.json:case be.jsonb:return zf(e);case be.timestamp:return qf(e);case be.abstime:case be.date:case be.daterange:case be.int4range:case be.int8range:case be.money:case be.reltime:case be.text:case be.time:case be.timestamptz:case be.timetz:case be.tsrange:case be.tstzrange:return pa(e);default:return pa(e)}},pa=r=>r,Vf=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},Ff=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},zf=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(e){return console.log(`JSON parse error: ${e}`),r}return r},Wf=(r,e)=>{if(typeof r!="string")return r;const t=r.length-1,s=r[t];if(r[0]==="{"&&s==="}"){let a;const i=r.slice(1,t);try{a=JSON.parse("["+i+"]")}catch{a=i?i.split(","):[]}return a.map(l=>xl(e,l))}return r},qf=r=>typeof r=="string"?r.replace(" ","T"):r,wl=r=>{let e=r;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Jn{constructor(e,t,s={},n=vl){this.channel=e,this.event=t,this.payload=s,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Fi;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(Fi||(Fi={}));class ss{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},n=>{const{onJoin:a,onLeave:i,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ss.syncState(this.state,n,a,i),this.pendingDiffs.forEach(c=>{this.state=ss.syncDiff(this.state,c,a,i)}),this.pendingDiffs=[],l()}),this.channel._on(s.diff,{},n=>{const{onJoin:a,onLeave:i,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=ss.syncDiff(this.state,n,a,i),l())}),this.onJoin((n,a,i)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:a,newPresences:i})}),this.onLeave((n,a,i)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:a,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,n){const a=this.cloneDeep(e),i=this.transformState(t),l={},c={};return this.map(a,(d,u)=>{i[d]||(c[d]=u)}),this.map(i,(d,u)=>{const f=a[d];if(f){const p=u.map(w=>w.presence_ref),m=f.map(w=>w.presence_ref),b=u.filter(w=>m.indexOf(w.presence_ref)<0),y=f.filter(w=>p.indexOf(w.presence_ref)<0);b.length>0&&(l[d]=b),y.length>0&&(c[d]=y)}else l[d]=u}),this.syncDiff(a,{joins:l,leaves:c},s,n)}static syncDiff(e,t,s,n){const{joins:a,leaves:i}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),n||(n=()=>{}),this.map(a,(l,c)=>{var d;const u=(d=e[l])!==null&&d!==void 0?d:[];if(e[l]=this.cloneDeep(c),u.length>0){const f=e[l].map(m=>m.presence_ref),p=u.filter(m=>f.indexOf(m.presence_ref)<0);e[l].unshift(...p)}s(l,u,c)}),this.map(i,(l,c)=>{let d=e[l];if(!d)return;const u=c.map(f=>f.presence_ref);d=d.filter(f=>u.indexOf(f.presence_ref)<0),e[l]=d,n(l,d,c),d.length===0&&delete e[l]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const n=e[s];return"metas"in n?t[s]=n.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):t[s]=n,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var zi;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(zi||(zi={}));var Wi;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(Wi||(Wi={}));var Rt;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(Rt||(Rt={}));class Ba{constructor(e,t={config:{}},s){this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=Ue.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Jn(this,dt.join,this.params,this.timeout),this.rejoinTimer=new yl(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ue.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ue.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=Ue.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ue.errored,this.rejoinTimer.scheduleTimeout())}),this._on(dt.reply,{},(n,a)=>{this._trigger(this._replyEventName(a),n)}),this.presence=new ss(this),this.broadcastEndpointURL=wl(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var s,n;if(this.socket.isConnected()||this.socket.connect(),this.state==Ue.closed){const{config:{broadcast:a,presence:i,private:l}}=this.params;this._onError(u=>e?.(Rt.CHANNEL_ERROR,u)),this._onClose(()=>e?.(Rt.CLOSED));const c={},d={broadcast:a,presence:i,postgres_changes:(n=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(u=>u.filter))!==null&&n!==void 0?n:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:d},c)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:u})=>{var f;if(this.socket.setAuth(),u===void 0){e?.(Rt.SUBSCRIBED);return}else{const p=this.bindings.postgres_changes,m=(f=p?.length)!==null&&f!==void 0?f:0,b=[];for(let y=0;y<m;y++){const w=p[y],{filter:{event:k,schema:v,table:x,filter:S}}=w,R=u&&u[y];if(R&&R.event===k&&R.schema===v&&R.table===x&&R.filter===S)b.push(Object.assign(Object.assign({},w),{id:R.id}));else{this.unsubscribe(),this.state=Ue.errored,e?.(Rt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,e&&e(Rt.SUBSCRIBED);return}}).receive("error",u=>{this.state=Ue.errored,e?.(Rt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e?.(Rt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this._on(e,t,s)}async send(e,t={}){var s,n;if(!this._canPush()&&e.type==="broadcast"){const{event:a,payload:i}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:i,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(s=t.timeout)!==null&&s!==void 0?s:this.timeout);return await((n=d.body)===null||n===void 0?void 0:n.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var i,l,c;const d=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(i=this.params)===null||i===void 0?void 0:i.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),d.receive("ok",()=>a("ok")),d.receive("error",()=>a("error")),d.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ue.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(dt.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(n=>{s=new Jn(this,dt.leave,{},e),s.receive("ok",()=>{t(),n("ok")}).receive("timeout",()=>{t(),n("timed out")}).receive("error",()=>{n("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,t,s){const n=new AbortController,a=setTimeout(()=>n.abort(),s),i=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:n.signal}));return clearTimeout(a),i}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new Jn(this,e,t,s);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var n,a;const i=e.toLocaleLowerCase(),{close:l,error:c,leave:d,join:u}=dt;if(s&&[l,c,d,u].indexOf(i)>=0&&s!==this._joinRef())return;let p=this._onMessage(i,t,s);if(t&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(m=>{var b,y,w;return((b=m.filter)===null||b===void 0?void 0:b.event)==="*"||((w=(y=m.filter)===null||y===void 0?void 0:y.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===i}).map(m=>m.callback(p,s)):(a=this.bindings[i])===null||a===void 0||a.filter(m=>{var b,y,w,k,v,x;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in m){const S=m.id,R=(b=m.filter)===null||b===void 0?void 0:b.event;return S&&((y=t.ids)===null||y===void 0?void 0:y.includes(S))&&(R==="*"||R?.toLocaleLowerCase()===((w=t.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const S=(v=(k=m?.filter)===null||k===void 0?void 0:k.event)===null||v===void 0?void 0:v.toLocaleLowerCase();return S==="*"||S===((x=t?.event)===null||x===void 0?void 0:x.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===i}).map(m=>{if(typeof p=="object"&&"ids"in p){const b=p.data,{schema:y,table:w,commit_timestamp:k,type:v,errors:x}=b;p=Object.assign(Object.assign({},{schema:y,table:w,commit_timestamp:k,eventType:v,new:{},old:{},errors:x}),this._getPayloadRecords(b))}m.callback(p,s)})}_isClosed(){return this.state===Ue.closed}_isJoined(){return this.state===Ue.joined}_isJoining(){return this.state===Ue.joining}_isLeaving(){return this.state===Ue.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const n=e.toLocaleLowerCase(),a={type:n,filter:t,callback:s};return this.bindings[n]?this.bindings[n].push(a):this.bindings[n]=[a],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(n=>{var a;return!(((a=n.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===s&&Ba.isEqual(n.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(dt.close,{},e)}_onError(e){this._on(dt.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ue.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Vi(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Vi(e.columns,e.old_record)),t}}const qi=()=>{},Hf=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Zf{constructor(e,t){var s;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=vl,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=qi,this.ref=0,this.logger=qi,this.conn=null,this.sendBuffer=[],this.serializer=new Uf,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=a=>{let i;return a?i=a:typeof fetch>"u"?i=(...l)=>Wr(async()=>{const{default:c}=await Promise.resolve().then(()=>qr);return{default:c}},void 0).then(({default:c})=>c(...l)):i=fetch,(...l)=>i(...l)},this.endPoint=`${e}/${ma.websocket}`,this.httpEndpoint=wl(e),t?.transport?this.transport=t.transport:this.transport=null,t?.params&&(this.params=t.params),t?.timeout&&(this.timeout=t.timeout),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),t?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const n=(s=t?.params)===null||s===void 0?void 0:s.apikey;if(n&&(this.accessTokenValue=n,this.apiKey=n),this.reconnectAfterMs=t?.reconnectAfterMs?t.reconnectAfterMs:a=>[1e3,2e3,5e3,1e4][a-1]||1e4,this.encode=t?.encode?t.encode:(a,i)=>i(JSON.stringify(a)),this.decode=t?.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new yl(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t?.fetch),t?.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=t?.worker||!1,this.workerUrl=t?.workerUrl}this.accessToken=t?.accessToken||null}connect(){if(!this.conn){if(this.transport||(this.transport=Of),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:$f}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(s=>s.teardown()))}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case rs.connecting:return cr.Connecting;case rs.open:return cr.Open;case rs.closing:return cr.Closing;default:return cr.Closed}}isConnected(){return this.connectionState()===cr.Open}channel(e,t={config:{}}){const s=`realtime:${e}`,n=this.getChannels().find(a=>a.topic===s);if(n)return n;{const a=new Ba(`realtime:${e}`,t,this);return this.channels.push(a),a}}push(e){const{topic:t,event:s,payload:n,ref:a}=e,i=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${t} ${s} (${a})`,n),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(s=>{const n={access_token:t,version:Mf};t&&s.updateJoinPayload(n),s.joinedOnce&&s._isJoined()&&s._push(dt.access_token,{access_token:t})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(Df,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:s,event:n,payload:a,ref:i}=t;s==="phoenix"&&n==="phx_reply"&&this.heartbeatCallback(t.payload.status=="ok"?"ok":"error"),i&&i===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${a.status||""} ${s} ${n} ${i&&"("+i+")"||""}`,a),Array.from(this.channels).filter(l=>l._isMember(s)).forEach(l=>l._trigger(n,a,i)),this.stateChangeCallbacks.message.forEach(l=>l(t))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(dt.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const s=e.match(/\?/)?"&":"?",n=new URLSearchParams(t);return`${e}${s}${n}`}_workerObjectUrl(e){let t;if(e)t=e;else{const s=new Blob([Hf],{type:"application/javascript"});t=URL.createObjectURL(s)}return t}}class Va extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Le(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class Kf extends Va{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class ga extends Va{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Gf=function(r,e,t,s){function n(a){return a instanceof t?a:new t(function(i){i(a)})}return new(t||(t=Promise))(function(a,i){function l(u){try{d(s.next(u))}catch(f){i(f)}}function c(u){try{d(s.throw(u))}catch(f){i(f)}}function d(u){u.done?a(u.value):n(u.value).then(l,c)}d((s=s.apply(r,e||[])).next())})};const bl=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>Wr(async()=>{const{default:s}=await Promise.resolve().then(()=>qr);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},Jf=()=>Gf(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Wr(()=>Promise.resolve().then(()=>qr),void 0)).Response:Response}),va=r=>{if(Array.isArray(r))return r.map(t=>va(t));if(typeof r=="function"||r!==Object(r))return r;const e={};return Object.entries(r).forEach(([t,s])=>{const n=t.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[n]=va(s)}),e};var xr=function(r,e,t,s){function n(a){return a instanceof t?a:new t(function(i){i(a)})}return new(t||(t=Promise))(function(a,i){function l(u){try{d(s.next(u))}catch(f){i(f)}}function c(u){try{d(s.throw(u))}catch(f){i(f)}}function d(u){u.done?a(u.value):n(u.value).then(l,c)}d((s=s.apply(r,e||[])).next())})};const Yn=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),Yf=(r,e,t)=>xr(void 0,void 0,void 0,function*(){const s=yield Jf();r instanceof s&&!t?.noResolveJson?r.json().then(n=>{e(new Kf(Yn(n),r.status||500))}).catch(n=>{e(new ga(Yn(n),n))}):e(new ga(Yn(r),r))}),Xf=(r,e,t,s)=>{const n={method:r,headers:e?.headers||{}};return r==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json"},e?.headers),s&&(n.body=JSON.stringify(s)),Object.assign(Object.assign({},n),t))};function Ps(r,e,t,s,n,a){return xr(this,void 0,void 0,function*(){return new Promise((i,l)=>{r(t,Xf(e,s,n,a)).then(c=>{if(!c.ok)throw c;return s?.noResolveJson?c:c.json()}).then(c=>i(c)).catch(c=>Yf(c,l,s))})})}function sn(r,e,t,s){return xr(this,void 0,void 0,function*(){return Ps(r,"GET",e,t,s)})}function Bt(r,e,t,s,n){return xr(this,void 0,void 0,function*(){return Ps(r,"POST",e,s,n,t)})}function Qf(r,e,t,s,n){return xr(this,void 0,void 0,function*(){return Ps(r,"PUT",e,s,n,t)})}function em(r,e,t,s){return xr(this,void 0,void 0,function*(){return Ps(r,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),s)})}function _l(r,e,t,s,n){return xr(this,void 0,void 0,function*(){return Ps(r,"DELETE",e,s,n,t)})}var He=function(r,e,t,s){function n(a){return a instanceof t?a:new t(function(i){i(a)})}return new(t||(t=Promise))(function(a,i){function l(u){try{d(s.next(u))}catch(f){i(f)}}function c(u){try{d(s.throw(u))}catch(f){i(f)}}function d(u){u.done?a(u.value):n(u.value).then(l,c)}d((s=s.apply(r,e||[])).next())})};const tm={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Hi={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class rm{constructor(e,t={},s,n){this.url=e,this.headers=t,this.bucketId=s,this.fetch=bl(n)}uploadOrUpdate(e,t,s,n){return He(this,void 0,void 0,function*(){try{let a;const i=Object.assign(Object.assign({},Hi),n);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(i.upsert)});const c=i.metadata;typeof Blob<"u"&&s instanceof Blob?(a=new FormData,a.append("cacheControl",i.cacheControl),c&&a.append("metadata",this.encodeMetadata(c)),a.append("",s)):typeof FormData<"u"&&s instanceof FormData?(a=s,a.append("cacheControl",i.cacheControl),c&&a.append("metadata",this.encodeMetadata(c))):(a=s,l["cache-control"]=`max-age=${i.cacheControl}`,l["content-type"]=i.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),n?.headers&&(l=Object.assign(Object.assign({},l),n.headers));const d=this._removeEmptyFolders(t),u=this._getFinalPath(d),f=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:a,headers:l},i?.duplex?{duplex:i.duplex}:{})),p=yield f.json();return f.ok?{data:{path:d,id:p.Id,fullPath:p.Key},error:null}:{data:null,error:p}}catch(a){if(Le(a))return{data:null,error:a};throw a}})}upload(e,t,s){return He(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,n){return He(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),i=this._getFinalPath(a),l=new URL(this.url+`/object/upload/sign/${i}`);l.searchParams.set("token",t);try{let c;const d=Object.assign({upsert:Hi.upsert},n),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&s instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",s)):typeof FormData<"u"&&s instanceof FormData?(c=s,c.append("cacheControl",d.cacheControl)):(c=s,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const f=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:u}),p=yield f.json();return f.ok?{data:{path:a,fullPath:p.Key},error:null}:{data:null,error:p}}catch(c){if(Le(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,t){return He(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const n=Object.assign({},this.headers);t?.upsert&&(n["x-upsert"]="true");const a=yield Bt(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:n}),i=new URL(this.url+a.url),l=i.searchParams.get("token");if(!l)throw new Va("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:l},error:null}}catch(s){if(Le(s))return{data:null,error:s};throw s}})}update(e,t,s){return He(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t,s){return He(this,void 0,void 0,function*(){try{return{data:yield Bt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s?.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(Le(n))return{data:null,error:n};throw n}})}copy(e,t,s){return He(this,void 0,void 0,function*(){try{return{data:{path:(yield Bt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(Le(n))return{data:null,error:n};throw n}})}createSignedUrl(e,t,s){return He(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),a=yield Bt(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:t},s?.transform?{transform:s.transform}:{}),{headers:this.headers});const i=s?.download?`&download=${s.download===!0?"":s.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${i}`)},{data:a,error:null}}catch(n){if(Le(n))return{data:null,error:n};throw n}})}createSignedUrls(e,t,s){return He(this,void 0,void 0,function*(){try{const n=yield Bt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),a=s?.download?`&download=${s.download===!0?"":s.download}`:"";return{data:n.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${a}`):null})),error:null}}catch(n){if(Le(n))return{data:null,error:n};throw n}})}download(e,t){return He(this,void 0,void 0,function*(){const n=typeof t?.transform<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString(t?.transform||{}),i=a?`?${a}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield sn(this.fetch,`${this.url}/${n}/${l}${i}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(Le(l))return{data:null,error:l};throw l}})}info(e){return He(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const s=yield sn(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:va(s),error:null}}catch(s){if(Le(s))return{data:null,error:s};throw s}})}exists(e){return He(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield em(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(Le(s)&&s instanceof ga){const n=s.originalError;if([400,404].includes(n?.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,t){const s=this._getFinalPath(e),n=[],a=t?.download?`download=${t.download===!0?"":t.download}`:"";a!==""&&n.push(a);const l=typeof t?.transform<"u"?"render/image":"object",c=this.transformOptsToQueryString(t?.transform||{});c!==""&&n.push(c);let d=n.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${s}${d}`)}}}remove(e){return He(this,void 0,void 0,function*(){try{return{data:yield _l(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(Le(t))return{data:null,error:t};throw t}})}list(e,t,s){return He(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},tm),t),{prefix:e||""});return{data:yield Bt(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},s),error:null}}catch(n){if(Le(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const sm="2.7.1",nm={"X-Client-Info":`storage-js/${sm}`};var Sr=function(r,e,t,s){function n(a){return a instanceof t?a:new t(function(i){i(a)})}return new(t||(t=Promise))(function(a,i){function l(u){try{d(s.next(u))}catch(f){i(f)}}function c(u){try{d(s.throw(u))}catch(f){i(f)}}function d(u){u.done?a(u.value):n(u.value).then(l,c)}d((s=s.apply(r,e||[])).next())})};class am{constructor(e,t={},s){this.url=e,this.headers=Object.assign(Object.assign({},nm),t),this.fetch=bl(s)}listBuckets(){return Sr(this,void 0,void 0,function*(){try{return{data:yield sn(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Le(e))return{data:null,error:e};throw e}})}getBucket(e){return Sr(this,void 0,void 0,function*(){try{return{data:yield sn(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(Le(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Sr(this,void 0,void 0,function*(){try{return{data:yield Bt(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(Le(s))return{data:null,error:s};throw s}})}updateBucket(e,t){return Sr(this,void 0,void 0,function*(){try{return{data:yield Qf(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(Le(s))return{data:null,error:s};throw s}})}emptyBucket(e){return Sr(this,void 0,void 0,function*(){try{return{data:yield Bt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(Le(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Sr(this,void 0,void 0,function*(){try{return{data:yield _l(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(Le(t))return{data:null,error:t};throw t}})}}class im extends am{constructor(e,t={},s){super(e,t,s)}from(e){return new rm(this.url,this.headers,e,this.fetch)}}const om="2.50.2";let Xr="";typeof Deno<"u"?Xr="deno":typeof document<"u"?Xr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Xr="react-native":Xr="node";const lm={"X-Client-Info":`supabase-js-${Xr}/${om}`},cm={headers:lm},dm={schema:"public"},um={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},hm={};var fm=function(r,e,t,s){function n(a){return a instanceof t?a:new t(function(i){i(a)})}return new(t||(t=Promise))(function(a,i){function l(u){try{d(s.next(u))}catch(f){i(f)}}function c(u){try{d(s.throw(u))}catch(f){i(f)}}function d(u){u.done?a(u.value):n(u.value).then(l,c)}d((s=s.apply(r,e||[])).next())})};const mm=r=>{let e;return r?e=r:typeof fetch>"u"?e=ul:e=fetch,(...t)=>e(...t)},pm=()=>typeof Headers>"u"?hl:Headers,gm=(r,e,t)=>{const s=mm(t),n=pm();return(a,i)=>fm(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:r;let d=new n(i?.headers);return d.has("apikey")||d.set("apikey",r),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),s(a,Object.assign(Object.assign({},i),{headers:d}))})};var vm=function(r,e,t,s){function n(a){return a instanceof t?a:new t(function(i){i(a)})}return new(t||(t=Promise))(function(a,i){function l(u){try{d(s.next(u))}catch(f){i(f)}}function c(u){try{d(s.throw(u))}catch(f){i(f)}}function d(u){u.done?a(u.value):n(u.value).then(l,c)}d((s=s.apply(r,e||[])).next())})};function ym(r){return r.endsWith("/")?r:r+"/"}function xm(r,e){var t,s;const{db:n,auth:a,realtime:i,global:l}=r,{db:c,auth:d,realtime:u,global:f}=e,p={db:Object.assign(Object.assign({},c),n),auth:Object.assign(Object.assign({},d),a),realtime:Object.assign(Object.assign({},u),i),global:Object.assign(Object.assign(Object.assign({},f),l),{headers:Object.assign(Object.assign({},(t=f?.headers)!==null&&t!==void 0?t:{}),(s=l?.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>vm(this,void 0,void 0,function*(){return""})};return r.accessToken?p.accessToken=r.accessToken:delete p.accessToken,p}const kl="2.70.0",Rr=30*1e3,ya=3,Xn=ya*Rr,wm="http://localhost:9999",bm="supabase.auth.token",_m={"X-Client-Info":`gotrue-js/${kl}`},xa="X-Supabase-Api-Version",jl={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},km=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,jm=6e5;class Fa extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function te(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class Sm extends Fa{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}function Nm(r){return te(r)&&r.name==="AuthApiError"}class Sl extends Fa{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class tr extends Fa{constructor(e,t,s,n){super(e,s,n),this.name=t,this.status=s}}class Ut extends tr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Cm(r){return te(r)&&r.name==="AuthSessionMissingError"}class qs extends tr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Hs extends tr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Zs extends tr{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Tm(r){return te(r)&&r.name==="AuthImplicitGrantRedirectError"}class Zi extends tr{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class wa extends tr{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Qn(r){return te(r)&&r.name==="AuthRetryableFetchError"}class Ki extends tr{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}class ns extends tr{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const nn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Gi=` 	
\r=`.split(""),Em=(()=>{const r=new Array(128);for(let e=0;e<r.length;e+=1)r[e]=-1;for(let e=0;e<Gi.length;e+=1)r[Gi[e].charCodeAt(0)]=-2;for(let e=0;e<nn.length;e+=1)r[nn[e].charCodeAt(0)]=e;return r})();function Ji(r,e,t){if(r!==null)for(e.queue=e.queue<<8|r,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(nn[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(nn[s]),e.queuedBits-=6}}function Nl(r,e,t){const s=Em[r];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function Yi(r){const e=[],t=i=>{e.push(String.fromCodePoint(i))},s={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},a=i=>{Pm(i,s,t)};for(let i=0;i<r.length;i+=1)Nl(r.charCodeAt(i),n,a);return e.join("")}function Rm(r,e){if(r<=127){e(r);return}else if(r<=2047){e(192|r>>6),e(128|r&63);return}else if(r<=65535){e(224|r>>12),e(128|r>>6&63),e(128|r&63);return}else if(r<=1114111){e(240|r>>18),e(128|r>>12&63),e(128|r>>6&63),e(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function Am(r,e){for(let t=0;t<r.length;t+=1){let s=r.charCodeAt(t);if(s>55295&&s<=56319){const n=(s-55296)*1024&65535;s=(r.charCodeAt(t+1)-56320&65535|n)+65536,t+=1}Rm(s,e)}}function Pm(r,e,t){if(e.utf8seq===0){if(r<=127){t(r);return}for(let s=1;s<6;s+=1)if((r>>7-s&1)===0){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=r&31;else if(e.utf8seq===3)e.codepoint=r&15;else if(e.utf8seq===4)e.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|r&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function Im(r){const e=[],t={queue:0,queuedBits:0},s=n=>{e.push(n)};for(let n=0;n<r.length;n+=1)Nl(r.charCodeAt(n),t,s);return new Uint8Array(e)}function Om(r){const e=[];return Am(r,t=>e.push(t)),new Uint8Array(e)}function Lm(r){const e=[],t={queue:0,queuedBits:0},s=n=>{e.push(n)};return r.forEach(n=>Ji(n,t,s)),Ji(null,t,s),e.join("")}function Mm(r){return Math.round(Date.now()/1e3)+r}function $m(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const e=Math.random()*16|0;return(r=="x"?e:e&3|8).toString(16)})}const lt=()=>typeof window<"u"&&typeof document<"u",or={tested:!1,writable:!1},as=()=>{if(!lt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(or.tested)return or.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),or.tested=!0,or.writable=!0}catch{or.tested=!0,or.writable=!1}return or.writable};function Dm(r){const e={},t=new URL(r);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((n,a)=>{e[a]=n})}catch{}return t.searchParams.forEach((s,n)=>{e[n]=s}),e}const Cl=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>Wr(async()=>{const{default:s}=await Promise.resolve().then(()=>qr);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},Um=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",Tl=async(r,e,t)=>{await r.setItem(e,JSON.stringify(t))},Ks=async(r,e)=>{const t=await r.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Gs=async(r,e)=>{await r.removeItem(e)};class En{constructor(){this.promise=new En.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}En.promiseConstructor=Promise;function ea(r){const e=r.split(".");if(e.length!==3)throw new ns("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!km.test(e[s]))throw new ns("JWT not in base64url format");return{header:JSON.parse(Yi(e[0])),payload:JSON.parse(Yi(e[1])),signature:Im(e[2]),raw:{header:e[0],payload:e[1]}}}async function Bm(r){return await new Promise(e=>{setTimeout(()=>e(null),r)})}function Vm(r,e){return new Promise((s,n)=>{(async()=>{for(let a=0;a<1/0;a++)try{const i=await r(a);if(!e(a,null,i)){s(i);return}}catch(i){if(!e(a,i)){n(i);return}}})()})}function Fm(r){return("0"+r.toString(16)).substr(-2)}function zm(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=t.length;let n="";for(let a=0;a<56;a++)n+=t.charAt(Math.floor(Math.random()*s));return n}return crypto.getRandomValues(e),Array.from(e,Fm).join("")}async function Wm(r){const t=new TextEncoder().encode(r),s=await crypto.subtle.digest("SHA-256",t),n=new Uint8Array(s);return Array.from(n).map(a=>String.fromCharCode(a)).join("")}async function qm(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const t=await Wm(r);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Nr(r,e,t=!1){const s=zm();let n=s;t&&(n+="/PASSWORD_RECOVERY"),await Tl(r,`${e}-code-verifier`,n);const a=await qm(s);return[a,s===a?"plain":"s256"]}const Hm=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Zm(r){const e=r.headers.get(xa);if(!e||!e.match(Hm))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Km(r){if(!r)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(r<=e)throw new Error("JWT has expired")}function Gm(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Jm=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Cr(r){if(!Jm.test(r))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var Ym=function(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(r);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(r,s[n])&&(t[s[n]]=r[s[n]]);return t};const lr=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),Xm=[502,503,504];async function Xi(r){var e;if(!Um(r))throw new wa(lr(r),0);if(Xm.includes(r.status))throw new wa(lr(r),r.status);let t;try{t=await r.json()}catch(a){throw new Sl(lr(a),a)}let s;const n=Zm(r);if(n&&n.getTime()>=jl["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?s=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(s=t.error_code),s){if(s==="weak_password")throw new Ki(lr(t),r.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new Ut}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((a,i)=>a&&typeof i=="string",!0))throw new Ki(lr(t),r.status,t.weak_password.reasons);throw new Sm(lr(t),r.status||500,s)}const Qm=(r,e,t,s)=>{const n={method:r,headers:e?.headers||{}};return r==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),n.body=JSON.stringify(s),Object.assign(Object.assign({},n),t))};async function ie(r,e,t,s){var n;const a=Object.assign({},s?.headers);a[xa]||(a[xa]=jl["2024-01-01"].name),s?.jwt&&(a.Authorization=`Bearer ${s.jwt}`);const i=(n=s?.query)!==null&&n!==void 0?n:{};s?.redirectTo&&(i.redirect_to=s.redirectTo);const l=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",c=await ep(r,e,t+l,{headers:a,noResolveJson:s?.noResolveJson},{},s?.body);return s?.xform?s?.xform(c):{data:Object.assign({},c),error:null}}async function ep(r,e,t,s,n,a){const i=Qm(e,s,n,a);let l;try{l=await r(t,Object.assign({},i))}catch(c){throw console.error(c),new wa(lr(c),0)}if(l.ok||await Xi(l),s?.noResolveJson)return l;try{return await l.json()}catch(c){await Xi(c)}}function Tt(r){var e;let t=null;np(r)&&(t=Object.assign({},r),r.expires_at||(t.expires_at=Mm(r.expires_in)));const s=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:t,user:s},error:null}}function Qi(r){const e=Tt(r);return!e.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((t,s)=>t&&typeof s=="string",!0)&&(e.data.weak_password=r.weak_password),e}function Ft(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function tp(r){return{data:r,error:null}}function rp(r){const{action_link:e,email_otp:t,hashed_token:s,redirect_to:n,verification_type:a}=r,i=Ym(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:t,hashed_token:s,redirect_to:n,verification_type:a},c=Object.assign({},i);return{data:{properties:l,user:c},error:null}}function sp(r){return r}function np(r){return r.access_token&&r.refresh_token&&r.expires_in}const ta=["global","local","others"];var ap=function(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(r);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(r,s[n])&&(t[s[n]]=r[s[n]]);return t};class ip{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=Cl(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=ta[0]){if(ta.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ta.join(", ")}`);try{return await ie(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(te(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await ie(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Ft})}catch(s){if(te(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=ap(e,["options"]),n=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(n.new_email=s?.newEmail,delete n.newEmail),await ie(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:rp,redirectTo:t?.redirectTo})}catch(t){if(te(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await ie(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ft})}catch(t){if(te(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,n,a,i,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await ie(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(a=(n=e?.perPage)===null||n===void 0?void 0:n.toString())!==null&&a!==void 0?a:""},xform:sp});if(u.error)throw u.error;const f=await u.json(),p=(i=u.headers.get("x-total-count"))!==null&&i!==void 0?i:0,m=(c=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(b=>{const y=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(b.split(";")[1].split("=")[1]);d[`${w}Page`]=y}),d.total=parseInt(p)),{data:Object.assign(Object.assign({},f),d),error:null}}catch(d){if(te(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){Cr(e);try{return await ie(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ft})}catch(t){if(te(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Cr(e);try{return await ie(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Ft})}catch(s){if(te(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){Cr(e);try{return await ie(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Ft})}catch(s){if(te(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){Cr(e.userId);try{const{data:t,error:s}=await ie(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:t,error:s}}catch(t){if(te(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Cr(e.userId),Cr(e.id);try{return{data:await ie(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(te(t))return{data:null,error:t};throw t}}}const op={getItem:r=>as()?globalThis.localStorage.getItem(r):null,setItem:(r,e)=>{as()&&globalThis.localStorage.setItem(r,e)},removeItem:r=>{as()&&globalThis.localStorage.removeItem(r)}};function eo(r={}){return{getItem:e=>r[e]||null,setItem:(e,t)=>{r[e]=t},removeItem:e=>{delete r[e]}}}function lp(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Tr={debug:!!(globalThis&&as()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class El extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class cp extends El{}async function dp(r,e,t){Tr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),Tr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async n=>{if(n){Tr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,n.name);try{return await t()}finally{Tr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,n.name)}}else{if(e===0)throw Tr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new cp(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(Tr.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}lp();const up={url:wm,storageKey:bm,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:_m,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function to(r,e,t){return await t()}class ds{constructor(e){var t,s;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ds.nextInstanceID,ds.nextInstanceID+=1,this.instanceID>0&&lt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},up),e);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new ip({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=Cl(n.fetch),this.lock=n.lock||to,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:lt()&&(!((t=globalThis?.navigator)===null||t===void 0)&&t.locks)?this.lock=dp:this.lock=to,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?n.storage?this.storage=n.storage:as()?this.storage=op:(this.memoryStorage={},this.storage=eo(this.memoryStorage)):(this.memoryStorage={},this.storage=eo(this.memoryStorage)),lt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${kl}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=Dm(window.location.href);let s="none";if(this._isImplicitGrantCallback(t)?s="implicit":await this._isPKCECallback(t)&&(s="pkce"),lt()&&this.detectSessionInUrl&&s!=="none"){const{data:n,error:a}=await this._getSessionFromURL(t,s);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),Tm(a)){const c=(e=a.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:i,redirectType:l}=n;return this._debug("#_initialize()","detected session in URL",i,"redirect type",l),await this._saveSession(i),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return te(t)?{error:t}:{error:new Sl("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,n;try{const a=await ie(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(t=e?.options)===null||t===void 0?void 0:t.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(n=e?.options)===null||n===void 0?void 0:n.captchaToken}},xform:Tt}),{data:i,error:l}=a;if(l||!i)return{data:{user:null,session:null},error:l};const c=i.session,d=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(a){if(te(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var t,s,n;try{let a;if("email"in e){const{email:u,password:f,options:p}=e;let m=null,b=null;this.flowType==="pkce"&&([m,b]=await Nr(this.storage,this.storageKey)),a=await ie(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p?.emailRedirectTo,body:{email:u,password:f,data:(t=p?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:p?.captchaToken},code_challenge:m,code_challenge_method:b},xform:Tt})}else if("phone"in e){const{phone:u,password:f,options:p}=e;a=await ie(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:f,data:(s=p?.data)!==null&&s!==void 0?s:{},channel:(n=p?.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:Tt})}else throw new Hs("You must provide either an email or phone number and a password");const{data:i,error:l}=a;if(l||!i)return{data:{user:null,session:null},error:l};const c=i.session,d=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(a){if(te(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let t;if("email"in e){const{email:a,password:i,options:l}=e;t=await ie(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:i,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:Qi})}else if("phone"in e){const{phone:a,password:i,options:l}=e;t=await ie(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:i,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:Qi})}else throw new Hs("You must provide either an email or phone number and a password");const{data:s,error:n}=t;return n?{data:{user:null,session:null},error:n}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new qs}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:n})}catch(t){if(te(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,s,n,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(n=e.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,s,n,a,i,l,c,d,u,f,p,m;let b,y;if("message"in e)b=e.message,y=e.signature;else{const{chain:w,wallet:k,statement:v,options:x}=e;let S;if(lt())if(typeof k=="object")S=k;else{const $=window;if("solana"in $&&typeof $.solana=="object"&&("signIn"in $.solana&&typeof $.solana.signIn=="function"||"signMessage"in $.solana&&typeof $.solana.signMessage=="function"))S=$.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof k!="object"||!x?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=k}const R=new URL((t=x?.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in S&&S.signIn){const $=await S.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},x?.signInWithSolana),{version:"1",domain:R.host,uri:R.href}),v?{statement:v}:null));let N;if(Array.isArray($)&&$[0]&&typeof $[0]=="object")N=$[0];else if($&&typeof $=="object"&&"signedMessage"in $&&"signature"in $)N=$;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in N&&"signature"in N&&(typeof N.signedMessage=="string"||N.signedMessage instanceof Uint8Array)&&N.signature instanceof Uint8Array)b=typeof N.signedMessage=="string"?N.signedMessage:new TextDecoder().decode(N.signedMessage),y=N.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in S)||typeof S.signMessage!="function"||!("publicKey"in S)||typeof S!="object"||!S.publicKey||!("toBase58"in S.publicKey)||typeof S.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");b=[`${R.host} wants you to sign in with your Solana account:`,S.publicKey.toBase58(),...v?["",v,""]:[""],"Version: 1",`URI: ${R.href}`,`Issued At: ${(n=(s=x?.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&n!==void 0?n:new Date().toISOString()}`,...!((a=x?.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${x.signInWithSolana.notBefore}`]:[],...!((i=x?.signInWithSolana)===null||i===void 0)&&i.expirationTime?[`Expiration Time: ${x.signInWithSolana.expirationTime}`]:[],...!((l=x?.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${x.signInWithSolana.chainId}`]:[],...!((c=x?.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${x.signInWithSolana.nonce}`]:[],...!((d=x?.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${x.signInWithSolana.requestId}`]:[],...!((f=(u=x?.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||f===void 0)&&f.length?["Resources",...x.signInWithSolana.resources.map(N=>`- ${N}`)]:[]].join(`
`);const $=await S.signMessage(new TextEncoder().encode(b),"utf8");if(!$||!($ instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=$}}try{const{data:w,error:k}=await ie(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:b,signature:Lm(y)},!((p=e.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Tt});if(k)throw k;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new qs}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:k})}catch(w){if(te(w))return{data:{user:null,session:null},error:w};throw w}}async _exchangeCodeForSession(e){const t=await Ks(this.storage,`${this.storageKey}-code-verifier`),[s,n]=(t??"").split("/");try{const{data:a,error:i}=await ie(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:Tt});if(await Gs(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new qs}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:n??null}),error:i})}catch(a){if(te(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:t,provider:s,token:n,access_token:a,nonce:i}=e,l=await ie(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:n,access_token:a,nonce:i,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:Tt}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new qs}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(t){if(te(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,s,n,a,i;try{if("email"in e){const{email:l,options:c}=e;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await Nr(this.storage,this.storageKey));const{error:f}=await ie(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(t=c?.data)!==null&&t!==void 0?t:{},create_user:(s=c?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c?.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:l,options:c}=e,{data:d,error:u}=await ie(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(n=c?.data)!==null&&n!==void 0?n:{},create_user:(a=c?.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},channel:(i=c?.channel)!==null&&i!==void 0?i:"sms"}});return{data:{user:null,session:null,messageId:d?.message_id},error:u}}throw new Hs("You must provide either an email or phone number.")}catch(l){if(te(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var t,s;try{let n,a;"options"in e&&(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo,a=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:i,error:l}=await ie(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:n,xform:Tt});if(l)throw l;if(!i)throw new Error("An error occurred on token verification.");const c=i.session,d=i.user;return c?.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(n){if(te(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(e){var t,s,n;try{let a=null,i=null;return this.flowType==="pkce"&&([a,i]=await Nr(this.storage,this.storageKey)),await ie(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&s!==void 0?s:void 0}),!((n=e?.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:i}),headers:this.headers,xform:tp})}catch(a){if(te(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new Ut;const{error:n}=await ie(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:n}})}catch(e){if(te(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:s,type:n,options:a}=e,{error:i}=await ie(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:n,gotrue_meta_security:{captcha_token:a?.captchaToken}},redirectTo:a?.emailRedirectTo});return{data:{user:null,session:null},error:i}}else if("phone"in e){const{phone:s,type:n,options:a}=e,{data:i,error:l}=await ie(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:n,gotrue_meta_security:{captcha_token:a?.captchaToken}}});return{data:{user:null,session:null,messageId:i?.message_id},error:l}}throw new Hs("You must provide either an email or phone number and a type")}catch(t){if(te(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await s,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=t();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Ks(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<Xn:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.storage.isServer){let i=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,d,u)=>(!i&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),i=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,u))})}return{data:{session:e},error:null}}const{session:n,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ie(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ft}):await this._useSession(async t=>{var s,n,a;const{data:i,error:l}=t;if(l)throw l;return!(!((s=i.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ut}:await ie(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0,xform:Ft})})}catch(t){if(te(t))return Cm(t)&&(await this._removeSession(),await Gs(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:n,error:a}=s;if(a)throw a;if(!n.session)throw new Ut;const i=n.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await Nr(this.storage,this.storageKey));const{data:d,error:u}=await ie(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:i.access_token,xform:Ft});if(u)throw u;return i.user=d.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(s){if(te(s))return{data:{user:null},error:s};throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ut;const t=Date.now()/1e3;let s=t,n=!0,a=null;const{payload:i}=ea(e.access_token);if(i.exp&&(s=i.exp,n=s<=t),n){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};a=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;a={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(t){if(te(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:i,error:l}=t;if(l)throw l;e=(s=i.session)!==null&&s!==void 0?s:void 0}if(!e?.refresh_token)throw new Ut;const{session:n,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(te(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!lt())throw new Zs("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Zs(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new Zi("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Zs("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Zi("No code detected.");const{data:v,error:x}=await this._exchangeCodeForSession(e.code);if(x)throw x;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:v.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:n,access_token:a,refresh_token:i,expires_in:l,expires_at:c,token_type:d}=e;if(!a||!l||!i||!d)throw new Zs("No session defined in URL");const u=Math.round(Date.now()/1e3),f=parseInt(l);let p=u+f;c&&(p=parseInt(c));const m=p-u;m*1e3<=Rr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${f}s`);const b=p-f;u-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,p,u):u-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,p,u);const{data:y,error:w}=await this._getUser(a);if(w)throw w;const k={provider_token:s,provider_refresh_token:n,access_token:a,expires_in:f,expires_at:p,refresh_token:i,token_type:d,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:k,redirectType:e.type},error:null}}catch(s){if(te(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Ks(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:n,error:a}=t;if(a)return{error:a};const i=(s=n.session)===null||s===void 0?void 0:s.access_token;if(i){const{error:l}=await this.admin.signOut(i,e);if(l&&!(Nm(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await Gs(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=$m(),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,n;try{const{data:{session:a},error:i}=t;if(i)throw i;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,t={}){let s=null,n=null;this.flowType==="pkce"&&([s,n]=await Nr(this.storage,this.storageKey,!0));try{return await ie(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:n,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(a){if(te(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(te(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:s,error:n}=await this._useSession(async a=>{var i,l,c,d,u;const{data:f,error:p}=a;if(p)throw p;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(i=e.options)===null||i===void 0?void 0:i.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await ie(this.fetch,"GET",m,{headers:this.headers,jwt:(u=(d=f.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(n)throw n;return lt()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(s?.url),{data:{provider:e.provider,url:s?.url},error:null}}catch(s){if(te(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,n;const{data:a,error:i}=t;if(i)throw i;return await ie(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(n=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&n!==void 0?n:void 0})})}catch(t){if(te(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await Vm(async n=>(n>0&&await Bm(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await ie(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Tt})),(n,a)=>{const i=200*Math.pow(2,n);return a&&Qn(a)&&Date.now()+i-s<Rr})}catch(s){if(this._debug(t,"error",s),te(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),lt()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const s=await Ks(this.storage,this.storageKey);if(this._debug(t,"session from storage",s),!this._isValidSession(s)){this._debug(t,"session is not valid"),s!==null&&await this._removeSession();return}const n=((e=s.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<Xn;if(this._debug(t,`session has${n?"":" not"} expired with margin of ${Xn}s`),n){if(this.autoRefreshToken&&s.refresh_token){const{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),Qn(a)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(t,"error",s),console.error(s);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new Ut;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new En;const{data:a,error:i}=await this._refreshAccessToken(e);if(i)throw i;if(!a.session)throw new Ut;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const l={session:a.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(a){if(this._debug(n,"error",a),te(a)){const i={session:null,error:a};return Qn(a)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(i),i}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(a),a}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,t,s=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const a=[],i=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,t)}catch(c){a.push(c)}});if(await Promise.all(i),a.length>0){for(let l=0;l<a.length;l+=1)console.error(a[l]);throw a[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Tl(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Gs(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&lt()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Rr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((s.expires_at*1e3-e)/Rr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${Rr}ms, refresh threshold is ${ya} ticks`),n<=ya&&await this._callRefreshToken(s.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof El)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!lt()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const n=[`provider=${encodeURIComponent(t)}`];if(s?.redirectTo&&n.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s?.scopes&&n.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[a,i]=await Nr(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(i)}`});n.push(l.toString())}if(s?.queryParams){const a=new URLSearchParams(s.queryParams);n.push(a.toString())}return s?.skipBrowserRedirect&&n.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:n,error:a}=t;return a?{data:null,error:a}:await ie(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=n?.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(te(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,n;const{data:a,error:i}=t;if(i)return{data:null,error:i};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:d}=await ie(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(s=a?.session)===null||s===void 0?void 0:s.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((n=c?.totp)===null||n===void 0)&&n.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(t){if(te(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:n,error:a}=t;if(a)return{data:null,error:a};const{data:i,error:l}=await ie(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=n?.session)===null||s===void 0?void 0:s.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:l})})}catch(t){if(te(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:n,error:a}=t;return a?{data:null,error:a}:await ie(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(s=n?.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(te(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const s=e?.factors||[],n=s.filter(i=>i.factor_type==="totp"&&i.status==="verified"),a=s.filter(i=>i.factor_type==="phone"&&i.status==="verified");return{data:{all:s,totp:n,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,s;const{data:{session:n},error:a}=e;if(a)return{data:null,error:a};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=ea(n.access_token);let l=null;i.aal&&(l=i.aal);let c=l;((s=(t=n.user.factors)===null||t===void 0?void 0:t.filter(f=>f.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(c="aal2");const u=i.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,t={keys:[]}){let s=t.keys.find(i=>i.kid===e);if(s||(s=this.jwks.keys.find(i=>i.kid===e),s&&this.jwks_cached_at+jm>Date.now()))return s;const{data:n,error:a}=await ie(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;if(!n.keys||n.keys.length===0)throw new ns("JWKS is empty");if(this.jwks=n,this.jwks_cached_at=Date.now(),s=n.keys.find(i=>i.kid===e),!s)throw new ns("No matching signing key found in JWKS");return s}async getClaims(e,t={keys:[]}){try{let s=e;if(!s){const{data:m,error:b}=await this.getSession();if(b||!m.session)return{data:null,error:b};s=m.session.access_token}const{header:n,payload:a,signature:i,raw:{header:l,payload:c}}=ea(s);if(Km(a.exp),!n.kid||n.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:m}=await this.getUser(s);if(m)throw m;return{data:{claims:a,header:n,signature:i},error:null}}const d=Gm(n.alg),u=await this.fetchJwk(n.kid,t),f=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,f,i,Om(`${l}.${c}`)))throw new ns("Invalid JWT signature");return{data:{claims:a,header:n,signature:i},error:null}}catch(s){if(te(s))return{data:null,error:s};throw s}}}ds.nextInstanceID=0;const hp=ds;class fp extends hp{constructor(e){super(e)}}var mp=function(r,e,t,s){function n(a){return a instanceof t?a:new t(function(i){i(a)})}return new(t||(t=Promise))(function(a,i){function l(u){try{d(s.next(u))}catch(f){i(f)}}function c(u){try{d(s.throw(u))}catch(f){i(f)}}function d(u){u.done?a(u.value):n(u.value).then(l,c)}d((s=s.apply(r,e||[])).next())})};class pp{constructor(e,t,s){var n,a,i;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const l=ym(e),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const d=`sb-${c.hostname.split(".")[0]}-auth-token`,u={db:dm,realtime:hm,auth:Object.assign(Object.assign({},um),{storageKey:d}),global:cm},f=xm(s??{},u);this.storageKey=(n=f.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(a=f.global.headers)!==null&&a!==void 0?a:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(p,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=f.auth)!==null&&i!==void 0?i:{},this.headers,f.global.fetch),this.fetch=gm(t,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new Pf(new URL("rest/v1",c).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),f.accessToken||this._listenForAuthEvents()}get functions(){return new wf(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new im(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return mp(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(t=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:n,storageKey:a,flowType:i,lock:l,debug:c},d,u){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new fp({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),d),storageKey:a,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:n,flowType:i,lock:l,debug:c,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Zf(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,s)=>{this._handleTokenChanged(t,"CLIENT",s?.access_token)})}_handleTokenChanged(e,t,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const gp=(r,e,t)=>new pp(r,e,t),vp="https://nqytxpvplhnnqfghxpqp.supabase.co",yp="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5xeXR4cHZwbGhubnFmZ2h4cHFwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTExNDAyNzIsImV4cCI6MjA2NjcxNjI3Mn0.7Fq-igiMW7iujPDy7fIyMr1oPapsdhz0BTMNdv_70xk",xe=gp(vp,yp),Ht={signUp:async(r,e,t)=>{try{const{data:s,error:n}=await xe.auth.signUp({email:r,password:e,options:{data:{nickname:t}}});return{data:s,error:n}}catch(s){return console.error("Sign up error:",s),{data:null,error:s}}},signIn:async(r,e)=>{try{await xe.auth.signOut();const{data:t,error:s}=await xe.auth.signInWithPassword({email:r,password:e});return s&&(console.error("Sign in error:",s),typeof window<"u"&&Object.keys(localStorage).forEach(a=>{a.startsWith("sb-")&&localStorage.removeItem(a)})),{data:t,error:s}}catch(t){return console.error("Sign in error:",t),{data:null,error:t}}},signOut:async()=>{try{const{error:r}=await xe.auth.signOut();return typeof window<"u"&&Object.keys(localStorage).forEach(t=>{t.startsWith("sb-")&&localStorage.removeItem(t)}),{error:r}}catch(r){return console.error("Sign out error:",r),{error:r}}},getCurrentUser:async()=>{try{const{data:r,error:e}=await xe.auth.getUser();return e&&(console.error("Get current user error:",e),typeof window<"u"&&Object.keys(localStorage).forEach(s=>{s.startsWith("sb-")&&localStorage.removeItem(s)})),{data:r,error:e}}catch(r){return console.error("Get current user error:",r),{data:{user:null},error:r}}},onAuthStateChange:r=>xe.auth.onAuthStateChange((e,t)=>{e==="SIGNED_OUT"&&t===null&&typeof window<"u"&&Object.keys(localStorage).forEach(n=>{n.startsWith("sb-")&&localStorage.removeItem(n)}),r(e,t)}),clearSession:()=>{typeof window<"u"&&Object.keys(localStorage).forEach(e=>{e.startsWith("sb-")&&(localStorage.removeItem(e),console.log("Cleared corrupted session key:",e))})}},xp=Object.freeze(Object.defineProperty({__proto__:null,auth:Ht,supabase:xe},Symbol.toStringTag,{value:"Module"})),ra={email:"enfpdevtest@gmail.com",password:"test123456"};function wp({children:r}){const{setUser:e,setLoading:t}=It();return h.useEffect(()=>{const s=async()=>{t(!0);try{const{data:{user:c},error:d}=await Ht.getCurrentUser();if(d){console.error("Error getting current user:",d),await n();return}c?await a(c):await n()}catch(c){console.error("Error getting initial session:",c),await n()}finally{t(!1)}},n=async()=>{try{console.log("🔄 기본 계정으로 자동 로그인 시도 중..."),await Ht.signOut();const{data:c,error:d}=await Ht.signIn(ra.email,ra.password);if(d){console.error("기본 계정 로그인 실패:",d),z.error("자동 로그인에 실패했습니다. 수동으로 로그인해주세요."),e(null);return}c.user&&(console.log("✅ 기본 계정으로 자동 로그인 성공"),await a(c.user),z.success(`${ra.email}로 자동 로그인되었습니다`))}catch(c){console.error("자동 로그인 중 오류:",c),e(null)}},a=async c=>{try{const{data:d,error:u}=await xe.from("users").select("*").eq("id",c.id).single();if(u){console.error("Error fetching user profile:",u),await i(c);return}d?e({id:d.id,email:d.email,nickname:d.nickname,bio:d.bio,avatar_url:d.avatar_url,points:d.points||0,trust_level:d.trust_level||0,created_at:d.created_at}):await i(c)}catch(d){console.error("Database error during profile load:",d),await i(c)}},i=async c=>{try{const d={id:c.id,email:c.email,nickname:c.user_metadata?.nickname||"TestNomad1",points:0,trust_level:0},{data:u,error:f}=await xe.from("users").insert(d).select().single();if(f){console.error("Error creating user profile:",f),e(null);return}u&&(e({id:u.id,email:u.email,nickname:u.nickname,bio:u.bio,avatar_url:u.avatar_url,points:u.points||0,trust_level:u.trust_level||0,created_at:u.created_at}),console.log("✅ 사용자 프로필 생성 완료"))}catch(d){console.error("프로필 생성 중 오류:",d),e(null)}};s();const{data:{subscription:l}}=Ht.onAuthStateChange(async(c,d)=>{console.log("Auth state changed:",c,d?.user?.id),c==="SIGNED_IN"&&d?.user?await a(d.user):c==="SIGNED_OUT"?e(null):c==="TOKEN_REFRESHED"?console.log("Token refreshed successfully"):c==="USER_UPDATED"&&console.log("User updated")});return()=>{l.unsubscribe()}},[e,t]),o.jsx(o.Fragment,{children:r})}/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bp=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Rl=(...r)=>r.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var _p={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kp=h.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:n="",children:a,iconNode:i,...l},c)=>h.createElement("svg",{ref:c,..._p,width:e,height:e,stroke:r,strokeWidth:s?Number(t)*24/Number(e):t,className:Rl("lucide",n),...l},[...i.map(([d,u])=>h.createElement(d,u)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=(r,e)=>{const t=h.forwardRef(({className:s,...n},a)=>h.createElement(kp,{ref:a,iconNode:e,className:Rl(`lucide-${bp(r)}`,s),...n}));return t.displayName=`${r}`,t};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jp=ee("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Al=ee("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=ee("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sp=ee("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Np=ee("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cp=ee("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pl=ee("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tp=ee("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Il=ee("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ol=ee("Coffee",[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ep=ee("Crosshair",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=ee("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ro=ee("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const so=ee("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rp=ee("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const za=ee("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wa=ee("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ll=ee("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ap=ee("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pp=ee("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const an=ee("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ip=ee("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ba=ee("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const on=ee("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Op=ee("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=ee("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ml=ee("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qa=ee("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ln=ee("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lp=ee("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=ee("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ys=ee("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mp=ee("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cn=ee("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $p=ee("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $l=ee("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _a=ee("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dp=ee("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Up=ee("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bp=ee("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rn=ee("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dl=ee("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ul=ee("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function q(...r){return fu(Jo(r))}const Vp=[{path:"/",icon:Ll,label:"Home"},{path:"/map",icon:Ml,label:"Map"},{path:"/profile",icon:Rn,label:"Profile"}];function Fp(){const r=yr();return o.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-card border-t border-border z-50 lg:hidden",children:o.jsx("div",{className:"flex justify-around items-center py-2 px-4 safe-area-inset-bottom max-w-md mx-auto",children:Vp.map(({path:e,icon:t,label:s})=>{const n=r.pathname===e;return o.jsxs(da,{to:e,className:q("flex flex-col items-center justify-center p-2 rounded-lg transition-colors min-w-[60px] bg-background",n?"text-primary":"text-muted-foreground hover:text-foreground"),children:[o.jsx(t,{size:24,className:q("mb-1",n&&"text-primary")}),o.jsx("span",{className:q("text-xs font-medium",n&&"text-primary"),children:s})]},e)})})})}function no({variant:r="fixed"}){const e=()=>{window.open("https://bolt.new/","_blank","noopener,noreferrer")};return r==="floating"?o.jsx("button",{onClick:e,className:"fixed bottom-24 right-4 z-50 lg:hidden group","aria-label":"Powered by Bolt.new",children:o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"w-12 h-12 bg-white rounded-full shadow-lg border border-gray-200 flex items-center justify-center group-hover:shadow-xl transition-all duration-200 group-hover:scale-105",children:o.jsx("img",{src:"/white_circle_360x360.png",alt:"Bolt.new",className:"w-8 h-8"})}),o.jsx("div",{className:"absolute bottom-full right-0 mb-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none",children:o.jsxs("div",{className:"bg-gray-900 text-white text-xs px-2 py-1 rounded whitespace-nowrap",children:["Powered by Bolt.new",o.jsx("div",{className:"absolute top-full right-2 w-0 h-0 border-l-2 border-r-2 border-t-2 border-transparent border-t-gray-900"})]})})]})}):o.jsxs("button",{onClick:e,className:"group flex items-center gap-2 px-3 py-1.5 bg-white/80 backdrop-blur-sm border border-gray-200/50 rounded-full hover:bg-white hover:border-gray-300 transition-all duration-200 hover:shadow-md","aria-label":"Powered by Bolt.new",children:[o.jsx("img",{src:"/white_circle_360x360.png",alt:"Bolt.new",className:"w-4 h-4"}),o.jsx("span",{className:"text-xs font-medium text-gray-700 hidden sm:inline",children:"Powered by Bolt"}),o.jsx(Is,{className:"w-3 h-3 text-gray-500 group-hover:text-gray-700"})]})}function zp(){return o.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[o.jsx("main",{className:"flex-1 overflow-auto pb-20 lg:pb-0",children:o.jsx("div",{className:"max-w-md mx-auto lg:max-w-4xl",children:o.jsx(uh,{})})}),o.jsx("div",{className:"lg:hidden",children:o.jsx(Fp,{})}),o.jsx(no,{variant:"floating"}),o.jsx("div",{className:"hidden lg:block fixed top-4 right-4 z-50",children:o.jsx(no,{variant:"fixed"})})]})}function ao(r,e){if(typeof r=="function")return r(e);r!=null&&(r.current=e)}function Wp(...r){return e=>{let t=!1;const s=r.map(n=>{const a=ao(n,e);return!t&&typeof a=="function"&&(t=!0),a});if(t)return()=>{for(let n=0;n<s.length;n++){const a=s[n];typeof a=="function"?a():ao(r[n],null)}}}}function Ha(r){const e=Hp(r),t=h.forwardRef((s,n)=>{const{children:a,...i}=s,l=h.Children.toArray(a),c=l.find(Kp);if(c){const d=c.props.children,u=l.map(f=>f===c?h.Children.count(d)>1?h.Children.only(null):h.isValidElement(d)?d.props.children:null:f);return o.jsx(e,{...i,ref:n,children:h.isValidElement(d)?h.cloneElement(d,void 0,u):null})}return o.jsx(e,{...i,ref:n,children:a})});return t.displayName=`${r}.Slot`,t}var qp=Ha("Slot");function Hp(r){const e=h.forwardRef((t,s)=>{const{children:n,...a}=t;if(h.isValidElement(n)){const i=Jp(n),l=Gp(a,n.props);return n.type!==h.Fragment&&(l.ref=s?Wp(s,i):i),h.cloneElement(n,l)}return h.Children.count(n)>1?h.Children.only(null):null});return e.displayName=`${r}.SlotClone`,e}var Zp=Symbol("radix.slottable");function Kp(r){return h.isValidElement(r)&&typeof r.type=="function"&&"__radixId"in r.type&&r.type.__radixId===Zp}function Gp(r,e){const t={...e};for(const s in e){const n=r[s],a=e[s];/^on[A-Z]/.test(s)?n&&a?t[s]=(...l)=>{const c=a(...l);return n(...l),c}:n&&(t[s]=n):s==="style"?t[s]={...n,...a}:s==="className"&&(t[s]=[n,a].filter(Boolean).join(" "))}return{...r,...t}}function Jp(r){let e=Object.getOwnPropertyDescriptor(r.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?r.ref:(e=Object.getOwnPropertyDescriptor(r,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?r.props.ref:r.props.ref||r.ref)}const io=r=>typeof r=="boolean"?`${r}`:r===0?"0":r,oo=Jo,Za=(r,e)=>t=>{var s;if(e?.variants==null)return oo(r,t?.class,t?.className);const{variants:n,defaultVariants:a}=e,i=Object.keys(n).map(d=>{const u=t?.[d],f=a?.[d];if(u===null)return null;const p=io(u)||io(f);return n[d][p]}),l=t&&Object.entries(t).reduce((d,u)=>{let[f,p]=u;return p===void 0||(d[f]=p),d},{}),c=e==null||(s=e.compoundVariants)===null||s===void 0?void 0:s.reduce((d,u)=>{let{class:f,className:p,...m}=u;return Object.entries(m).every(b=>{let[y,w]=b;return Array.isArray(w)?w.includes({...a,...l}[y]):{...a,...l}[y]===w})?[...d,f,p]:d},[]);return oo(r,i,c,t?.class,t?.className)},Yp=Za("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),J=h.forwardRef(({className:r,variant:e,size:t,asChild:s=!1,...n},a)=>{const i=s?qp:"button";return o.jsx(i,{className:q(Yp({variant:e,size:t,className:r})),ref:a,...n})});J.displayName="Button";const Ge=h.forwardRef(({className:r,type:e,...t},s)=>o.jsx("input",{type:e,className:q("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",r),ref:s,...t}));Ge.displayName="Input";var Ka="Avatar",[Xp,Fx]=Ts(Ka),[Qp,Bl]=Xp(Ka),Vl=h.forwardRef((r,e)=>{const{__scopeAvatar:t,...s}=r,[n,a]=h.useState("idle");return o.jsx(Qp,{scope:t,imageLoadingStatus:n,onImageLoadingStatusChange:a,children:o.jsx(je.span,{...s,ref:e})})});Vl.displayName=Ka;var Fl="AvatarImage",zl=h.forwardRef((r,e)=>{const{__scopeAvatar:t,src:s,onLoadingStatusChange:n=()=>{},...a}=r,i=Bl(Fl,t),l=eg(s,a.referrerPolicy),c=At(d=>{n(d),i.onImageLoadingStatusChange(d)});return pt(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?o.jsx(je.img,{...a,ref:e,src:s}):null});zl.displayName=Fl;var Wl="AvatarFallback",ql=h.forwardRef((r,e)=>{const{__scopeAvatar:t,delayMs:s,...n}=r,a=Bl(Wl,t),[i,l]=h.useState(s===void 0);return h.useEffect(()=>{if(s!==void 0){const c=window.setTimeout(()=>l(!0),s);return()=>window.clearTimeout(c)}},[s]),i&&a.imageLoadingStatus!=="loaded"?o.jsx(je.span,{...n,ref:e}):null});ql.displayName=Wl;function eg(r,e){const[t,s]=h.useState("idle");return pt(()=>{if(!r){s("error");return}let n=!0;const a=new window.Image,i=l=>()=>{n&&s(l)};return s("loading"),a.onload=i("loaded"),a.onerror=i("error"),a.src=r,e&&(a.referrerPolicy=e),()=>{n=!1}},[r,e]),t}var Hl=Vl,Zl=zl,Kl=ql;const hr=h.forwardRef(({className:r,...e},t)=>o.jsx(Hl,{ref:t,className:q("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",r),...e}));hr.displayName=Hl.displayName;const fr=h.forwardRef(({className:r,...e},t)=>o.jsx(Zl,{ref:t,className:q("aspect-square h-full w-full",r),...e}));fr.displayName=Zl.displayName;const mr=h.forwardRef(({className:r,...e},t)=>o.jsx(Kl,{ref:t,className:q("flex h-full w-full items-center justify-center rounded-full bg-muted",r),...e}));mr.displayName=Kl.displayName;var Os=r=>r.type==="checkbox",dr=r=>r instanceof Date,Fe=r=>r==null;const Gl=r=>typeof r=="object";var Ae=r=>!Fe(r)&&!Array.isArray(r)&&Gl(r)&&!dr(r),tg=r=>Ae(r)&&r.target?Os(r.target)?r.target.checked:r.target.value:r,rg=r=>r.substring(0,r.search(/\.\d+(\.|$)/))||r,sg=(r,e)=>r.has(rg(e)),ng=r=>{const e=r.constructor&&r.constructor.prototype;return Ae(e)&&e.hasOwnProperty("isPrototypeOf")},Ga=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function $e(r){let e;const t=Array.isArray(r),s=typeof FileList<"u"?r instanceof FileList:!1;if(r instanceof Date)e=new Date(r);else if(r instanceof Set)e=new Set(r);else if(!(Ga&&(r instanceof Blob||s))&&(t||Ae(r)))if(e=t?[]:{},!t&&!ng(r))e=r;else for(const n in r)r.hasOwnProperty(n)&&(e[n]=$e(r[n]));else return r;return e}var An=r=>/^\w*$/.test(r),Re=r=>r===void 0,Ja=r=>Array.isArray(r)?r.filter(Boolean):[],Ya=r=>Ja(r.replace(/["|']|\]/g,"").split(/\.|\[/)),F=(r,e,t)=>{if(!e||!Ae(r))return t;const s=(An(e)?[e]:Ya(e)).reduce((n,a)=>Fe(n)?n:n[a],r);return Re(s)||s===r?Re(r[e])?t:r[e]:s},xt=r=>typeof r=="boolean",ye=(r,e,t)=>{let s=-1;const n=An(e)?[e]:Ya(e),a=n.length,i=a-1;for(;++s<a;){const l=n[s];let c=t;if(s!==i){const d=r[l];c=Ae(d)||Array.isArray(d)?d:isNaN(+n[s+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;r[l]=c,r=r[l]}};const lo={BLUR:"blur",FOCUS_OUT:"focusout"},ut={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Ct={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},ag=I.createContext(null);ag.displayName="HookFormContext";var ig=(r,e,t,s=!0)=>{const n={defaultValues:e._defaultValues};for(const a in r)Object.defineProperty(n,a,{get:()=>{const i=a;return e._proxyFormState[i]!==ut.all&&(e._proxyFormState[i]=!s||ut.all),r[i]}});return n};const og=typeof window<"u"?h.useLayoutEffect:h.useEffect;var wt=r=>typeof r=="string",lg=(r,e,t,s,n)=>wt(r)?(s&&e.watch.add(r),F(t,r,n)):Array.isArray(r)?r.map(a=>(s&&e.watch.add(a),F(t,a))):(s&&(e.watchAll=!0),t),Jl=(r,e,t,s,n)=>e?{...t[r],types:{...t[r]&&t[r].types?t[r].types:{},[s]:n||!0}}:{},is=r=>Array.isArray(r)?r:[r],co=()=>{let r=[];return{get observers(){return r},next:n=>{for(const a of r)a.next&&a.next(n)},subscribe:n=>(r.push(n),{unsubscribe:()=>{r=r.filter(a=>a!==n)}}),unsubscribe:()=>{r=[]}}},ka=r=>Fe(r)||!Gl(r);function zt(r,e,t=new WeakSet){if(ka(r)||ka(e))return r===e;if(dr(r)&&dr(e))return r.getTime()===e.getTime();const s=Object.keys(r),n=Object.keys(e);if(s.length!==n.length)return!1;if(t.has(r)||t.has(e))return!0;t.add(r),t.add(e);for(const a of s){const i=r[a];if(!n.includes(a))return!1;if(a!=="ref"){const l=e[a];if(dr(i)&&dr(l)||Ae(i)&&Ae(l)||Array.isArray(i)&&Array.isArray(l)?!zt(i,l,t):i!==l)return!1}}return!0}var Ze=r=>Ae(r)&&!Object.keys(r).length,Xa=r=>r.type==="file",ht=r=>typeof r=="function",dn=r=>{if(!Ga)return!1;const e=r?r.ownerDocument:0;return r instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},Yl=r=>r.type==="select-multiple",Qa=r=>r.type==="radio",cg=r=>Qa(r)||Os(r),sa=r=>dn(r)&&r.isConnected;function dg(r,e){const t=e.slice(0,-1).length;let s=0;for(;s<t;)r=Re(r)?s++:r[e[s++]];return r}function ug(r){for(const e in r)if(r.hasOwnProperty(e)&&!Re(r[e]))return!1;return!0}function Ie(r,e){const t=Array.isArray(e)?e:An(e)?[e]:Ya(e),s=t.length===1?r:dg(r,t),n=t.length-1,a=t[n];return s&&delete s[a],n!==0&&(Ae(s)&&Ze(s)||Array.isArray(s)&&ug(s))&&Ie(r,t.slice(0,-1)),r}var Xl=r=>{for(const e in r)if(ht(r[e]))return!0;return!1};function un(r,e={}){const t=Array.isArray(r);if(Ae(r)||t)for(const s in r)Array.isArray(r[s])||Ae(r[s])&&!Xl(r[s])?(e[s]=Array.isArray(r[s])?[]:{},un(r[s],e[s])):Fe(r[s])||(e[s]=!0);return e}function Ql(r,e,t){const s=Array.isArray(r);if(Ae(r)||s)for(const n in r)Array.isArray(r[n])||Ae(r[n])&&!Xl(r[n])?Re(e)||ka(t[n])?t[n]=Array.isArray(r[n])?un(r[n],[]):{...un(r[n])}:Ql(r[n],Fe(e)?{}:e[n],t[n]):t[n]=!zt(r[n],e[n]);return t}var Gr=(r,e)=>Ql(r,e,un(e));const uo={value:!1,isValid:!1},ho={value:!0,isValid:!0};var ec=r=>{if(Array.isArray(r)){if(r.length>1){const e=r.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:e,isValid:!!e.length}}return r[0].checked&&!r[0].disabled?r[0].attributes&&!Re(r[0].attributes.value)?Re(r[0].value)||r[0].value===""?ho:{value:r[0].value,isValid:!0}:ho:uo}return uo},tc=(r,{valueAsNumber:e,valueAsDate:t,setValueAs:s})=>Re(r)?r:e?r===""?NaN:r&&+r:t&&wt(r)?new Date(r):s?s(r):r;const fo={isValid:!1,value:null};var rc=r=>Array.isArray(r)?r.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,fo):fo;function mo(r){const e=r.ref;return Xa(e)?e.files:Qa(e)?rc(r.refs).value:Yl(e)?[...e.selectedOptions].map(({value:t})=>t):Os(e)?ec(r.refs).value:tc(Re(e.value)?r.ref.value:e.value,r)}var hg=(r,e,t,s)=>{const n={};for(const a of r){const i=F(e,a);i&&ye(n,a,i._f)}return{criteriaMode:t,names:[...r],fields:n,shouldUseNativeValidation:s}},hn=r=>r instanceof RegExp,Jr=r=>Re(r)?r:hn(r)?r.source:Ae(r)?hn(r.value)?r.value.source:r.value:r,po=r=>({isOnSubmit:!r||r===ut.onSubmit,isOnBlur:r===ut.onBlur,isOnChange:r===ut.onChange,isOnAll:r===ut.all,isOnTouch:r===ut.onTouched});const go="AsyncFunction";var fg=r=>!!r&&!!r.validate&&!!(ht(r.validate)&&r.validate.constructor.name===go||Ae(r.validate)&&Object.values(r.validate).find(e=>e.constructor.name===go)),mg=r=>r.mount&&(r.required||r.min||r.max||r.maxLength||r.minLength||r.pattern||r.validate),vo=(r,e,t)=>!t&&(e.watchAll||e.watch.has(r)||[...e.watch].some(s=>r.startsWith(s)&&/^\.\w+/.test(r.slice(s.length))));const os=(r,e,t,s)=>{for(const n of t||Object.keys(r)){const a=F(r,n);if(a){const{_f:i,...l}=a;if(i){if(i.refs&&i.refs[0]&&e(i.refs[0],n)&&!s)return!0;if(i.ref&&e(i.ref,i.name)&&!s)return!0;if(os(l,e))break}else if(Ae(l)&&os(l,e))break}}};function yo(r,e,t){const s=F(r,t);if(s||An(t))return{error:s,name:t};const n=t.split(".");for(;n.length;){const a=n.join("."),i=F(e,a),l=F(r,a);if(i&&!Array.isArray(i)&&t!==a)return{name:t};if(l&&l.type)return{name:a,error:l};if(l&&l.root&&l.root.type)return{name:`${a}.root`,error:l.root};n.pop()}return{name:t}}var pg=(r,e,t,s)=>{t(r);const{name:n,...a}=r;return Ze(a)||Object.keys(a).length>=Object.keys(e).length||Object.keys(a).find(i=>e[i]===(!s||ut.all))},gg=(r,e,t)=>!r||!e||r===e||is(r).some(s=>s&&(t?s===e:s.startsWith(e)||e.startsWith(s))),vg=(r,e,t,s,n)=>n.isOnAll?!1:!t&&n.isOnTouch?!(e||r):(t?s.isOnBlur:n.isOnBlur)?!r:(t?s.isOnChange:n.isOnChange)?r:!0,yg=(r,e)=>!Ja(F(r,e)).length&&Ie(r,e),xg=(r,e,t)=>{const s=is(F(r,t));return ye(s,"root",e[t]),ye(r,t,s),r},Xs=r=>wt(r);function xo(r,e,t="validate"){if(Xs(r)||Array.isArray(r)&&r.every(Xs)||xt(r)&&!r)return{type:t,message:Xs(r)?r:"",ref:e}}var Er=r=>Ae(r)&&!hn(r)?r:{value:r,message:""},wo=async(r,e,t,s,n,a)=>{const{ref:i,refs:l,required:c,maxLength:d,minLength:u,min:f,max:p,pattern:m,validate:b,name:y,valueAsNumber:w,mount:k}=r._f,v=F(t,y);if(!k||e.has(y))return{};const x=l?l[0]:i,S=E=>{n&&x.reportValidity&&(x.setCustomValidity(xt(E)?"":E||""),x.reportValidity())},R={},$=Qa(i),N=Os(i),C=$||N,T=(w||Xa(i))&&Re(i.value)&&Re(v)||dn(i)&&i.value===""||v===""||Array.isArray(v)&&!v.length,P=Jl.bind(null,y,s,R),Z=(E,W,X,oe=Ct.maxLength,ae=Ct.minLength)=>{const me=E?W:X;R[y]={type:E?oe:ae,message:me,ref:i,...P(E?oe:ae,me)}};if(a?!Array.isArray(v)||!v.length:c&&(!C&&(T||Fe(v))||xt(v)&&!v||N&&!ec(l).isValid||$&&!rc(l).isValid)){const{value:E,message:W}=Xs(c)?{value:!!c,message:c}:Er(c);if(E&&(R[y]={type:Ct.required,message:W,ref:x,...P(Ct.required,W)},!s))return S(W),R}if(!T&&(!Fe(f)||!Fe(p))){let E,W;const X=Er(p),oe=Er(f);if(!Fe(v)&&!isNaN(v)){const ae=i.valueAsNumber||v&&+v;Fe(X.value)||(E=ae>X.value),Fe(oe.value)||(W=ae<oe.value)}else{const ae=i.valueAsDate||new Date(v),me=Ce=>new Date(new Date().toDateString()+" "+Ce),Pe=i.type=="time",K=i.type=="week";wt(X.value)&&v&&(E=Pe?me(v)>me(X.value):K?v>X.value:ae>new Date(X.value)),wt(oe.value)&&v&&(W=Pe?me(v)<me(oe.value):K?v<oe.value:ae<new Date(oe.value))}if((E||W)&&(Z(!!E,X.message,oe.message,Ct.max,Ct.min),!s))return S(R[y].message),R}if((d||u)&&!T&&(wt(v)||a&&Array.isArray(v))){const E=Er(d),W=Er(u),X=!Fe(E.value)&&v.length>+E.value,oe=!Fe(W.value)&&v.length<+W.value;if((X||oe)&&(Z(X,E.message,W.message),!s))return S(R[y].message),R}if(m&&!T&&wt(v)){const{value:E,message:W}=Er(m);if(hn(E)&&!v.match(E)&&(R[y]={type:Ct.pattern,message:W,ref:i,...P(Ct.pattern,W)},!s))return S(W),R}if(b){if(ht(b)){const E=await b(v,t),W=xo(E,x);if(W&&(R[y]={...W,...P(Ct.validate,W.message)},!s))return S(W.message),R}else if(Ae(b)){let E={};for(const W in b){if(!Ze(E)&&!s)break;const X=xo(await b[W](v,t),x,W);X&&(E={...X,...P(W,X.message)},S(X.message),s&&(R[y]=E))}if(!Ze(E)&&(R[y]={ref:x,...E},!s))return R}}return S(!0),R};const wg={mode:ut.onSubmit,reValidateMode:ut.onChange,shouldFocusError:!0};function bg(r={}){let e={...wg,...r},t={submitCount:0,isDirty:!1,isReady:!1,isLoading:ht(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1};const s={};let n=Ae(e.defaultValues)||Ae(e.values)?$e(e.defaultValues||e.values)||{}:{},a=e.shouldUnregister?{}:$e(n),i={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,d=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...u};const p={array:co(),state:co()},m=e.criteriaMode===ut.all,b=g=>_=>{clearTimeout(d),d=setTimeout(g,_)},y=async g=>{if(!e.disabled&&(u.isValid||f.isValid||g)){const _=e.resolver?Ze((await N()).errors):await T(s,!0);_!==t.isValid&&p.state.next({isValid:_})}},w=(g,_)=>{!e.disabled&&(u.isValidating||u.validatingFields||f.isValidating||f.validatingFields)&&((g||Array.from(l.mount)).forEach(j=>{j&&(_?ye(t.validatingFields,j,_):Ie(t.validatingFields,j))}),p.state.next({validatingFields:t.validatingFields,isValidating:!Ze(t.validatingFields)}))},k=(g,_=[],j,M,L=!0,O=!0)=>{if(M&&j&&!e.disabled){if(i.action=!0,O&&Array.isArray(F(s,g))){const U=j(F(s,g),M.argA,M.argB);L&&ye(s,g,U)}if(O&&Array.isArray(F(t.errors,g))){const U=j(F(t.errors,g),M.argA,M.argB);L&&ye(t.errors,g,U),yg(t.errors,g)}if((u.touchedFields||f.touchedFields)&&O&&Array.isArray(F(t.touchedFields,g))){const U=j(F(t.touchedFields,g),M.argA,M.argB);L&&ye(t.touchedFields,g,U)}(u.dirtyFields||f.dirtyFields)&&(t.dirtyFields=Gr(n,a)),p.state.next({name:g,isDirty:Z(g,_),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else ye(a,g,_)},v=(g,_)=>{ye(t.errors,g,_),p.state.next({errors:t.errors})},x=g=>{t.errors=g,p.state.next({errors:t.errors,isValid:!1})},S=(g,_,j,M)=>{const L=F(s,g);if(L){const O=F(a,g,Re(j)?F(n,g):j);Re(O)||M&&M.defaultChecked||_?ye(a,g,_?O:mo(L._f)):X(g,O),i.mount&&y()}},R=(g,_,j,M,L)=>{let O=!1,U=!1;const ne={name:g};if(!e.disabled){if(!j||M){(u.isDirty||f.isDirty)&&(U=t.isDirty,t.isDirty=ne.isDirty=Z(),O=U!==ne.isDirty);const ge=zt(F(n,g),_);U=!!F(t.dirtyFields,g),ge?Ie(t.dirtyFields,g):ye(t.dirtyFields,g,!0),ne.dirtyFields=t.dirtyFields,O=O||(u.dirtyFields||f.dirtyFields)&&U!==!ge}if(j){const ge=F(t.touchedFields,g);ge||(ye(t.touchedFields,g,j),ne.touchedFields=t.touchedFields,O=O||(u.touchedFields||f.touchedFields)&&ge!==j)}O&&L&&p.state.next(ne)}return O?ne:{}},$=(g,_,j,M)=>{const L=F(t.errors,g),O=(u.isValid||f.isValid)&&xt(_)&&t.isValid!==_;if(e.delayError&&j?(c=b(()=>v(g,j)),c(e.delayError)):(clearTimeout(d),c=null,j?ye(t.errors,g,j):Ie(t.errors,g)),(j?!zt(L,j):L)||!Ze(M)||O){const U={...M,...O&&xt(_)?{isValid:_}:{},errors:t.errors,name:g};t={...t,...U},p.state.next(U)}},N=async g=>{w(g,!0);const _=await e.resolver(a,e.context,hg(g||l.mount,s,e.criteriaMode,e.shouldUseNativeValidation));return w(g),_},C=async g=>{const{errors:_}=await N(g);if(g)for(const j of g){const M=F(_,j);M?ye(t.errors,j,M):Ie(t.errors,j)}else t.errors=_;return _},T=async(g,_,j={valid:!0})=>{for(const M in g){const L=g[M];if(L){const{_f:O,...U}=L;if(O){const ne=l.array.has(O.name),ge=L._f&&fg(L._f);ge&&u.validatingFields&&w([M],!0);const qe=await wo(L,l.disabled,a,m,e.shouldUseNativeValidation&&!_,ne);if(ge&&u.validatingFields&&w([M]),qe[O.name]&&(j.valid=!1,_))break;!_&&(F(qe,O.name)?ne?xg(t.errors,qe,O.name):ye(t.errors,O.name,qe[O.name]):Ie(t.errors,O.name))}!Ze(U)&&await T(U,_,j)}}return j.valid},P=()=>{for(const g of l.unMount){const _=F(s,g);_&&(_._f.refs?_._f.refs.every(j=>!sa(j)):!sa(_._f.ref))&&V(g)}l.unMount=new Set},Z=(g,_)=>!e.disabled&&(g&&_&&ye(a,g,_),!zt(Ce(),n)),E=(g,_,j)=>lg(g,l,{...i.mount?a:Re(_)?n:wt(g)?{[g]:_}:_},j,_),W=g=>Ja(F(i.mount?a:n,g,e.shouldUnregister?F(n,g,[]):[])),X=(g,_,j={})=>{const M=F(s,g);let L=_;if(M){const O=M._f;O&&(!O.disabled&&ye(a,g,tc(_,O)),L=dn(O.ref)&&Fe(_)?"":_,Yl(O.ref)?[...O.ref.options].forEach(U=>U.selected=L.includes(U.value)):O.refs?Os(O.ref)?O.refs.forEach(U=>{(!U.defaultChecked||!U.disabled)&&(Array.isArray(L)?U.checked=!!L.find(ne=>ne===U.value):U.checked=L===U.value||!!L)}):O.refs.forEach(U=>U.checked=U.value===L):Xa(O.ref)?O.ref.value="":(O.ref.value=L,O.ref.type||p.state.next({name:g,values:$e(a)})))}(j.shouldDirty||j.shouldTouch)&&R(g,L,j.shouldTouch,j.shouldDirty,!0),j.shouldValidate&&K(g)},oe=(g,_,j)=>{for(const M in _){if(!_.hasOwnProperty(M))return;const L=_[M],O=g+"."+M,U=F(s,O);(l.array.has(g)||Ae(L)||U&&!U._f)&&!dr(L)?oe(O,L,j):X(O,L,j)}},ae=(g,_,j={})=>{const M=F(s,g),L=l.array.has(g),O=$e(_);ye(a,g,O),L?(p.array.next({name:g,values:$e(a)}),(u.isDirty||u.dirtyFields||f.isDirty||f.dirtyFields)&&j.shouldDirty&&p.state.next({name:g,dirtyFields:Gr(n,a),isDirty:Z(g,O)})):M&&!M._f&&!Fe(O)?oe(g,O,j):X(g,O,j),vo(g,l)&&p.state.next({...t}),p.state.next({name:i.mount?g:void 0,values:$e(a)})},me=async g=>{i.mount=!0;const _=g.target;let j=_.name,M=!0;const L=F(s,j),O=ge=>{M=Number.isNaN(ge)||dr(ge)&&isNaN(ge.getTime())||zt(ge,F(a,j,ge))},U=po(e.mode),ne=po(e.reValidateMode);if(L){let ge,qe;const St=_.type?mo(L._f):tg(g),vt=g.type===lo.BLUR||g.type===lo.FOCUS_OUT,Us=!mg(L._f)&&!e.resolver&&!F(t.errors,j)&&!L._f.deps||vg(vt,F(t.touchedFields,j),t.isSubmitted,ne,U),ar=vo(j,l,vt);ye(a,j,St),vt?(L._f.onBlur&&L._f.onBlur(g),c&&c(0)):L._f.onChange&&L._f.onChange(g);const yt=R(j,St,vt),Bs=!Ze(yt)||ar;if(!vt&&p.state.next({name:j,type:g.type,values:$e(a)}),Us)return(u.isValid||f.isValid)&&(e.mode==="onBlur"?vt&&y():vt||y()),Bs&&p.state.next({name:j,...ar?{}:yt});if(!vt&&ar&&p.state.next({...t}),e.resolver){const{errors:Nt}=await N([j]);if(O(St),M){const qn=yo(t.errors,s,j),Vs=yo(Nt,s,qn.name||j);ge=Vs.error,j=Vs.name,qe=Ze(Nt)}}else w([j],!0),ge=(await wo(L,l.disabled,a,m,e.shouldUseNativeValidation))[j],w([j]),O(St),M&&(ge?qe=!1:(u.isValid||f.isValid)&&(qe=await T(s,!0)));M&&(L._f.deps&&K(L._f.deps),$(j,qe,ge,yt))}},Pe=(g,_)=>{if(F(t.errors,_)&&g.focus)return g.focus(),1},K=async(g,_={})=>{let j,M;const L=is(g);if(e.resolver){const O=await C(Re(g)?g:L);j=Ze(O),M=g?!L.some(U=>F(O,U)):j}else g?(M=(await Promise.all(L.map(async O=>{const U=F(s,O);return await T(U&&U._f?{[O]:U}:U)}))).every(Boolean),!(!M&&!t.isValid)&&y()):M=j=await T(s);return p.state.next({...!wt(g)||(u.isValid||f.isValid)&&j!==t.isValid?{}:{name:g},...e.resolver||!g?{isValid:j}:{},errors:t.errors}),_.shouldFocus&&!M&&os(s,Pe,g?L:l.mount),M},Ce=g=>{const _={...i.mount?a:n};return Re(g)?_:wt(g)?F(_,g):g.map(j=>F(_,j))},st=(g,_)=>({invalid:!!F((_||t).errors,g),isDirty:!!F((_||t).dirtyFields,g),error:F((_||t).errors,g),isValidating:!!F(t.validatingFields,g),isTouched:!!F((_||t).touchedFields,g)}),de=g=>{g&&is(g).forEach(_=>Ie(t.errors,_)),p.state.next({errors:g?t.errors:{}})},ue=(g,_,j)=>{const M=(F(s,g,{_f:{}})._f||{}).ref,L=F(t.errors,g)||{},{ref:O,message:U,type:ne,...ge}=L;ye(t.errors,g,{...ge,..._,ref:M}),p.state.next({name:g,errors:t.errors,isValid:!1}),j&&j.shouldFocus&&M&&M.focus&&M.focus()},he=(g,_)=>ht(g)?p.state.subscribe({next:j=>g(E(void 0,_),j)}):E(g,_,!0),Te=g=>p.state.subscribe({next:_=>{gg(g.name,_.name,g.exact)&&pg(_,g.formState||u,nr,g.reRenderRoot)&&g.callback({values:{...a},...t,..._})}}).unsubscribe,We=g=>(i.mount=!0,f={...f,...g.formState},Te({...g,formState:f})),V=(g,_={})=>{for(const j of g?is(g):l.mount)l.mount.delete(j),l.array.delete(j),_.keepValue||(Ie(s,j),Ie(a,j)),!_.keepError&&Ie(t.errors,j),!_.keepDirty&&Ie(t.dirtyFields,j),!_.keepTouched&&Ie(t.touchedFields,j),!_.keepIsValidating&&Ie(t.validatingFields,j),!e.shouldUnregister&&!_.keepDefaultValue&&Ie(n,j);p.state.next({values:$e(a)}),p.state.next({...t,..._.keepDirty?{isDirty:Z()}:{}}),!_.keepIsValid&&y()},we=({disabled:g,name:_})=>{(xt(g)&&i.mount||g||l.disabled.has(_))&&(g?l.disabled.add(_):l.disabled.delete(_))},Se=(g,_={})=>{let j=F(s,g);const M=xt(_.disabled)||xt(e.disabled);return ye(s,g,{...j||{},_f:{...j&&j._f?j._f:{ref:{name:g}},name:g,mount:!0,..._}}),l.mount.add(g),j?we({disabled:xt(_.disabled)?_.disabled:e.disabled,name:g}):S(g,!0,_.value),{...M?{disabled:_.disabled||e.disabled}:{},...e.progressive?{required:!!_.required,min:Jr(_.min),max:Jr(_.max),minLength:Jr(_.minLength),maxLength:Jr(_.maxLength),pattern:Jr(_.pattern)}:{},name:g,onChange:me,onBlur:me,ref:L=>{if(L){Se(g,_),j=F(s,g);const O=Re(L.value)&&L.querySelectorAll&&L.querySelectorAll("input,select,textarea")[0]||L,U=cg(O),ne=j._f.refs||[];if(U?ne.find(ge=>ge===O):O===j._f.ref)return;ye(s,g,{_f:{...j._f,...U?{refs:[...ne.filter(sa),O,...Array.isArray(F(n,g))?[{}]:[]],ref:{type:O.type,name:g}}:{ref:O}}}),S(g,!1,void 0,O)}else j=F(s,g,{}),j._f&&(j._f.mount=!1),(e.shouldUnregister||_.shouldUnregister)&&!(sg(l.array,g)&&i.action)&&l.unMount.add(g)}}},fe=()=>e.shouldFocusError&&os(s,Pe,l.mount),pe=g=>{xt(g)&&(p.state.next({disabled:g}),os(s,(_,j)=>{const M=F(s,j);M&&(_.disabled=M._f.disabled||g,Array.isArray(M._f.refs)&&M._f.refs.forEach(L=>{L.disabled=M._f.disabled||g}))},0,!1))},_e=(g,_)=>async j=>{let M;j&&(j.preventDefault&&j.preventDefault(),j.persist&&j.persist());let L=$e(a);if(p.state.next({isSubmitting:!0}),e.resolver){const{errors:O,values:U}=await N();t.errors=O,L=$e(U)}else await T(s);if(l.disabled.size)for(const O of l.disabled)Ie(L,O);if(Ie(t.errors,"root"),Ze(t.errors)){p.state.next({errors:{}});try{await g(L,j)}catch(O){M=O}}else _&&await _({...t.errors},j),fe(),setTimeout(fe);if(p.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Ze(t.errors)&&!M,submitCount:t.submitCount+1,errors:t.errors}),M)throw M},Xe=(g,_={})=>{F(s,g)&&(Re(_.defaultValue)?ae(g,$e(F(n,g))):(ae(g,_.defaultValue),ye(n,g,$e(_.defaultValue))),_.keepTouched||Ie(t.touchedFields,g),_.keepDirty||(Ie(t.dirtyFields,g),t.isDirty=_.defaultValue?Z(g,$e(F(n,g))):Z()),_.keepError||(Ie(t.errors,g),u.isValid&&y()),p.state.next({...t}))},Qe=(g,_={})=>{const j=g?$e(g):n,M=$e(j),L=Ze(g),O=L?n:M;if(_.keepDefaultValues||(n=j),!_.keepValues){if(_.keepDirtyValues){const U=new Set([...l.mount,...Object.keys(Gr(n,a))]);for(const ne of Array.from(U))F(t.dirtyFields,ne)?ye(O,ne,F(a,ne)):ae(ne,F(O,ne))}else{if(Ga&&Re(g))for(const U of l.mount){const ne=F(s,U);if(ne&&ne._f){const ge=Array.isArray(ne._f.refs)?ne._f.refs[0]:ne._f.ref;if(dn(ge)){const qe=ge.closest("form");if(qe){qe.reset();break}}}}for(const U of l.mount){const ne=F(O,U,F(n,U));Re(ne)||(ye(O,U,ne),ae(U,F(O,U)))}}a=$e(O),p.array.next({values:{...O}}),p.state.next({values:{...O}})}l={mount:_.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},i.mount=!u.isValid||!!_.keepIsValid||!!_.keepDirtyValues,i.watch=!!e.shouldUnregister,p.state.next({submitCount:_.keepSubmitCount?t.submitCount:0,isDirty:L?!1:_.keepDirty?t.isDirty:!!(_.keepDefaultValues&&!zt(g,n)),isSubmitted:_.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:L?{}:_.keepDirtyValues?_.keepDefaultValues&&a?Gr(n,a):t.dirtyFields:_.keepDefaultValues&&g?Gr(n,g):_.keepDirty?t.dirtyFields:{},touchedFields:_.keepTouched?t.touchedFields:{},errors:_.keepErrors?t.errors:{},isSubmitSuccessful:_.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1})},Ot=(g,_)=>Qe(ht(g)?g(a):g,_),Lt=(g,_={})=>{const j=F(s,g),M=j&&j._f;if(M){const L=M.refs?M.refs[0]:M.ref;L.focus&&(L.focus(),_.shouldSelect&&ht(L.select)&&L.select())}},nr=g=>{t={...t,...g}},Ds={control:{register:Se,unregister:V,getFieldState:st,handleSubmit:_e,setError:ue,_subscribe:Te,_runSchema:N,_focusError:fe,_getWatch:E,_getDirty:Z,_setValid:y,_setFieldArray:k,_setDisabledField:we,_setErrors:x,_getFieldArray:W,_reset:Qe,_resetDefaultValues:()=>ht(e.defaultValues)&&e.defaultValues().then(g=>{Ot(g,e.resetOptions),p.state.next({isLoading:!1})}),_removeUnmounted:P,_disableForm:pe,_subjects:p,_proxyFormState:u,get _fields(){return s},get _formValues(){return a},get _state(){return i},set _state(g){i=g},get _defaultValues(){return n},get _names(){return l},set _names(g){l=g},get _formState(){return t},get _options(){return e},set _options(g){e={...e,...g}}},subscribe:We,trigger:K,register:Se,handleSubmit:_e,watch:he,setValue:ae,getValues:Ce,reset:Ot,resetField:Xe,clearErrors:de,unregister:V,setError:ue,setFocus:Lt,getFieldState:st};return{...Ds,formControl:Ds}}function ja(r={}){const e=I.useRef(void 0),t=I.useRef(void 0),[s,n]=I.useState({isDirty:!1,isValidating:!1,isLoading:ht(r.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:r.errors||{},disabled:r.disabled||!1,isReady:!1,defaultValues:ht(r.defaultValues)?void 0:r.defaultValues});if(!e.current)if(r.formControl)e.current={...r.formControl,formState:s},r.defaultValues&&!ht(r.defaultValues)&&r.formControl.reset(r.defaultValues,r.resetOptions);else{const{formControl:i,...l}=bg(r);e.current={...l,formState:s}}const a=e.current.control;return a._options=r,og(()=>{const i=a._subscribe({formState:a._proxyFormState,callback:()=>n({...a._formState}),reRenderRoot:!0});return n(l=>({...l,isReady:!0})),a._formState.isReady=!0,i},[a]),I.useEffect(()=>a._disableForm(r.disabled),[a,r.disabled]),I.useEffect(()=>{r.mode&&(a._options.mode=r.mode),r.reValidateMode&&(a._options.reValidateMode=r.reValidateMode)},[a,r.mode,r.reValidateMode]),I.useEffect(()=>{r.errors&&(a._setErrors(r.errors),a._focusError())},[a,r.errors]),I.useEffect(()=>{r.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[a,r.shouldUnregister]),I.useEffect(()=>{if(a._proxyFormState.isDirty){const i=a._getDirty();i!==s.isDirty&&a._subjects.state.next({isDirty:i})}},[a,s.isDirty]),I.useEffect(()=>{r.values&&!zt(r.values,t.current)?(a._reset(r.values,a._options.resetOptions),t.current=r.values,n(i=>({...i}))):a._resetDefaultValues()},[a,r.values]),I.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),e.current.formState=ig(s,a),e.current}const bo=(r,e,t)=>{if(r&&"reportValidity"in r){const s=F(t,e);r.setCustomValidity(s&&s.message||""),r.reportValidity()}},sc=(r,e)=>{for(const t in e.fields){const s=e.fields[t];s&&s.ref&&"reportValidity"in s.ref?bo(s.ref,t,r):s.refs&&s.refs.forEach(n=>bo(n,t,r))}},_g=(r,e)=>{e.shouldUseNativeValidation&&sc(r,e);const t={};for(const s in r){const n=F(e.fields,s),a=Object.assign(r[s]||{},{ref:n&&n.ref});if(kg(e.names||Object.keys(r),s)){const i=Object.assign({},F(t,s));ye(i,"root",a),ye(t,s,i)}else ye(t,s,a)}return t},kg=(r,e)=>r.some(t=>t.startsWith(e+"."));var jg=function(r,e){for(var t={};r.length;){var s=r[0],n=s.code,a=s.message,i=s.path.join(".");if(!t[i])if("unionErrors"in s){var l=s.unionErrors[0].errors[0];t[i]={message:l.message,type:l.code}}else t[i]={message:a,type:n};if("unionErrors"in s&&s.unionErrors.forEach(function(u){return u.errors.forEach(function(f){return r.push(f)})}),e){var c=t[i].types,d=c&&c[s.code];t[i]=Jl(i,e,t,n,d?[].concat(d,s.message):s.message)}r.shift()}return t},Sa=function(r,e,t){return t===void 0&&(t={}),function(s,n,a){try{return Promise.resolve(function(i,l){try{var c=Promise.resolve(r[t.mode==="sync"?"parse":"parseAsync"](s,e)).then(function(d){return a.shouldUseNativeValidation&&sc({},a),{errors:{},values:t.raw?s:d}})}catch(d){return l(d)}return c&&c.then?c.then(void 0,l):c}(0,function(i){if(function(l){return Array.isArray(l?.errors)}(i))return{values:{},errors:_g(jg(i.errors,!a.shouldUseNativeValidation&&a.criteriaMode==="all"),a)};throw i}))}catch(i){return Promise.reject(i)}}},ce;(function(r){r.assertEqual=n=>n;function e(n){}r.assertIs=e;function t(n){throw new Error}r.assertNever=t,r.arrayToEnum=n=>{const a={};for(const i of n)a[i]=i;return a},r.getValidEnumValues=n=>{const a=r.objectKeys(n).filter(l=>typeof n[n[l]]!="number"),i={};for(const l of a)i[l]=n[l];return r.objectValues(i)},r.objectValues=n=>r.objectKeys(n).map(function(a){return n[a]}),r.objectKeys=typeof Object.keys=="function"?n=>Object.keys(n):n=>{const a=[];for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&a.push(i);return a},r.find=(n,a)=>{for(const i of n)if(a(i))return i},r.isInteger=typeof Number.isInteger=="function"?n=>Number.isInteger(n):n=>typeof n=="number"&&isFinite(n)&&Math.floor(n)===n;function s(n,a=" | "){return n.map(i=>typeof i=="string"?`'${i}'`:i).join(a)}r.joinValues=s,r.jsonStringifyReplacer=(n,a)=>typeof a=="bigint"?a.toString():a})(ce||(ce={}));var Na;(function(r){r.mergeShapes=(e,t)=>({...e,...t})})(Na||(Na={}));const B=ce.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Wt=r=>{switch(typeof r){case"undefined":return B.undefined;case"string":return B.string;case"number":return isNaN(r)?B.nan:B.number;case"boolean":return B.boolean;case"function":return B.function;case"bigint":return B.bigint;case"symbol":return B.symbol;case"object":return Array.isArray(r)?B.array:r===null?B.null:r.then&&typeof r.then=="function"&&r.catch&&typeof r.catch=="function"?B.promise:typeof Map<"u"&&r instanceof Map?B.map:typeof Set<"u"&&r instanceof Set?B.set:typeof Date<"u"&&r instanceof Date?B.date:B.object;default:return B.unknown}},A=ce.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Sg=r=>JSON.stringify(r,null,2).replace(/"([^"]+)":/g,"$1:");class Ye extends Error{constructor(e){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(a){return a.message},s={_errors:[]},n=a=>{for(const i of a.issues)if(i.code==="invalid_union")i.unionErrors.map(n);else if(i.code==="invalid_return_type")n(i.returnTypeError);else if(i.code==="invalid_arguments")n(i.argumentsError);else if(i.path.length===0)s._errors.push(t(i));else{let l=s,c=0;for(;c<i.path.length;){const d=i.path[c];c===i.path.length-1?(l[d]=l[d]||{_errors:[]},l[d]._errors.push(t(i))):l[d]=l[d]||{_errors:[]},l=l[d],c++}}};return n(this),s}static assert(e){if(!(e instanceof Ye))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,ce.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},s=[];for(const n of this.issues)n.path.length>0?(t[n.path[0]]=t[n.path[0]]||[],t[n.path[0]].push(e(n))):s.push(e(n));return{formErrors:s,fieldErrors:t}}get formErrors(){return this.flatten()}}Ye.create=r=>new Ye(r);const Dr=(r,e)=>{let t;switch(r.code){case A.invalid_type:r.received===B.undefined?t="Required":t=`Expected ${r.expected}, received ${r.received}`;break;case A.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(r.expected,ce.jsonStringifyReplacer)}`;break;case A.unrecognized_keys:t=`Unrecognized key(s) in object: ${ce.joinValues(r.keys,", ")}`;break;case A.invalid_union:t="Invalid input";break;case A.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${ce.joinValues(r.options)}`;break;case A.invalid_enum_value:t=`Invalid enum value. Expected ${ce.joinValues(r.options)}, received '${r.received}'`;break;case A.invalid_arguments:t="Invalid function arguments";break;case A.invalid_return_type:t="Invalid function return type";break;case A.invalid_date:t="Invalid date";break;case A.invalid_string:typeof r.validation=="object"?"includes"in r.validation?(t=`Invalid input: must include "${r.validation.includes}"`,typeof r.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${r.validation.position}`)):"startsWith"in r.validation?t=`Invalid input: must start with "${r.validation.startsWith}"`:"endsWith"in r.validation?t=`Invalid input: must end with "${r.validation.endsWith}"`:ce.assertNever(r.validation):r.validation!=="regex"?t=`Invalid ${r.validation}`:t="Invalid";break;case A.too_small:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at least":"more than"} ${r.minimum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at least":"over"} ${r.minimum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${r.minimum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(r.minimum))}`:t="Invalid input";break;case A.too_big:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at most":"less than"} ${r.maximum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at most":"under"} ${r.maximum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="bigint"?t=`BigInt must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly":r.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(r.maximum))}`:t="Invalid input";break;case A.custom:t="Invalid input";break;case A.invalid_intersection_types:t="Intersection results could not be merged";break;case A.not_multiple_of:t=`Number must be a multiple of ${r.multipleOf}`;break;case A.not_finite:t="Number must be finite";break;default:t=e.defaultError,ce.assertNever(r)}return{message:t}};let nc=Dr;function Ng(r){nc=r}function fn(){return nc}const mn=r=>{const{data:e,path:t,errorMaps:s,issueData:n}=r,a=[...t,...n.path||[]],i={...n,path:a};if(n.message!==void 0)return{...n,path:a,message:n.message};let l="";const c=s.filter(d=>!!d).slice().reverse();for(const d of c)l=d(i,{data:e,defaultError:l}).message;return{...n,path:a,message:l}},Cg=[];function D(r,e){const t=fn(),s=mn({issueData:e,data:r.data,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,t,t===Dr?void 0:Dr].filter(n=>!!n)});r.common.issues.push(s)}class Ve{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const s=[];for(const n of t){if(n.status==="aborted")return Y;n.status==="dirty"&&e.dirty(),s.push(n.value)}return{status:e.value,value:s}}static async mergeObjectAsync(e,t){const s=[];for(const n of t){const a=await n.key,i=await n.value;s.push({key:a,value:i})}return Ve.mergeObjectSync(e,s)}static mergeObjectSync(e,t){const s={};for(const n of t){const{key:a,value:i}=n;if(a.status==="aborted"||i.status==="aborted")return Y;a.status==="dirty"&&e.dirty(),i.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof i.value<"u"||n.alwaysSet)&&(s[a.value]=i.value)}return{status:e.value,value:s}}}const Y=Object.freeze({status:"aborted"}),Pr=r=>({status:"dirty",value:r}),ze=r=>({status:"valid",value:r}),Ca=r=>r.status==="aborted",Ta=r=>r.status==="dirty",fs=r=>r.status==="valid",ms=r=>typeof Promise<"u"&&r instanceof Promise;function pn(r,e,t,s){if(typeof e=="function"?r!==e||!0:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(r)}function ac(r,e,t,s,n){if(typeof e=="function"?r!==e||!0:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(r,t),t}var H;(function(r){r.errToObj=e=>typeof e=="string"?{message:e}:e||{},r.toString=e=>typeof e=="string"?e:e?.message})(H||(H={}));var Qr,es;class _t{constructor(e,t,s,n){this._cachedPath=[],this.parent=e,this.data=t,this._path=s,this._key=n}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const _o=(r,e)=>{if(fs(e))return{success:!0,data:e.value};if(!r.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new Ye(r.common.issues);return this._error=t,this._error}}};function re(r){if(!r)return{};const{errorMap:e,invalid_type_error:t,required_error:s,description:n}=r;if(e&&(t||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:n}:{errorMap:(i,l)=>{var c,d;const{message:u}=r;return i.code==="invalid_enum_value"?{message:u??l.defaultError}:typeof l.data>"u"?{message:(c=u??s)!==null&&c!==void 0?c:l.defaultError}:i.code!=="invalid_type"?{message:l.defaultError}:{message:(d=u??t)!==null&&d!==void 0?d:l.defaultError}},description:n}}class se{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Wt(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Wt(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Ve,ctx:{common:e.parent.common,data:e.data,parsedType:Wt(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(ms(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const s=this.safeParse(e,t);if(s.success)return s.data;throw s.error}safeParse(e,t){var s;const n={common:{issues:[],async:(s=t?.async)!==null&&s!==void 0?s:!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Wt(e)},a=this._parseSync({data:e,path:n.path,parent:n});return _o(n,a)}async parseAsync(e,t){const s=await this.safeParseAsync(e,t);if(s.success)return s.data;throw s.error}async safeParseAsync(e,t){const s={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Wt(e)},n=this._parse({data:e,path:s.path,parent:s}),a=await(ms(n)?n:Promise.resolve(n));return _o(s,a)}refine(e,t){const s=n=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(n):t;return this._refinement((n,a)=>{const i=e(n),l=()=>a.addIssue({code:A.custom,...s(n)});return typeof Promise<"u"&&i instanceof Promise?i.then(c=>c?!0:(l(),!1)):i?!0:(l(),!1)})}refinement(e,t){return this._refinement((s,n)=>e(s)?!0:(n.addIssue(typeof t=="function"?t(s,n):t),!1))}_refinement(e){return new gt({schema:this,typeName:G.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return bt.create(this,this._def)}nullable(){return Xt.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return mt.create(this,this._def)}promise(){return Br.create(this,this._def)}or(e){return ys.create([this,e],this._def)}and(e){return xs.create(this,e,this._def)}transform(e){return new gt({...re(this._def),schema:this,typeName:G.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new js({...re(this._def),innerType:this,defaultValue:t,typeName:G.ZodDefault})}brand(){return new ei({typeName:G.ZodBranded,type:this,...re(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new Ss({...re(this._def),innerType:this,catchValue:t,typeName:G.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return Ls.create(this,e)}readonly(){return Ns.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Tg=/^c[^\s-]{8,}$/i,Eg=/^[0-9a-z]+$/,Rg=/^[0-9A-HJKMNP-TV-Z]{26}$/,Ag=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Pg=/^[a-z0-9_-]{21}$/i,Ig=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Og=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Lg="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let na;const Mg=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,$g=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,Dg=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,ic="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Ug=new RegExp(`^${ic}$`);function oc(r){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return r.precision?e=`${e}\\.\\d{${r.precision}}`:r.precision==null&&(e=`${e}(\\.\\d+)?`),e}function Bg(r){return new RegExp(`^${oc(r)}$`)}function lc(r){let e=`${ic}T${oc(r)}`;const t=[];return t.push(r.local?"Z?":"Z"),r.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function Vg(r,e){return!!((e==="v4"||!e)&&Mg.test(r)||(e==="v6"||!e)&&$g.test(r))}class ft extends se{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==B.string){const a=this._getOrReturnCtx(e);return D(a,{code:A.invalid_type,expected:B.string,received:a.parsedType}),Y}const s=new Ve;let n;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(n=this._getOrReturnCtx(e,n),D(n,{code:A.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),s.dirty());else if(a.kind==="max")e.data.length>a.value&&(n=this._getOrReturnCtx(e,n),D(n,{code:A.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),s.dirty());else if(a.kind==="length"){const i=e.data.length>a.value,l=e.data.length<a.value;(i||l)&&(n=this._getOrReturnCtx(e,n),i?D(n,{code:A.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):l&&D(n,{code:A.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),s.dirty())}else if(a.kind==="email")Og.test(e.data)||(n=this._getOrReturnCtx(e,n),D(n,{validation:"email",code:A.invalid_string,message:a.message}),s.dirty());else if(a.kind==="emoji")na||(na=new RegExp(Lg,"u")),na.test(e.data)||(n=this._getOrReturnCtx(e,n),D(n,{validation:"emoji",code:A.invalid_string,message:a.message}),s.dirty());else if(a.kind==="uuid")Ag.test(e.data)||(n=this._getOrReturnCtx(e,n),D(n,{validation:"uuid",code:A.invalid_string,message:a.message}),s.dirty());else if(a.kind==="nanoid")Pg.test(e.data)||(n=this._getOrReturnCtx(e,n),D(n,{validation:"nanoid",code:A.invalid_string,message:a.message}),s.dirty());else if(a.kind==="cuid")Tg.test(e.data)||(n=this._getOrReturnCtx(e,n),D(n,{validation:"cuid",code:A.invalid_string,message:a.message}),s.dirty());else if(a.kind==="cuid2")Eg.test(e.data)||(n=this._getOrReturnCtx(e,n),D(n,{validation:"cuid2",code:A.invalid_string,message:a.message}),s.dirty());else if(a.kind==="ulid")Rg.test(e.data)||(n=this._getOrReturnCtx(e,n),D(n,{validation:"ulid",code:A.invalid_string,message:a.message}),s.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{n=this._getOrReturnCtx(e,n),D(n,{validation:"url",code:A.invalid_string,message:a.message}),s.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),D(n,{validation:"regex",code:A.invalid_string,message:a.message}),s.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(n=this._getOrReturnCtx(e,n),D(n,{code:A.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),s.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(n=this._getOrReturnCtx(e,n),D(n,{code:A.invalid_string,validation:{startsWith:a.value},message:a.message}),s.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(n=this._getOrReturnCtx(e,n),D(n,{code:A.invalid_string,validation:{endsWith:a.value},message:a.message}),s.dirty()):a.kind==="datetime"?lc(a).test(e.data)||(n=this._getOrReturnCtx(e,n),D(n,{code:A.invalid_string,validation:"datetime",message:a.message}),s.dirty()):a.kind==="date"?Ug.test(e.data)||(n=this._getOrReturnCtx(e,n),D(n,{code:A.invalid_string,validation:"date",message:a.message}),s.dirty()):a.kind==="time"?Bg(a).test(e.data)||(n=this._getOrReturnCtx(e,n),D(n,{code:A.invalid_string,validation:"time",message:a.message}),s.dirty()):a.kind==="duration"?Ig.test(e.data)||(n=this._getOrReturnCtx(e,n),D(n,{validation:"duration",code:A.invalid_string,message:a.message}),s.dirty()):a.kind==="ip"?Vg(e.data,a.version)||(n=this._getOrReturnCtx(e,n),D(n,{validation:"ip",code:A.invalid_string,message:a.message}),s.dirty()):a.kind==="base64"?Dg.test(e.data)||(n=this._getOrReturnCtx(e,n),D(n,{validation:"base64",code:A.invalid_string,message:a.message}),s.dirty()):ce.assertNever(a);return{status:s.value,value:e.data}}_regex(e,t,s){return this.refinement(n=>e.test(n),{validation:t,code:A.invalid_string,...H.errToObj(s)})}_addCheck(e){return new ft({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...H.errToObj(e)})}url(e){return this._addCheck({kind:"url",...H.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...H.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...H.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...H.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...H.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...H.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...H.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...H.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...H.errToObj(e)})}datetime(e){var t,s;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(t=e?.offset)!==null&&t!==void 0?t:!1,local:(s=e?.local)!==null&&s!==void 0?s:!1,...H.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...H.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...H.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...H.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...H.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...H.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...H.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...H.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...H.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...H.errToObj(t)})}nonempty(e){return this.min(1,H.errToObj(e))}trim(){return new ft({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ft({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ft({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}ft.create=r=>{var e;return new ft({checks:[],typeName:G.ZodString,coerce:(e=r?.coerce)!==null&&e!==void 0?e:!1,...re(r)})};function Fg(r,e){const t=(r.toString().split(".")[1]||"").length,s=(e.toString().split(".")[1]||"").length,n=t>s?t:s,a=parseInt(r.toFixed(n).replace(".","")),i=parseInt(e.toFixed(n).replace(".",""));return a%i/Math.pow(10,n)}class Gt extends se{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==B.number){const a=this._getOrReturnCtx(e);return D(a,{code:A.invalid_type,expected:B.number,received:a.parsedType}),Y}let s;const n=new Ve;for(const a of this._def.checks)a.kind==="int"?ce.isInteger(e.data)||(s=this._getOrReturnCtx(e,s),D(s,{code:A.invalid_type,expected:"integer",received:"float",message:a.message}),n.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(s=this._getOrReturnCtx(e,s),D(s,{code:A.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),n.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(s=this._getOrReturnCtx(e,s),D(s,{code:A.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),n.dirty()):a.kind==="multipleOf"?Fg(e.data,a.value)!==0&&(s=this._getOrReturnCtx(e,s),D(s,{code:A.not_multiple_of,multipleOf:a.value,message:a.message}),n.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(s=this._getOrReturnCtx(e,s),D(s,{code:A.not_finite,message:a.message}),n.dirty()):ce.assertNever(a);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,H.toString(t))}gt(e,t){return this.setLimit("min",e,!1,H.toString(t))}lte(e,t){return this.setLimit("max",e,!0,H.toString(t))}lt(e,t){return this.setLimit("max",e,!1,H.toString(t))}setLimit(e,t,s,n){return new Gt({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:H.toString(n)}]})}_addCheck(e){return new Gt({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:H.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:H.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:H.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:H.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:H.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:H.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:H.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:H.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:H.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&ce.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(t===null||s.value>t)&&(t=s.value):s.kind==="max"&&(e===null||s.value<e)&&(e=s.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Gt.create=r=>new Gt({checks:[],typeName:G.ZodNumber,coerce:r?.coerce||!1,...re(r)});class Jt extends se{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==B.bigint){const a=this._getOrReturnCtx(e);return D(a,{code:A.invalid_type,expected:B.bigint,received:a.parsedType}),Y}let s;const n=new Ve;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(s=this._getOrReturnCtx(e,s),D(s,{code:A.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),n.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(s=this._getOrReturnCtx(e,s),D(s,{code:A.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),n.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(s=this._getOrReturnCtx(e,s),D(s,{code:A.not_multiple_of,multipleOf:a.value,message:a.message}),n.dirty()):ce.assertNever(a);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,H.toString(t))}gt(e,t){return this.setLimit("min",e,!1,H.toString(t))}lte(e,t){return this.setLimit("max",e,!0,H.toString(t))}lt(e,t){return this.setLimit("max",e,!1,H.toString(t))}setLimit(e,t,s,n){return new Jt({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:H.toString(n)}]})}_addCheck(e){return new Jt({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:H.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:H.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:H.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:H.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:H.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Jt.create=r=>{var e;return new Jt({checks:[],typeName:G.ZodBigInt,coerce:(e=r?.coerce)!==null&&e!==void 0?e:!1,...re(r)})};class ps extends se{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==B.boolean){const s=this._getOrReturnCtx(e);return D(s,{code:A.invalid_type,expected:B.boolean,received:s.parsedType}),Y}return ze(e.data)}}ps.create=r=>new ps({typeName:G.ZodBoolean,coerce:r?.coerce||!1,...re(r)});class pr extends se{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==B.date){const a=this._getOrReturnCtx(e);return D(a,{code:A.invalid_type,expected:B.date,received:a.parsedType}),Y}if(isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return D(a,{code:A.invalid_date}),Y}const s=new Ve;let n;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(n=this._getOrReturnCtx(e,n),D(n,{code:A.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),s.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(n=this._getOrReturnCtx(e,n),D(n,{code:A.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),s.dirty()):ce.assertNever(a);return{status:s.value,value:new Date(e.data.getTime())}}_addCheck(e){return new pr({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:H.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:H.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}pr.create=r=>new pr({checks:[],coerce:r?.coerce||!1,typeName:G.ZodDate,...re(r)});class gn extends se{_parse(e){if(this._getType(e)!==B.symbol){const s=this._getOrReturnCtx(e);return D(s,{code:A.invalid_type,expected:B.symbol,received:s.parsedType}),Y}return ze(e.data)}}gn.create=r=>new gn({typeName:G.ZodSymbol,...re(r)});class gs extends se{_parse(e){if(this._getType(e)!==B.undefined){const s=this._getOrReturnCtx(e);return D(s,{code:A.invalid_type,expected:B.undefined,received:s.parsedType}),Y}return ze(e.data)}}gs.create=r=>new gs({typeName:G.ZodUndefined,...re(r)});class vs extends se{_parse(e){if(this._getType(e)!==B.null){const s=this._getOrReturnCtx(e);return D(s,{code:A.invalid_type,expected:B.null,received:s.parsedType}),Y}return ze(e.data)}}vs.create=r=>new vs({typeName:G.ZodNull,...re(r)});class Ur extends se{constructor(){super(...arguments),this._any=!0}_parse(e){return ze(e.data)}}Ur.create=r=>new Ur({typeName:G.ZodAny,...re(r)});class ur extends se{constructor(){super(...arguments),this._unknown=!0}_parse(e){return ze(e.data)}}ur.create=r=>new ur({typeName:G.ZodUnknown,...re(r)});class Pt extends se{_parse(e){const t=this._getOrReturnCtx(e);return D(t,{code:A.invalid_type,expected:B.never,received:t.parsedType}),Y}}Pt.create=r=>new Pt({typeName:G.ZodNever,...re(r)});class vn extends se{_parse(e){if(this._getType(e)!==B.undefined){const s=this._getOrReturnCtx(e);return D(s,{code:A.invalid_type,expected:B.void,received:s.parsedType}),Y}return ze(e.data)}}vn.create=r=>new vn({typeName:G.ZodVoid,...re(r)});class mt extends se{_parse(e){const{ctx:t,status:s}=this._processInputParams(e),n=this._def;if(t.parsedType!==B.array)return D(t,{code:A.invalid_type,expected:B.array,received:t.parsedType}),Y;if(n.exactLength!==null){const i=t.data.length>n.exactLength.value,l=t.data.length<n.exactLength.value;(i||l)&&(D(t,{code:i?A.too_big:A.too_small,minimum:l?n.exactLength.value:void 0,maximum:i?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),s.dirty())}if(n.minLength!==null&&t.data.length<n.minLength.value&&(D(t,{code:A.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),s.dirty()),n.maxLength!==null&&t.data.length>n.maxLength.value&&(D(t,{code:A.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),s.dirty()),t.common.async)return Promise.all([...t.data].map((i,l)=>n.type._parseAsync(new _t(t,i,t.path,l)))).then(i=>Ve.mergeArray(s,i));const a=[...t.data].map((i,l)=>n.type._parseSync(new _t(t,i,t.path,l)));return Ve.mergeArray(s,a)}get element(){return this._def.type}min(e,t){return new mt({...this._def,minLength:{value:e,message:H.toString(t)}})}max(e,t){return new mt({...this._def,maxLength:{value:e,message:H.toString(t)}})}length(e,t){return new mt({...this._def,exactLength:{value:e,message:H.toString(t)}})}nonempty(e){return this.min(1,e)}}mt.create=(r,e)=>new mt({type:r,minLength:null,maxLength:null,exactLength:null,typeName:G.ZodArray,...re(e)});function Ar(r){if(r instanceof Ne){const e={};for(const t in r.shape){const s=r.shape[t];e[t]=bt.create(Ar(s))}return new Ne({...r._def,shape:()=>e})}else return r instanceof mt?new mt({...r._def,type:Ar(r.element)}):r instanceof bt?bt.create(Ar(r.unwrap())):r instanceof Xt?Xt.create(Ar(r.unwrap())):r instanceof kt?kt.create(r.items.map(e=>Ar(e))):r}class Ne extends se{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=ce.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==B.object){const d=this._getOrReturnCtx(e);return D(d,{code:A.invalid_type,expected:B.object,received:d.parsedType}),Y}const{status:s,ctx:n}=this._processInputParams(e),{shape:a,keys:i}=this._getCached(),l=[];if(!(this._def.catchall instanceof Pt&&this._def.unknownKeys==="strip"))for(const d in n.data)i.includes(d)||l.push(d);const c=[];for(const d of i){const u=a[d],f=n.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new _t(n,f,n.path,d)),alwaysSet:d in n.data})}if(this._def.catchall instanceof Pt){const d=this._def.unknownKeys;if(d==="passthrough")for(const u of l)c.push({key:{status:"valid",value:u},value:{status:"valid",value:n.data[u]}});else if(d==="strict")l.length>0&&(D(n,{code:A.unrecognized_keys,keys:l}),s.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const u of l){const f=n.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new _t(n,f,n.path,u)),alwaysSet:u in n.data})}}return n.common.async?Promise.resolve().then(async()=>{const d=[];for(const u of c){const f=await u.key,p=await u.value;d.push({key:f,value:p,alwaysSet:u.alwaysSet})}return d}).then(d=>Ve.mergeObjectSync(s,d)):Ve.mergeObjectSync(s,c)}get shape(){return this._def.shape()}strict(e){return H.errToObj,new Ne({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,s)=>{var n,a,i,l;const c=(i=(a=(n=this._def).errorMap)===null||a===void 0?void 0:a.call(n,t,s).message)!==null&&i!==void 0?i:s.defaultError;return t.code==="unrecognized_keys"?{message:(l=H.errToObj(e).message)!==null&&l!==void 0?l:c}:{message:c}}}:{}})}strip(){return new Ne({...this._def,unknownKeys:"strip"})}passthrough(){return new Ne({...this._def,unknownKeys:"passthrough"})}extend(e){return new Ne({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Ne({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:G.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new Ne({...this._def,catchall:e})}pick(e){const t={};return ce.objectKeys(e).forEach(s=>{e[s]&&this.shape[s]&&(t[s]=this.shape[s])}),new Ne({...this._def,shape:()=>t})}omit(e){const t={};return ce.objectKeys(this.shape).forEach(s=>{e[s]||(t[s]=this.shape[s])}),new Ne({...this._def,shape:()=>t})}deepPartial(){return Ar(this)}partial(e){const t={};return ce.objectKeys(this.shape).forEach(s=>{const n=this.shape[s];e&&!e[s]?t[s]=n:t[s]=n.optional()}),new Ne({...this._def,shape:()=>t})}required(e){const t={};return ce.objectKeys(this.shape).forEach(s=>{if(e&&!e[s])t[s]=this.shape[s];else{let a=this.shape[s];for(;a instanceof bt;)a=a._def.innerType;t[s]=a}}),new Ne({...this._def,shape:()=>t})}keyof(){return cc(ce.objectKeys(this.shape))}}Ne.create=(r,e)=>new Ne({shape:()=>r,unknownKeys:"strip",catchall:Pt.create(),typeName:G.ZodObject,...re(e)});Ne.strictCreate=(r,e)=>new Ne({shape:()=>r,unknownKeys:"strict",catchall:Pt.create(),typeName:G.ZodObject,...re(e)});Ne.lazycreate=(r,e)=>new Ne({shape:r,unknownKeys:"strip",catchall:Pt.create(),typeName:G.ZodObject,...re(e)});class ys extends se{_parse(e){const{ctx:t}=this._processInputParams(e),s=this._def.options;function n(a){for(const l of a)if(l.result.status==="valid")return l.result;for(const l of a)if(l.result.status==="dirty")return t.common.issues.push(...l.ctx.common.issues),l.result;const i=a.map(l=>new Ye(l.ctx.common.issues));return D(t,{code:A.invalid_union,unionErrors:i}),Y}if(t.common.async)return Promise.all(s.map(async a=>{const i={...t,common:{...t.common,issues:[]},parent:null};return{result:await a._parseAsync({data:t.data,path:t.path,parent:i}),ctx:i}})).then(n);{let a;const i=[];for(const c of s){const d={...t,common:{...t.common,issues:[]},parent:null},u=c._parseSync({data:t.data,path:t.path,parent:d});if(u.status==="valid")return u;u.status==="dirty"&&!a&&(a={result:u,ctx:d}),d.common.issues.length&&i.push(d.common.issues)}if(a)return t.common.issues.push(...a.ctx.common.issues),a.result;const l=i.map(c=>new Ye(c));return D(t,{code:A.invalid_union,unionErrors:l}),Y}}get options(){return this._def.options}}ys.create=(r,e)=>new ys({options:r,typeName:G.ZodUnion,...re(e)});const Et=r=>r instanceof bs?Et(r.schema):r instanceof gt?Et(r.innerType()):r instanceof _s?[r.value]:r instanceof Yt?r.options:r instanceof ks?ce.objectValues(r.enum):r instanceof js?Et(r._def.innerType):r instanceof gs?[void 0]:r instanceof vs?[null]:r instanceof bt?[void 0,...Et(r.unwrap())]:r instanceof Xt?[null,...Et(r.unwrap())]:r instanceof ei||r instanceof Ns?Et(r.unwrap()):r instanceof Ss?Et(r._def.innerType):[];class Pn extends se{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==B.object)return D(t,{code:A.invalid_type,expected:B.object,received:t.parsedType}),Y;const s=this.discriminator,n=t.data[s],a=this.optionsMap.get(n);return a?t.common.async?a._parseAsync({data:t.data,path:t.path,parent:t}):a._parseSync({data:t.data,path:t.path,parent:t}):(D(t,{code:A.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[s]}),Y)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,s){const n=new Map;for(const a of t){const i=Et(a.shape[e]);if(!i.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const l of i){if(n.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);n.set(l,a)}}return new Pn({typeName:G.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:n,...re(s)})}}function Ea(r,e){const t=Wt(r),s=Wt(e);if(r===e)return{valid:!0,data:r};if(t===B.object&&s===B.object){const n=ce.objectKeys(e),a=ce.objectKeys(r).filter(l=>n.indexOf(l)!==-1),i={...r,...e};for(const l of a){const c=Ea(r[l],e[l]);if(!c.valid)return{valid:!1};i[l]=c.data}return{valid:!0,data:i}}else if(t===B.array&&s===B.array){if(r.length!==e.length)return{valid:!1};const n=[];for(let a=0;a<r.length;a++){const i=r[a],l=e[a],c=Ea(i,l);if(!c.valid)return{valid:!1};n.push(c.data)}return{valid:!0,data:n}}else return t===B.date&&s===B.date&&+r==+e?{valid:!0,data:r}:{valid:!1}}class xs extends se{_parse(e){const{status:t,ctx:s}=this._processInputParams(e),n=(a,i)=>{if(Ca(a)||Ca(i))return Y;const l=Ea(a.value,i.value);return l.valid?((Ta(a)||Ta(i))&&t.dirty(),{status:t.value,value:l.data}):(D(s,{code:A.invalid_intersection_types}),Y)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([a,i])=>n(a,i)):n(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}}xs.create=(r,e,t)=>new xs({left:r,right:e,typeName:G.ZodIntersection,...re(t)});class kt extends se{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==B.array)return D(s,{code:A.invalid_type,expected:B.array,received:s.parsedType}),Y;if(s.data.length<this._def.items.length)return D(s,{code:A.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Y;!this._def.rest&&s.data.length>this._def.items.length&&(D(s,{code:A.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const a=[...s.data].map((i,l)=>{const c=this._def.items[l]||this._def.rest;return c?c._parse(new _t(s,i,s.path,l)):null}).filter(i=>!!i);return s.common.async?Promise.all(a).then(i=>Ve.mergeArray(t,i)):Ve.mergeArray(t,a)}get items(){return this._def.items}rest(e){return new kt({...this._def,rest:e})}}kt.create=(r,e)=>{if(!Array.isArray(r))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new kt({items:r,typeName:G.ZodTuple,rest:null,...re(e)})};class ws extends se{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==B.object)return D(s,{code:A.invalid_type,expected:B.object,received:s.parsedType}),Y;const n=[],a=this._def.keyType,i=this._def.valueType;for(const l in s.data)n.push({key:a._parse(new _t(s,l,s.path,l)),value:i._parse(new _t(s,s.data[l],s.path,l)),alwaysSet:l in s.data});return s.common.async?Ve.mergeObjectAsync(t,n):Ve.mergeObjectSync(t,n)}get element(){return this._def.valueType}static create(e,t,s){return t instanceof se?new ws({keyType:e,valueType:t,typeName:G.ZodRecord,...re(s)}):new ws({keyType:ft.create(),valueType:e,typeName:G.ZodRecord,...re(t)})}}class yn extends se{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==B.map)return D(s,{code:A.invalid_type,expected:B.map,received:s.parsedType}),Y;const n=this._def.keyType,a=this._def.valueType,i=[...s.data.entries()].map(([l,c],d)=>({key:n._parse(new _t(s,l,s.path,[d,"key"])),value:a._parse(new _t(s,c,s.path,[d,"value"]))}));if(s.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const c of i){const d=await c.key,u=await c.value;if(d.status==="aborted"||u.status==="aborted")return Y;(d.status==="dirty"||u.status==="dirty")&&t.dirty(),l.set(d.value,u.value)}return{status:t.value,value:l}})}else{const l=new Map;for(const c of i){const d=c.key,u=c.value;if(d.status==="aborted"||u.status==="aborted")return Y;(d.status==="dirty"||u.status==="dirty")&&t.dirty(),l.set(d.value,u.value)}return{status:t.value,value:l}}}}yn.create=(r,e,t)=>new yn({valueType:e,keyType:r,typeName:G.ZodMap,...re(t)});class gr extends se{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==B.set)return D(s,{code:A.invalid_type,expected:B.set,received:s.parsedType}),Y;const n=this._def;n.minSize!==null&&s.data.size<n.minSize.value&&(D(s,{code:A.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),t.dirty()),n.maxSize!==null&&s.data.size>n.maxSize.value&&(D(s,{code:A.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),t.dirty());const a=this._def.valueType;function i(c){const d=new Set;for(const u of c){if(u.status==="aborted")return Y;u.status==="dirty"&&t.dirty(),d.add(u.value)}return{status:t.value,value:d}}const l=[...s.data.values()].map((c,d)=>a._parse(new _t(s,c,s.path,d)));return s.common.async?Promise.all(l).then(c=>i(c)):i(l)}min(e,t){return new gr({...this._def,minSize:{value:e,message:H.toString(t)}})}max(e,t){return new gr({...this._def,maxSize:{value:e,message:H.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}gr.create=(r,e)=>new gr({valueType:r,minSize:null,maxSize:null,typeName:G.ZodSet,...re(e)});class Ir extends se{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==B.function)return D(t,{code:A.invalid_type,expected:B.function,received:t.parsedType}),Y;function s(l,c){return mn({data:l,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,fn(),Dr].filter(d=>!!d),issueData:{code:A.invalid_arguments,argumentsError:c}})}function n(l,c){return mn({data:l,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,fn(),Dr].filter(d=>!!d),issueData:{code:A.invalid_return_type,returnTypeError:c}})}const a={errorMap:t.common.contextualErrorMap},i=t.data;if(this._def.returns instanceof Br){const l=this;return ze(async function(...c){const d=new Ye([]),u=await l._def.args.parseAsync(c,a).catch(m=>{throw d.addIssue(s(c,m)),d}),f=await Reflect.apply(i,this,u);return await l._def.returns._def.type.parseAsync(f,a).catch(m=>{throw d.addIssue(n(f,m)),d})})}else{const l=this;return ze(function(...c){const d=l._def.args.safeParse(c,a);if(!d.success)throw new Ye([s(c,d.error)]);const u=Reflect.apply(i,this,d.data),f=l._def.returns.safeParse(u,a);if(!f.success)throw new Ye([n(u,f.error)]);return f.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Ir({...this._def,args:kt.create(e).rest(ur.create())})}returns(e){return new Ir({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,s){return new Ir({args:e||kt.create([]).rest(ur.create()),returns:t||ur.create(),typeName:G.ZodFunction,...re(s)})}}class bs extends se{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}bs.create=(r,e)=>new bs({getter:r,typeName:G.ZodLazy,...re(e)});class _s extends se{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return D(t,{received:t.data,code:A.invalid_literal,expected:this._def.value}),Y}return{status:"valid",value:e.data}}get value(){return this._def.value}}_s.create=(r,e)=>new _s({value:r,typeName:G.ZodLiteral,...re(e)});function cc(r,e){return new Yt({values:r,typeName:G.ZodEnum,...re(e)})}class Yt extends se{constructor(){super(...arguments),Qr.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),s=this._def.values;return D(t,{expected:ce.joinValues(s),received:t.parsedType,code:A.invalid_type}),Y}if(pn(this,Qr)||ac(this,Qr,new Set(this._def.values)),!pn(this,Qr).has(e.data)){const t=this._getOrReturnCtx(e),s=this._def.values;return D(t,{received:t.data,code:A.invalid_enum_value,options:s}),Y}return ze(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Yt.create(e,{...this._def,...t})}exclude(e,t=this._def){return Yt.create(this.options.filter(s=>!e.includes(s)),{...this._def,...t})}}Qr=new WeakMap;Yt.create=cc;class ks extends se{constructor(){super(...arguments),es.set(this,void 0)}_parse(e){const t=ce.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(e);if(s.parsedType!==B.string&&s.parsedType!==B.number){const n=ce.objectValues(t);return D(s,{expected:ce.joinValues(n),received:s.parsedType,code:A.invalid_type}),Y}if(pn(this,es)||ac(this,es,new Set(ce.getValidEnumValues(this._def.values))),!pn(this,es).has(e.data)){const n=ce.objectValues(t);return D(s,{received:s.data,code:A.invalid_enum_value,options:n}),Y}return ze(e.data)}get enum(){return this._def.values}}es=new WeakMap;ks.create=(r,e)=>new ks({values:r,typeName:G.ZodNativeEnum,...re(e)});class Br extends se{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==B.promise&&t.common.async===!1)return D(t,{code:A.invalid_type,expected:B.promise,received:t.parsedType}),Y;const s=t.parsedType===B.promise?t.data:Promise.resolve(t.data);return ze(s.then(n=>this._def.type.parseAsync(n,{path:t.path,errorMap:t.common.contextualErrorMap})))}}Br.create=(r,e)=>new Br({type:r,typeName:G.ZodPromise,...re(e)});class gt extends se{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===G.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:s}=this._processInputParams(e),n=this._def.effect||null,a={addIssue:i=>{D(s,i),i.fatal?t.abort():t.dirty()},get path(){return s.path}};if(a.addIssue=a.addIssue.bind(a),n.type==="preprocess"){const i=n.transform(s.data,a);if(s.common.async)return Promise.resolve(i).then(async l=>{if(t.value==="aborted")return Y;const c=await this._def.schema._parseAsync({data:l,path:s.path,parent:s});return c.status==="aborted"?Y:c.status==="dirty"||t.value==="dirty"?Pr(c.value):c});{if(t.value==="aborted")return Y;const l=this._def.schema._parseSync({data:i,path:s.path,parent:s});return l.status==="aborted"?Y:l.status==="dirty"||t.value==="dirty"?Pr(l.value):l}}if(n.type==="refinement"){const i=l=>{const c=n.refinement(l,a);if(s.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(s.common.async===!1){const l=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return l.status==="aborted"?Y:(l.status==="dirty"&&t.dirty(),i(l.value),{status:t.value,value:l.value})}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(l=>l.status==="aborted"?Y:(l.status==="dirty"&&t.dirty(),i(l.value).then(()=>({status:t.value,value:l.value}))))}if(n.type==="transform")if(s.common.async===!1){const i=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!fs(i))return i;const l=n.transform(i.value,a);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:l}}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(i=>fs(i)?Promise.resolve(n.transform(i.value,a)).then(l=>({status:t.value,value:l})):i);ce.assertNever(n)}}gt.create=(r,e,t)=>new gt({schema:r,typeName:G.ZodEffects,effect:e,...re(t)});gt.createWithPreprocess=(r,e,t)=>new gt({schema:e,effect:{type:"preprocess",transform:r},typeName:G.ZodEffects,...re(t)});class bt extends se{_parse(e){return this._getType(e)===B.undefined?ze(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}bt.create=(r,e)=>new bt({innerType:r,typeName:G.ZodOptional,...re(e)});class Xt extends se{_parse(e){return this._getType(e)===B.null?ze(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Xt.create=(r,e)=>new Xt({innerType:r,typeName:G.ZodNullable,...re(e)});class js extends se{_parse(e){const{ctx:t}=this._processInputParams(e);let s=t.data;return t.parsedType===B.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}js.create=(r,e)=>new js({innerType:r,typeName:G.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...re(e)});class Ss extends se{_parse(e){const{ctx:t}=this._processInputParams(e),s={...t,common:{...t.common,issues:[]}},n=this._def.innerType._parse({data:s.data,path:s.path,parent:{...s}});return ms(n)?n.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Ye(s.common.issues)},input:s.data})})):{status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new Ye(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}}Ss.create=(r,e)=>new Ss({innerType:r,typeName:G.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...re(e)});class xn extends se{_parse(e){if(this._getType(e)!==B.nan){const s=this._getOrReturnCtx(e);return D(s,{code:A.invalid_type,expected:B.nan,received:s.parsedType}),Y}return{status:"valid",value:e.data}}}xn.create=r=>new xn({typeName:G.ZodNaN,...re(r)});const zg=Symbol("zod_brand");class ei extends se{_parse(e){const{ctx:t}=this._processInputParams(e),s=t.data;return this._def.type._parse({data:s,path:t.path,parent:t})}unwrap(){return this._def.type}}class Ls extends se{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return a.status==="aborted"?Y:a.status==="dirty"?(t.dirty(),Pr(a.value)):this._def.out._parseAsync({data:a.value,path:s.path,parent:s})})();{const n=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return n.status==="aborted"?Y:n.status==="dirty"?(t.dirty(),{status:"dirty",value:n.value}):this._def.out._parseSync({data:n.value,path:s.path,parent:s})}}static create(e,t){return new Ls({in:e,out:t,typeName:G.ZodPipeline})}}class Ns extends se{_parse(e){const t=this._def.innerType._parse(e),s=n=>(fs(n)&&(n.value=Object.freeze(n.value)),n);return ms(t)?t.then(n=>s(n)):s(t)}unwrap(){return this._def.innerType}}Ns.create=(r,e)=>new Ns({innerType:r,typeName:G.ZodReadonly,...re(e)});function dc(r,e={},t){return r?Ur.create().superRefine((s,n)=>{var a,i;if(!r(s)){const l=typeof e=="function"?e(s):typeof e=="string"?{message:e}:e,c=(i=(a=l.fatal)!==null&&a!==void 0?a:t)!==null&&i!==void 0?i:!0,d=typeof l=="string"?{message:l}:l;n.addIssue({code:"custom",...d,fatal:c})}}):Ur.create()}const Wg={object:Ne.lazycreate};var G;(function(r){r.ZodString="ZodString",r.ZodNumber="ZodNumber",r.ZodNaN="ZodNaN",r.ZodBigInt="ZodBigInt",r.ZodBoolean="ZodBoolean",r.ZodDate="ZodDate",r.ZodSymbol="ZodSymbol",r.ZodUndefined="ZodUndefined",r.ZodNull="ZodNull",r.ZodAny="ZodAny",r.ZodUnknown="ZodUnknown",r.ZodNever="ZodNever",r.ZodVoid="ZodVoid",r.ZodArray="ZodArray",r.ZodObject="ZodObject",r.ZodUnion="ZodUnion",r.ZodDiscriminatedUnion="ZodDiscriminatedUnion",r.ZodIntersection="ZodIntersection",r.ZodTuple="ZodTuple",r.ZodRecord="ZodRecord",r.ZodMap="ZodMap",r.ZodSet="ZodSet",r.ZodFunction="ZodFunction",r.ZodLazy="ZodLazy",r.ZodLiteral="ZodLiteral",r.ZodEnum="ZodEnum",r.ZodEffects="ZodEffects",r.ZodNativeEnum="ZodNativeEnum",r.ZodOptional="ZodOptional",r.ZodNullable="ZodNullable",r.ZodDefault="ZodDefault",r.ZodCatch="ZodCatch",r.ZodPromise="ZodPromise",r.ZodBranded="ZodBranded",r.ZodPipeline="ZodPipeline",r.ZodReadonly="ZodReadonly"})(G||(G={}));const qg=(r,e={message:`Input not instance of ${r.name}`})=>dc(t=>t instanceof r,e),uc=ft.create,hc=Gt.create,Hg=xn.create,Zg=Jt.create,fc=ps.create,Kg=pr.create,Gg=gn.create,Jg=gs.create,Yg=vs.create,Xg=Ur.create,Qg=ur.create,ev=Pt.create,tv=vn.create,rv=mt.create,sv=Ne.create,nv=Ne.strictCreate,av=ys.create,iv=Pn.create,ov=xs.create,lv=kt.create,cv=ws.create,dv=yn.create,uv=gr.create,hv=Ir.create,fv=bs.create,mv=_s.create,pv=Yt.create,gv=ks.create,vv=Br.create,ko=gt.create,yv=bt.create,xv=Xt.create,wv=gt.createWithPreprocess,bv=Ls.create,_v=()=>uc().optional(),kv=()=>hc().optional(),jv=()=>fc().optional(),Sv={string:r=>ft.create({...r,coerce:!0}),number:r=>Gt.create({...r,coerce:!0}),boolean:r=>ps.create({...r,coerce:!0}),bigint:r=>Jt.create({...r,coerce:!0}),date:r=>pr.create({...r,coerce:!0})},Nv=Y;var Je=Object.freeze({__proto__:null,defaultErrorMap:Dr,setErrorMap:Ng,getErrorMap:fn,makeIssue:mn,EMPTY_PATH:Cg,addIssueToContext:D,ParseStatus:Ve,INVALID:Y,DIRTY:Pr,OK:ze,isAborted:Ca,isDirty:Ta,isValid:fs,isAsync:ms,get util(){return ce},get objectUtil(){return Na},ZodParsedType:B,getParsedType:Wt,ZodType:se,datetimeRegex:lc,ZodString:ft,ZodNumber:Gt,ZodBigInt:Jt,ZodBoolean:ps,ZodDate:pr,ZodSymbol:gn,ZodUndefined:gs,ZodNull:vs,ZodAny:Ur,ZodUnknown:ur,ZodNever:Pt,ZodVoid:vn,ZodArray:mt,ZodObject:Ne,ZodUnion:ys,ZodDiscriminatedUnion:Pn,ZodIntersection:xs,ZodTuple:kt,ZodRecord:ws,ZodMap:yn,ZodSet:gr,ZodFunction:Ir,ZodLazy:bs,ZodLiteral:_s,ZodEnum:Yt,ZodNativeEnum:ks,ZodPromise:Br,ZodEffects:gt,ZodTransformer:gt,ZodOptional:bt,ZodNullable:Xt,ZodDefault:js,ZodCatch:Ss,ZodNaN:xn,BRAND:zg,ZodBranded:ei,ZodPipeline:Ls,ZodReadonly:Ns,custom:dc,Schema:se,ZodSchema:se,late:Wg,get ZodFirstPartyTypeKind(){return G},coerce:Sv,any:Xg,array:rv,bigint:Zg,boolean:fc,date:Kg,discriminatedUnion:iv,effect:ko,enum:pv,function:hv,instanceof:qg,intersection:ov,lazy:fv,literal:mv,map:dv,nan:Hg,nativeEnum:gv,never:ev,null:Yg,nullable:xv,number:hc,object:sv,oboolean:jv,onumber:kv,optional:yv,ostring:_v,pipeline:bv,preprocess:wv,promise:vv,record:cv,set:uv,strictObject:nv,string:uc,symbol:Gg,transformer:ko,tuple:lv,undefined:Jg,union:av,unknown:Qg,void:tv,NEVER:Nv,ZodIssueCode:A,quotelessJson:Sg,ZodError:Ye});function In(r,e){if(r==null)return{};var t={},s=Object.keys(r),n,a;for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&(t[n]=r[n]);return t}var Cv=["color"],Tv=h.forwardRef(function(r,e){var t=r.color,s=t===void 0?"currentColor":t,n=In(r,Cv);return h.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n,{ref:e}),h.createElement("path",{d:"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),Ev=["color"],Rv=h.forwardRef(function(r,e){var t=r.color,s=t===void 0?"currentColor":t,n=In(r,Ev);return h.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n,{ref:e}),h.createElement("path",{d:"M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),Av=["color"],Pv=h.forwardRef(function(r,e){var t=r.color,s=t===void 0?"currentColor":t,n=In(r,Av);return h.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n,{ref:e}),h.createElement("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),Iv=["color"],Ov=h.forwardRef(function(r,e){var t=r.color,s=t===void 0?"currentColor":t,n=In(r,Iv);return h.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n,{ref:e}),h.createElement("path",{d:"M9.875 7.5C9.875 8.81168 8.81168 9.875 7.5 9.875C6.18832 9.875 5.125 8.81168 5.125 7.5C5.125 6.18832 6.18832 5.125 7.5 5.125C8.81168 5.125 9.875 6.18832 9.875 7.5Z",fill:s}))});const ti=Yd,Lv=Gd,mc=h.forwardRef(({className:r,...e},t)=>o.jsx(Co,{ref:t,className:q("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...e}));mc.displayName=Co.displayName;const On=h.forwardRef(({className:r,children:e,...t},s)=>o.jsxs(Lv,{children:[o.jsx(mc,{}),o.jsxs(To,{ref:s,className:q("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...t,children:[e,o.jsxs(Jd,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[o.jsx(Pv,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));On.displayName=To.displayName;const Ln=({className:r,...e})=>o.jsx("div",{className:q("flex flex-col space-y-1.5 text-center sm:text-left",r),...e});Ln.displayName="DialogHeader";const Mn=h.forwardRef(({className:r,...e},t)=>o.jsx(Eo,{ref:t,className:q("text-lg font-semibold leading-none tracking-tight",r),...e}));Mn.displayName=Eo.displayName;const ri=h.forwardRef(({className:r,...e},t)=>o.jsx(Ro,{ref:t,className:q("text-sm text-muted-foreground",r),...e}));ri.displayName=Ro.displayName;var Mv=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],$v=Mv.reduce((r,e)=>{const t=Ha(`Primitive.${e}`),s=h.forwardRef((n,a)=>{const{asChild:i,...l}=n,c=i?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(c,{...l,ref:a})});return s.displayName=`Primitive.${e}`,{...r,[e]:s}},{}),Dv="Label",pc=h.forwardRef((r,e)=>o.jsx($v.label,{...r,ref:e,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(r.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));pc.displayName=Dv;var gc=pc;const Uv=Za("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Be=h.forwardRef(({className:r,...e},t)=>o.jsx(gc,{ref:t,className:q(Uv(),r),...e}));Be.displayName=gc.displayName;const vc=Xd,si=h.forwardRef(({className:r,...e},t)=>o.jsx(Ao,{ref:t,className:q("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",r),...e}));si.displayName=Ao.displayName;const Or=h.forwardRef(({className:r,...e},t)=>o.jsx(Po,{ref:t,className:q("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",r),...e}));Or.displayName=Po.displayName;const Lr=h.forwardRef(({className:r,...e},t)=>o.jsx(Io,{ref:t,className:q("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r),...e}));Lr.displayName=Io.displayName;const Bv=Je.object({email:Je.string().email("Invalid email address"),password:Je.string().min(6,"Password must be at least 6 characters")}),Vv=Je.object({email:Je.string().email("Invalid email address"),password:Je.string().min(6,"Password must be at least 6 characters"),confirmPassword:Je.string(),nickname:Je.string().min(2,"Nickname must be at least 2 characters")}).refine(r=>r.password===r.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});function $n({open:r,onOpenChange:e}){const[t,s]=h.useState("signin"),[n,a]=h.useState(!1),[i,l]=h.useState(!1),[c,d]=h.useState(null),{setLoading:u}=It(),f=ja({resolver:Sa(Bv),defaultValues:{email:"enfpdevtest@gmail.com",password:"test123456"}}),p=ja({resolver:Sa(Vv),defaultValues:{email:"",password:"",confirmPassword:"",nickname:""}}),m=async()=>{Ht.clearSession(),d(null),z.info("Session cleared. Please try signing in again.")},b=async k=>{l(!0),u(!0),d(null);try{const{error:v}=await Ht.signIn(k.email,k.password);if(v){console.error("Sign in error:",v),v.message.includes("Invalid login credentials")?(d("Invalid email or password. Please check your credentials and try again."),z.error("Invalid email or password")):v.message.includes("Email not confirmed")?(d("Please check your email and click the confirmation link before signing in."),z.error("Email not confirmed")):(d(v.message),z.error(v.message));return}z.success("Welcome back!"),e(!1),f.reset(),d(null)}catch(v){console.error("Unexpected sign in error:",v),d("An unexpected error occurred. Please try again."),z.error("An unexpected error occurred")}finally{l(!1),u(!1)}},y=async k=>{l(!0),u(!0),d(null);try{const{error:v}=await Ht.signUp(k.email,k.password,k.nickname);if(v){console.error("Sign up error:",v),v.message.includes("already registered")?(d("This email is already registered. Please sign in instead."),z.error("Email already registered")):(d(v.message),z.error(v.message));return}z.success("Account created! Please check your email to verify your account."),e(!1),p.reset(),d(null)}catch(v){console.error("Unexpected sign up error:",v),d("An unexpected error occurred. Please try again."),z.error("An unexpected error occurred")}finally{l(!1),u(!1)}},w=k=>{s(k),d(null)};return o.jsx(ti,{open:r,onOpenChange:e,children:o.jsxs(On,{className:"sm:max-w-md",children:[o.jsxs(Ln,{children:[o.jsx(Mn,{children:"Welcome to Nomading Now"}),o.jsx(ri,{children:"Sign in to your account or create a new one to start sharing tips."})]}),c&&o.jsx("div",{className:"bg-destructive/10 border border-destructive/20 rounded-md p-3",children:o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(Il,{className:"w-4 h-4 text-destructive mt-0.5 flex-shrink-0"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"text-sm text-destructive",children:c}),c.includes("Invalid login credentials")&&o.jsx(J,{variant:"link",size:"sm",onClick:m,className:"h-auto p-0 mt-1 text-destructive underline",children:"Clear session and try again"})]})]})}),o.jsxs(vc,{value:t,onValueChange:w,children:[o.jsxs(si,{className:"grid w-full grid-cols-2",children:[o.jsx(Or,{value:"signin",children:"Sign In"}),o.jsx(Or,{value:"signup",children:"Sign Up"})]}),o.jsxs(Lr,{value:"signin",className:"space-y-4",children:[o.jsx("div",{className:"bg-green-50 border border-green-200 rounded-md p-3",children:o.jsxs("p",{className:"text-sm text-green-800",children:[o.jsx("strong",{children:"자동 로그인:"})," 앱 시작시 자동으로 enfpdevtest@gmail.com 계정으로 로그인됩니다"]})}),o.jsxs("form",{onSubmit:f.handleSubmit(b),className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Be,{htmlFor:"signin-email",children:"Email"}),o.jsx(Ge,{id:"signin-email",type:"email",placeholder:"Enter your email",...f.register("email")}),f.formState.errors.email&&o.jsx("p",{className:"text-sm text-destructive",children:f.formState.errors.email.message})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Be,{htmlFor:"signin-password",children:"Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(Ge,{id:"signin-password",type:n?"text":"password",placeholder:"Enter your password",...f.register("password")}),o.jsx(J,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>a(!n),children:n?o.jsx(ro,{className:"h-4 w-4"}):o.jsx(so,{className:"h-4 w-4"})})]}),f.formState.errors.password&&o.jsx("p",{className:"text-sm text-destructive",children:f.formState.errors.password.message})]}),o.jsxs(J,{type:"submit",className:"w-full",disabled:i,children:[i&&o.jsx(ba,{className:"mr-2 h-4 w-4 animate-spin"}),"Sign In"]})]})]}),o.jsx(Lr,{value:"signup",className:"space-y-4",children:o.jsxs("form",{onSubmit:p.handleSubmit(y),className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Be,{htmlFor:"signup-nickname",children:"Nickname"}),o.jsx(Ge,{id:"signup-nickname",type:"text",placeholder:"Choose a nickname",...p.register("nickname")}),p.formState.errors.nickname&&o.jsx("p",{className:"text-sm text-destructive",children:p.formState.errors.nickname.message})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Be,{htmlFor:"signup-email",children:"Email"}),o.jsx(Ge,{id:"signup-email",type:"email",placeholder:"Enter your email",...p.register("email")}),p.formState.errors.email&&o.jsx("p",{className:"text-sm text-destructive",children:p.formState.errors.email.message})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Be,{htmlFor:"signup-password",children:"Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(Ge,{id:"signup-password",type:n?"text":"password",placeholder:"Create a password",...p.register("password")}),o.jsx(J,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>a(!n),children:n?o.jsx(ro,{className:"h-4 w-4"}):o.jsx(so,{className:"h-4 w-4"})})]}),p.formState.errors.password&&o.jsx("p",{className:"text-sm text-destructive",children:p.formState.errors.password.message})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Be,{htmlFor:"signup-confirm-password",children:"Confirm Password"}),o.jsx(Ge,{id:"signup-confirm-password",type:n?"text":"password",placeholder:"Confirm your password",...p.register("confirmPassword")}),p.formState.errors.confirmPassword&&o.jsx("p",{className:"text-sm text-destructive",children:p.formState.errors.confirmPassword.message})]}),o.jsxs(J,{type:"submit",className:"w-full",disabled:i,children:[i&&o.jsx(ba,{className:"mr-2 h-4 w-4 animate-spin"}),"Create Account"]})]})})]})]})})}const Fv=[{path:"/",icon:Ll,label:"Home"},{path:"/map",icon:Ml,label:"Map"},{path:"/profile",icon:Rn,label:"Profile"}];function zv(){const r=yr(),{user:e}=It(),[t,s]=h.useState(!1);return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"hidden lg:flex lg:w-64 lg:flex-col lg:fixed lg:inset-y-0",children:o.jsxs("div",{className:"flex flex-col flex-grow bg-card border-r border-border pt-5 pb-4 overflow-y-auto",children:[o.jsx("div",{className:"flex items-center flex-shrink-0 px-4",children:o.jsx("h1",{className:"text-xl font-bold text-foreground",children:"Nomading Now"})}),o.jsxs("div",{className:"mt-5 flex-grow flex flex-col",children:[o.jsx("nav",{className:"flex-1 px-2 space-y-1",children:Fv.map(({path:n,icon:a,label:i})=>{const l=r.pathname===n;return o.jsxs(da,{to:n,className:q("group flex items-center px-2 py-2 text-sm font-medium rounded-md transition-colors",l?"bg-primary/10 text-primary":"text-muted-foreground hover:bg-muted hover:text-foreground"),children:[o.jsx(a,{className:q("mr-3 flex-shrink-0 h-6 w-6",l?"text-primary":"text-muted-foreground group-hover:text-foreground")}),i]},n)})}),o.jsxs("div",{className:"flex-shrink-0 px-2 space-y-3",children:[o.jsxs("div",{className:"relative",children:[o.jsx(cn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),o.jsx(Ge,{placeholder:"Search tips...",className:"pl-10"})]}),e?o.jsxs(J,{className:"w-full bg-primary hover:bg-primary/90 text-primary-foreground",children:[o.jsx(Kt,{className:"w-4 h-4 mr-2"}),"Write Tip"]}):o.jsxs(J,{onClick:()=>s(!0),variant:"outline",className:"w-full",children:[o.jsx(on,{className:"w-4 h-4 mr-2"}),"Sign In"]}),e&&o.jsx("div",{className:"border-t border-border pt-3",children:o.jsxs(da,{to:"/profile",className:"flex items-center gap-3 p-2 rounded-md hover:bg-muted transition-colors",children:[o.jsxs(hr,{className:"w-8 h-8",children:[o.jsx(fr,{src:e.avatar_url,alt:e.nickname}),o.jsx(mr,{className:"bg-primary/10 text-primary text-xs",children:e.nickname.charAt(0).toUpperCase()})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm font-medium text-foreground truncate",children:e.nickname}),o.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.points," points"]})]})]})})]})]})]})}),o.jsx($n,{open:t,onOpenChange:s})]})}const Dn=[{id:"food",emoji:"🍽️",label:"Food",color:"bg-red-100 text-red-700"},{id:"cafe",emoji:"☕",label:"Cafe",color:"bg-amber-100 text-amber-700"},{id:"accommodation",emoji:"🏠",label:"Stay",color:"bg-blue-100 text-blue-700"},{id:"workspace",emoji:"💻",label:"Work",color:"bg-purple-100 text-purple-700"},{id:"exercise",emoji:"🏃‍♂️",label:"Fitness",color:"bg-green-100 text-green-700"},{id:"entertainment",emoji:"🎉",label:"Fun",color:"bg-pink-100 text-pink-700"},{id:"transport",emoji:"🚗",label:"Transport",color:"bg-cyan-100 text-cyan-700"},{id:"shopping",emoji:"🛍️",label:"Shopping",color:"bg-orange-100 text-orange-700"},{id:"nature",emoji:"🌿",label:"Nature",color:"bg-emerald-100 text-emerald-700"},{id:"other",emoji:"📍",label:"Other",color:"bg-gray-100 text-gray-700"}],et=h.forwardRef(({className:r,...e},t)=>o.jsx("div",{ref:t,className:q("rounded-xl border bg-card text-card-foreground shadow",r),...e}));et.displayName="Card";const yc=h.forwardRef(({className:r,...e},t)=>o.jsx("div",{ref:t,className:q("flex flex-col space-y-1.5 p-6",r),...e}));yc.displayName="CardHeader";const xc=h.forwardRef(({className:r,...e},t)=>o.jsx("h3",{ref:t,className:q("font-semibold leading-none tracking-tight",r),...e}));xc.displayName="CardTitle";const Wv=h.forwardRef(({className:r,...e},t)=>o.jsx("p",{ref:t,className:q("text-sm text-muted-foreground",r),...e}));Wv.displayName="CardDescription";const tt=h.forwardRef(({className:r,...e},t)=>o.jsx("div",{ref:t,className:q("p-6 pt-0",r),...e}));tt.displayName="CardContent";const qv=h.forwardRef(({className:r,...e},t)=>o.jsx("div",{ref:t,className:q("flex items-center p-6 pt-0",r),...e}));qv.displayName="CardFooter";const Hv=Za("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Vr({className:r,variant:e,...t}){return o.jsx("div",{className:q(Hv({variant:e}),r),...t})}var Zv=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Kv=Zv.reduce((r,e)=>{const t=Ha(`Primitive.${e}`),s=h.forwardRef((n,a)=>{const{asChild:i,...l}=n,c=i?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(c,{...l,ref:a})});return s.displayName=`Primitive.${e}`,{...r,[e]:s}},{}),Gv="Separator",jo="horizontal",Jv=["horizontal","vertical"],wc=h.forwardRef((r,e)=>{const{decorative:t,orientation:s=jo,...n}=r,a=Yv(s)?s:jo,l=t?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return o.jsx(Kv.div,{"data-orientation":a,...l,...n,ref:e})});wc.displayName=Gv;function Yv(r){return Jv.includes(r)}var bc=wc;const _c=h.forwardRef(({className:r,orientation:e="horizontal",decorative:t=!0,...s},n)=>o.jsx(bc,{ref:n,decorative:t,orientation:e,className:q("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",r),...s}));_c.displayName=bc.displayName;var aa,ni="HoverCard",[kc,zx]=Ts(ni,[Sn]),Un=Sn(),[Xv,ai]=kc(ni),jc=r=>{const{__scopeHoverCard:e,children:t,open:s,defaultOpen:n,onOpenChange:a,openDelay:i=700,closeDelay:l=300}=r,c=Un(e),d=h.useRef(0),u=h.useRef(0),f=h.useRef(!1),p=h.useRef(!1),[m=!1,b]=en({prop:s,defaultProp:n,onChange:a}),y=h.useCallback(()=>{clearTimeout(u.current),d.current=window.setTimeout(()=>b(!0),i)},[i,b]),w=h.useCallback(()=>{clearTimeout(d.current),!f.current&&!p.current&&(u.current=window.setTimeout(()=>b(!1),l))},[l,b]),k=h.useCallback(()=>b(!1),[b]);return h.useEffect(()=>()=>{clearTimeout(d.current),clearTimeout(u.current)},[]),o.jsx(Xv,{scope:e,open:m,onOpenChange:b,onOpen:y,onClose:w,onDismiss:k,hasSelectionRef:f,isPointerDownOnContentRef:p,children:o.jsx(Mo,{...c,children:t})})};jc.displayName=ni;var Sc="HoverCardTrigger",Nc=h.forwardRef((r,e)=>{const{__scopeHoverCard:t,...s}=r,n=ai(Sc,t),a=Un(t);return o.jsx($o,{asChild:!0,...a,children:o.jsx(je.a,{"data-state":n.open?"open":"closed",...s,ref:e,onPointerEnter:le(r.onPointerEnter,bn(n.onOpen)),onPointerLeave:le(r.onPointerLeave,bn(n.onClose)),onFocus:le(r.onFocus,n.onOpen),onBlur:le(r.onBlur,n.onClose),onTouchStart:le(r.onTouchStart,i=>i.preventDefault())})})});Nc.displayName=Sc;var Qv="HoverCardPortal",[Wx,ey]=kc(Qv,{forceMount:void 0}),wn="HoverCardContent",Cc=h.forwardRef((r,e)=>{const t=ey(wn,r.__scopeHoverCard),{forceMount:s=t.forceMount,...n}=r,a=ai(wn,r.__scopeHoverCard);return o.jsx(Es,{present:s||a.open,children:o.jsx(ty,{"data-state":a.open?"open":"closed",...n,onPointerEnter:le(r.onPointerEnter,bn(a.onOpen)),onPointerLeave:le(r.onPointerLeave,bn(a.onClose)),ref:e})})});Cc.displayName=wn;var ty=h.forwardRef((r,e)=>{const{__scopeHoverCard:t,onEscapeKeyDown:s,onPointerDownOutside:n,onFocusOutside:a,onInteractOutside:i,...l}=r,c=ai(wn,t),d=Un(t),u=h.useRef(null),f=Me(e,u),[p,m]=h.useState(!1);return h.useEffect(()=>{if(p){const b=document.body;return aa=b.style.userSelect||b.style.webkitUserSelect,b.style.userSelect="none",b.style.webkitUserSelect="none",()=>{b.style.userSelect=aa,b.style.webkitUserSelect=aa}}},[p]),h.useEffect(()=>{if(u.current){const b=()=>{m(!1),c.isPointerDownOnContentRef.current=!1,setTimeout(()=>{document.getSelection()?.toString()!==""&&(c.hasSelectionRef.current=!0)})};return document.addEventListener("pointerup",b),()=>{document.removeEventListener("pointerup",b),c.hasSelectionRef.current=!1,c.isPointerDownOnContentRef.current=!1}}},[c.isPointerDownOnContentRef,c.hasSelectionRef]),h.useEffect(()=>{u.current&&ny(u.current).forEach(y=>y.setAttribute("tabindex","-1"))}),o.jsx(Oo,{asChild:!0,disableOutsidePointerEvents:!1,onInteractOutside:i,onEscapeKeyDown:s,onPointerDownOutside:n,onFocusOutside:le(a,b=>{b.preventDefault()}),onDismiss:c.onDismiss,children:o.jsx(Lo,{...d,...l,onPointerDown:le(l.onPointerDown,b=>{b.currentTarget.contains(b.target)&&m(!0),c.hasSelectionRef.current=!1,c.isPointerDownOnContentRef.current=!0}),ref:f,style:{...l.style,userSelect:p?"text":void 0,WebkitUserSelect:p?"text":void 0,"--radix-hover-card-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-hover-card-content-available-width":"var(--radix-popper-available-width)","--radix-hover-card-content-available-height":"var(--radix-popper-available-height)","--radix-hover-card-trigger-width":"var(--radix-popper-anchor-width)","--radix-hover-card-trigger-height":"var(--radix-popper-anchor-height)"}})})}),ry="HoverCardArrow",sy=h.forwardRef((r,e)=>{const{__scopeHoverCard:t,...s}=r,n=Un(t);return o.jsx(Do,{...n,...s,ref:e})});sy.displayName=ry;function bn(r){return e=>e.pointerType==="touch"?void 0:r()}function ny(r){const e=[],t=document.createTreeWalker(r,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});for(;t.nextNode();)e.push(t.currentNode);return e}var ay=jc,iy=Nc,Tc=Cc;const oy=ay,ly=iy,Ec=h.forwardRef(({className:r,align:e="center",sideOffset:t=4,...s},n)=>o.jsx(Tc,{ref:n,align:e,sideOffset:t,className:q("z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...s}));Ec.displayName=Tc.displayName;const cy=r=>({website:za,portfolio:us,social:Dl,shop:$l,donation:Ol,other:an})[r]||an,dy=r=>r>=90?{label:"Master",color:"bg-purple-100 text-purple-700 border-purple-200",icon:"👑"}:r>=70?{label:"Expert",color:"bg-blue-100 text-blue-700 border-blue-200",icon:"⭐"}:r>=50?{label:"Experienced",color:"bg-green-100 text-green-700 border-green-200",icon:"✨"}:r>=30?{label:"Beginner",color:"bg-yellow-100 text-yellow-700 border-yellow-200",icon:"🌱"}:{label:"Newcomer",color:"bg-gray-100 text-gray-700 border-gray-200",icon:"👋"};function uy({open:r,onOpenChange:e,user:t,userProfile:s}){const n=dy(t.trust_level);return!s?.show_marketing||!s?.marketing_bio&&(!s?.marketing_links||s.marketing_links.length===0)?null:o.jsx(ti,{open:r,onOpenChange:e,children:o.jsxs(On,{className:"sm:max-w-lg max-h-[80vh] overflow-y-auto",children:[o.jsx(Ln,{children:o.jsxs(Mn,{className:"flex items-center gap-3",children:[o.jsxs(hr,{className:"w-12 h-12",children:[o.jsx(fr,{src:t.avatar_url,alt:t.nickname}),o.jsx(mr,{className:"bg-primary/10 text-primary font-semibold",children:t.nickname.charAt(0).toUpperCase()})]}),o.jsxs("div",{className:"flex-1 text-left",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"font-semibold",children:t.nickname}),o.jsxs(Vr,{className:`text-xs px-2 py-0.5 ${n.color}`,children:[o.jsx("span",{className:"mr-1",children:n.icon}),n.label]})]}),o.jsxs("div",{className:"text-sm text-muted-foreground",children:[t.points.toLocaleString()," points • Trust Level ",t.trust_level]})]})]})}),o.jsxs("div",{className:"space-y-4",children:[t.bio&&o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-sm mb-2",children:"Bio"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:t.bio})]}),s?.marketing_bio&&o.jsxs("div",{children:[o.jsxs("h4",{className:"font-medium text-sm mb-2 flex items-center gap-2",children:[o.jsx(us,{className:"w-4 h-4"}),"About Me"]}),o.jsx("div",{className:"prose prose-sm max-w-none",children:o.jsx("div",{className:"whitespace-pre-wrap text-sm leading-relaxed",children:s.marketing_bio.split(`
`).map((a,i)=>{let l=a.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/\[(.*?)\]\((.*?)\)/g,'<a href="$2" target="_blank" rel="noopener noreferrer" class="text-primary hover:underline">$1</a>');return o.jsx("div",{dangerouslySetInnerHTML:{__html:l},className:"mb-1"},i)})})})]}),s?.marketing_links&&s.marketing_links.length>0&&o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-sm mb-3",children:"Links"}),o.jsx("div",{className:"space-y-2",children:s.marketing_links.map(a=>{const i=cy(a.type);return o.jsxs("a",{href:a.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-3 border rounded-lg hover:bg-muted transition-colors group",children:[o.jsx(i,{className:"w-4 h-4 text-muted-foreground"}),o.jsx("span",{className:"text-sm font-medium truncate flex-1",children:a.title}),o.jsx(Is,{className:"w-4 h-4 text-muted-foreground group-hover:text-foreground"})]},a.id)})})]}),s&&o.jsx("div",{className:"pt-4 border-t",children:o.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.location&&o.jsxs("div",{children:[o.jsx("span",{className:"font-medium",children:"Location"}),o.jsx("p",{className:"text-muted-foreground",children:s.location})]}),s.work_type&&o.jsxs("div",{children:[o.jsx("span",{className:"font-medium",children:"Work"}),o.jsx("p",{className:"text-muted-foreground",children:s.work_type})]}),s.travel_style&&o.jsxs("div",{children:[o.jsx("span",{className:"font-medium",children:"Travel Style"}),o.jsx("p",{className:"text-muted-foreground",children:s.travel_style})]}),s.languages&&s.languages.length>0&&o.jsxs("div",{children:[o.jsx("span",{className:"font-medium",children:"Languages"}),o.jsx("p",{className:"text-muted-foreground",children:s.languages.join(", ")})]})]})})]})]})})}const Cs={async getTips(r){console.log("🔍 [tipsApi.getTips] Starting database query...",{userId:r||"Not provided (non-logged user)",hasUserId:!!r});try{console.log("🔍 [tipsApi.getTips] Testing database connection...");const{data:e,error:t}=await xe.from("tips").select("count").limit(1);if(t)throw console.error("❌ [tipsApi.getTips] Database connection failed:",t),new Error(`Database connection failed: ${t.message}`);console.log("✅ [tipsApi.getTips] Database connection successful"),console.log("🔍 [tipsApi.getTips] Executing main query...");let s=xe.from("tips").select(`
          *,
          user:users(*),
          is_liked:tip_likes!left(user_id),
          is_saved:tip_saves!left(user_id)
        `).order("created_at",{ascending:!1});const{data:n,error:a}=await s;if(a)throw console.error("❌ [tipsApi.getTips] Query error:",a),new Error(`Query failed: ${a.message}`);if(console.log("✅ [tipsApi.getTips] Raw database response:",n),console.log(`📊 [tipsApi.getTips] Found ${n?.length||0} tips in database`),!n||n.length===0)return console.log("⚠️ [tipsApi.getTips] No tips found in database"),[];const i=n.map((l,c)=>(console.log(`🔄 [tipsApi.getTips] Transforming tip ${c+1}:`,{id:l.id,content:l.content?.slice(0,50)+"...",user:l.user?.nickname,location:`${l.city}, ${l.country}`,hasUser:!!l.user,userId:l.user_id}),{...l,location:{latitude:Number(l.latitude),longitude:Number(l.longitude),city:l.city,country:l.country,address:l.address},is_liked:r?l.is_liked?.some(u=>u.user_id===r):!1,is_saved:r?l.is_saved?.some(u=>u.user_id===r):!1}));return console.log("🎉 [tipsApi.getTips] Successfully transformed tips"),console.log(`📈 [tipsApi.getTips] Returning ${i.length} tips`),i}catch(e){throw console.error("💥 [tipsApi.getTips] Error in getTips:",e),e}},async getTipsByCategory(r,e){console.log("🔍 [tipsApi.getTipsByCategory] Fetching tips by category:",{category:r,userId:e||"Not provided (non-logged user)",hasUserId:!!e});try{const{data:t,error:s}=await xe.from("tips").select(`
          *,
          user:users(*),
          is_liked:tip_likes!left(user_id),
          is_saved:tip_saves!left(user_id)
        `).eq("category",r).order("created_at",{ascending:!1});if(s)throw console.error("❌ [tipsApi.getTipsByCategory] Database error:",s),s;return console.log(`✅ [tipsApi.getTipsByCategory] Found ${t?.length||0} tips for category: ${r}`),t?.map(n=>({...n,location:{latitude:Number(n.latitude),longitude:Number(n.longitude),city:n.city,country:n.country,address:n.address},is_liked:e?n.is_liked?.some(a=>a.user_id===e):!1,is_saved:e?n.is_saved?.some(a=>a.user_id===e):!1}))||[]}catch(t){throw console.error("💥 [tipsApi.getTipsByCategory] Error in getTipsByCategory:",t),t}},async getUserTips(r){console.log("🔍 [tipsApi.getUserTips] Fetching user tips:",{userId:r});try{const{data:e,error:t}=await xe.from("tips").select(`
          *,
          user:users(*)
        `).eq("user_id",r).order("created_at",{ascending:!1});if(t)throw console.error("❌ [tipsApi.getUserTips] Database error:",t),t;return console.log(`✅ [tipsApi.getUserTips] Found ${e?.length||0} tips for user: ${r}`),e?.map(s=>({...s,location:{latitude:Number(s.latitude),longitude:Number(s.longitude),city:s.city,country:s.country,address:s.address}}))||[]}catch(e){throw console.error("💥 [tipsApi.getUserTips] Error in getUserTips:",e),e}},async createTip(r){console.log("🔍 [tipsApi.createTip] Creating new tip:",{user_id:r.user_id,category:r.category,city:r.location.city,content:r.content.slice(0,50)+"..."});try{const{data:e,error:t}=await xe.from("tips").insert({user_id:r.user_id,content:r.content,category:r.category,images:r.images||[],latitude:r.location.latitude,longitude:r.location.longitude,city:r.location.city,country:r.location.country,address:r.location.address}).select(`
          *,
          user:users(*)
        `).single();if(t)throw console.error("❌ [tipsApi.createTip] Error creating tip:",t),t;return console.log("✅ [tipsApi.createTip] Created tip:",e.id),{...e,location:{latitude:Number(e.latitude),longitude:Number(e.longitude),city:e.city,country:e.country,address:e.address}}}catch(e){throw console.error("💥 [tipsApi.createTip] Error in createTip:",e),e}},async updateTip(r,e){const t={};e.content&&(t.content=e.content),e.category&&(t.category=e.category),e.images&&(t.images=e.images),e.location&&(t.latitude=e.location.latitude,t.longitude=e.location.longitude,t.city=e.location.city,t.country=e.location.country,t.address=e.location.address);const{data:s,error:n}=await xe.from("tips").update(t).eq("id",r).select(`
        *,
        user:users(*)
      `).single();if(n)throw n;return{...s,location:{latitude:Number(s.latitude),longitude:Number(s.longitude),city:s.city,country:s.country,address:s.address}}},async deleteTip(r){const{error:e}=await xe.from("tips").delete().eq("id",r);if(e)throw e}},Vt={async toggleLike(r,e){const{data:t}=await xe.from("tip_likes").select("id").eq("tip_id",r).eq("user_id",e).single();if(t){const{error:s}=await xe.from("tip_likes").delete().eq("tip_id",r).eq("user_id",e);if(s)throw s;return!1}else{const{error:s}=await xe.from("tip_likes").insert({tip_id:r,user_id:e});if(s)throw s;return!0}},async toggleSave(r,e){const{data:t}=await xe.from("tip_saves").select("id").eq("tip_id",r).eq("user_id",e).single();if(t){const{error:s}=await xe.from("tip_saves").delete().eq("tip_id",r).eq("user_id",e);if(s)throw s;return!1}else{const{error:s}=await xe.from("tip_saves").insert({tip_id:r,user_id:e});if(s)throw s;return!0}},async getUserLikedTips(r){const{data:e,error:t}=await xe.from("tip_likes").select(`
        tip:tips(
          *,
          user:users(*)
        )
      `).eq("user_id",r).order("created_at",{ascending:!1});if(t)throw t;return e?.map(s=>({...s.tip,location:{latitude:Number(s.tip.latitude),longitude:Number(s.tip.longitude),city:s.tip.city,country:s.tip.country,address:s.tip.address},is_liked:!0}))||[]},async getUserSavedTips(r){const{data:e,error:t}=await xe.from("tip_saves").select(`
        tip:tips(
          *,
          user:users(*)
        )
      `).eq("user_id",r).order("created_at",{ascending:!1});if(t)throw t;return e?.map(s=>({...s.tip,location:{latitude:Number(s.tip.latitude),longitude:Number(s.tip.longitude),city:s.tip.city,country:s.tip.country,address:s.tip.address},is_saved:!0}))||[]}},ii={async getUserProfile(r){const{data:e,error:t}=await xe.from("users").select(`
        *,
        profile:user_profiles(*),
        stats:user_stats(*)
      `).eq("id",r).single();if(t)throw t;return e},async getUserProfileWithMarketing(r){const{data:e,error:t}=await xe.from("users").select(`
        *,
        profile:user_profiles(*)
      `).eq("id",r).single();if(t)throw t;return e},async updateUserProfile(r,e){const{data:t,error:s}=await xe.from("user_profiles").upsert({user_id:r,...e}).select().single();if(s)throw s;return t},async updateUser(r,e){const{data:t,error:s}=await xe.from("users").update(e).eq("id",r).select().single();if(s)throw s;return t}};function Qs({tip:r,onLike:e,onSave:t,onComment:s,onUserClick:n}){const[a,i]=h.useState(!1),[l,c]=h.useState(null),[d,u]=h.useState(!1),f=Dn.find(k=>k.id===r.category),p=mu(new Date(r.created_at),{addSuffix:!0}),b=(k=>k>=90?{label:"Master",color:"bg-purple-100 text-purple-700 border-purple-200",icon:"👑"}:k>=70?{label:"Expert",color:"bg-blue-100 text-blue-700 border-blue-200",icon:"⭐"}:k>=50?{label:"Experienced",color:"bg-green-100 text-green-700 border-green-200",icon:"✨"}:k>=30?{label:"Beginner",color:"bg-yellow-100 text-yellow-700 border-yellow-200",icon:"🌱"}:{label:"Newcomer",color:"bg-gray-100 text-gray-700 border-gray-200",icon:"👋"})(r.user?.trust_level||0),y=r.user?.created_at?new Date(r.user.created_at):null,w=async()=>{if(r.user)try{u(!0);const k=await ii.getUserProfileWithMarketing(r.user.id);c(k.profile),i(!0),n?.()}catch(k){console.error("Error loading user profile:",k)}finally{u(!1)}};return o.jsxs(o.Fragment,{children:[o.jsx(et,{className:"w-full hover:shadow-md transition-shadow",children:o.jsxs(tt,{className:"p-4 sm:p-6",children:[o.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[o.jsxs(oy,{children:[o.jsx(ly,{asChild:!0,children:o.jsx("div",{className:"cursor-pointer",children:o.jsxs(hr,{className:"w-12 h-12 sm:w-14 sm:h-14 flex-shrink-0 ring-2 ring-primary/10 hover:ring-primary/30 transition-all",onClick:w,children:[o.jsx(fr,{src:r.user?.avatar_url,alt:r.user?.nickname}),o.jsx(mr,{className:"bg-primary/10 text-primary font-semibold",children:r.user?.nickname?.charAt(0).toUpperCase()})]})})}),o.jsx(Ec,{className:"w-80",side:"top",children:o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs(hr,{className:"w-12 h-12",children:[o.jsx(fr,{src:r.user?.avatar_url,alt:r.user?.nickname}),o.jsx(mr,{className:"bg-primary/10 text-primary font-semibold",children:r.user?.nickname?.charAt(0).toUpperCase()})]}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:"font-semibold text-foreground",children:r.user?.nickname}),o.jsx("p",{className:"text-sm text-muted-foreground",children:r.user?.email})]})]}),r.user?.bio&&o.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:r.user.bio}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold text-lg text-foreground",children:r.user?.points||0}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Points"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold text-lg text-foreground",children:r.user?.trust_level||0}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Trust Level"})]})]}),o.jsx("div",{className:"flex justify-center",children:o.jsxs(Vr,{className:q("text-xs px-3 py-1",b.color),children:[o.jsx("span",{className:"mr-1",children:b.icon}),b.label]})}),y&&o.jsxs("div",{className:"flex items-center justify-center gap-1 text-xs text-muted-foreground",children:[o.jsx(Sp,{className:"w-3 h-3"}),o.jsxs("span",{children:["Joined ",y.toLocaleDateString()]})]}),o.jsx(_c,{}),o.jsxs(J,{variant:"outline",size:"sm",className:"w-full",onClick:w,disabled:d,children:[d?o.jsx("div",{className:"w-3 h-3 border-2 border-current border-t-transparent rounded-full animate-spin mr-2"}):o.jsx(Ap,{className:"w-3 h-3 mr-2"}),"View Profile"]})]})})]}),o.jsx("div",{className:"flex-1 min-w-0",children:o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[o.jsx("h4",{className:"font-semibold text-foreground cursor-pointer hover:text-primary transition-colors truncate",onClick:w,children:r.user?.nickname}),r.user?.trust_level&&r.user.trust_level>0&&o.jsxs(Vr,{className:q("text-xs px-2 py-0.5 whitespace-nowrap",b.color),children:[o.jsx("span",{className:"mr-1",children:b.icon}),b.label]})]}),o.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-1 flex-wrap",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(hs,{className:"w-3 h-3 flex-shrink-0"}),o.jsxs("span",{className:"truncate",children:[r.location.city,", ",r.location.country]})]}),o.jsx("span",{children:"•"}),o.jsx("span",{className:"whitespace-nowrap",children:p})]}),o.jsxs("div",{className:"flex items-center gap-3 text-xs text-muted-foreground",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(jp,{className:"w-3 h-3"}),o.jsxs("span",{children:[r.user?.points||0," points"]})]}),r.user?.trust_level&&r.user.trust_level>30&&o.jsx("div",{className:"flex items-center gap-1",children:o.jsxs("span",{children:["Trust Level ",r.user.trust_level]})})]})]}),f&&o.jsxs("div",{className:q("flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium flex-shrink-0",f.color),children:[o.jsx("span",{children:f.emoji}),o.jsx("span",{className:"hidden sm:inline",children:f.label})]})]})})]}),o.jsx("div",{className:"mb-4",children:o.jsx("p",{className:"text-foreground leading-relaxed text-sm sm:text-base",children:r.content})}),r.images&&r.images.length>0&&o.jsx("div",{className:"grid grid-cols-2 gap-2 mb-4",children:r.images.slice(0,4).map((k,v)=>o.jsx("div",{className:q("aspect-square bg-muted rounded-lg overflow-hidden",r.images.length===1&&"col-span-2 aspect-video"),children:o.jsx("img",{src:k,alt:`Tip image ${v+1}`,className:"w-full h-full object-cover hover:scale-105 transition-transform cursor-pointer"})},v))}),o.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-border",children:[o.jsxs("div",{className:"flex items-center gap-1 sm:gap-4",children:[o.jsxs(J,{variant:"ghost",size:"sm",className:q("p-2 h-auto text-xs sm:text-sm hover:bg-red-50",r.is_liked&&"text-red-500 hover:text-red-600"),onClick:e,children:[o.jsx(Wa,{className:q("w-4 h-4 mr-1",r.is_liked&&"fill-current")}),o.jsx("span",{children:r.likes_count})]}),o.jsxs(J,{variant:"ghost",size:"sm",className:"p-2 h-auto text-muted-foreground text-xs sm:text-sm hover:bg-blue-50 hover:text-blue-600",onClick:s,children:[o.jsx(qa,{className:"w-4 h-4 mr-1"}),o.jsx("span",{children:r.comments_count})]}),o.jsxs(J,{variant:"ghost",size:"sm",className:"p-2 h-auto text-muted-foreground text-xs sm:text-sm hover:bg-green-50 hover:text-green-600",onClick:()=>{const k=`https://www.google.com/maps/search/?api=1&query=${r.location.latitude},${r.location.longitude}`;window.open(k,"_blank")},children:[o.jsx(Is,{className:"w-4 h-4 mr-1"}),o.jsx("span",{className:"hidden sm:inline",children:"Map"})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(J,{variant:"ghost",size:"sm",className:q("p-2 h-auto hover:bg-primary/10",r.is_saved&&"text-primary hover:text-primary"),onClick:t,children:o.jsx(Al,{className:q("w-4 h-4",r.is_saved&&"fill-current")})}),o.jsx(J,{variant:"ghost",size:"sm",className:"p-2 h-auto text-muted-foreground hover:bg-primary/10 hover:text-primary",onClick:w,disabled:d,children:d?o.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}):o.jsx(Rn,{className:"w-4 h-4"})})]})]})]})}),r.user&&o.jsx(uy,{open:a,onOpenChange:i,user:r.user,userProfile:l})]})}function Ra(r,[e,t]){return Math.min(t,Math.max(e,r))}function hy(r,e){return h.useReducer((t,s)=>e[t][s]??t,r)}var oi="ScrollArea",[Rc,qx]=Ts(oi),[fy,rt]=Rc(oi),Ac=h.forwardRef((r,e)=>{const{__scopeScrollArea:t,type:s="hover",dir:n,scrollHideDelay:a=600,...i}=r,[l,c]=h.useState(null),[d,u]=h.useState(null),[f,p]=h.useState(null),[m,b]=h.useState(null),[y,w]=h.useState(null),[k,v]=h.useState(0),[x,S]=h.useState(0),[R,$]=h.useState(!1),[N,C]=h.useState(!1),T=Me(e,Z=>c(Z)),P=Uo(n);return o.jsx(fy,{scope:t,type:s,dir:P,scrollHideDelay:a,scrollArea:l,viewport:d,onViewportChange:u,content:f,onContentChange:p,scrollbarX:m,onScrollbarXChange:b,scrollbarXEnabled:R,onScrollbarXEnabledChange:$,scrollbarY:y,onScrollbarYChange:w,scrollbarYEnabled:N,onScrollbarYEnabledChange:C,onCornerWidthChange:v,onCornerHeightChange:S,children:o.jsx(je.div,{dir:P,...i,ref:T,style:{position:"relative","--radix-scroll-area-corner-width":k+"px","--radix-scroll-area-corner-height":x+"px",...r.style}})})});Ac.displayName=oi;var Pc="ScrollAreaViewport",Ic=h.forwardRef((r,e)=>{const{__scopeScrollArea:t,children:s,asChild:n,nonce:a,...i}=r,l=rt(Pc,t),c=h.useRef(null),d=Me(e,c,l.onViewportChange);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:`
[data-radix-scroll-area-viewport] {
  scrollbar-width: none;
  -ms-overflow-style: none;
  -webkit-overflow-scrolling: touch;
}
[data-radix-scroll-area-viewport]::-webkit-scrollbar {
  display: none;
}
:where([data-radix-scroll-area-viewport]) {
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
:where([data-radix-scroll-area-content]) {
  flex-grow: 1;
}
`},nonce:a}),o.jsx(je.div,{"data-radix-scroll-area-viewport":"",...i,asChild:n,ref:d,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...r.style},children:ky({asChild:n,children:s},u=>o.jsx("div",{"data-radix-scroll-area-content":"",ref:l.onContentChange,style:{minWidth:l.scrollbarXEnabled?"fit-content":void 0},children:u}))})]})});Ic.displayName=Pc;var jt="ScrollAreaScrollbar",li=h.forwardRef((r,e)=>{const{forceMount:t,...s}=r,n=rt(jt,r.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:i}=n,l=r.orientation==="horizontal";return h.useEffect(()=>(l?a(!0):i(!0),()=>{l?a(!1):i(!1)}),[l,a,i]),n.type==="hover"?o.jsx(my,{...s,ref:e,forceMount:t}):n.type==="scroll"?o.jsx(py,{...s,ref:e,forceMount:t}):n.type==="auto"?o.jsx(Oc,{...s,ref:e,forceMount:t}):n.type==="always"?o.jsx(ci,{...s,ref:e}):null});li.displayName=jt;var my=h.forwardRef((r,e)=>{const{forceMount:t,...s}=r,n=rt(jt,r.__scopeScrollArea),[a,i]=h.useState(!1);return h.useEffect(()=>{const l=n.scrollArea;let c=0;if(l){const d=()=>{window.clearTimeout(c),i(!0)},u=()=>{c=window.setTimeout(()=>i(!1),n.scrollHideDelay)};return l.addEventListener("pointerenter",d),l.addEventListener("pointerleave",u),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",d),l.removeEventListener("pointerleave",u)}}},[n.scrollArea,n.scrollHideDelay]),o.jsx(Es,{present:t||a,children:o.jsx(Oc,{"data-state":a?"visible":"hidden",...s,ref:e})})}),py=h.forwardRef((r,e)=>{const{forceMount:t,...s}=r,n=rt(jt,r.__scopeScrollArea),a=r.orientation==="horizontal",i=Vn(()=>c("SCROLL_END"),100),[l,c]=hy("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return h.useEffect(()=>{if(l==="idle"){const d=window.setTimeout(()=>c("HIDE"),n.scrollHideDelay);return()=>window.clearTimeout(d)}},[l,n.scrollHideDelay,c]),h.useEffect(()=>{const d=n.viewport,u=a?"scrollLeft":"scrollTop";if(d){let f=d[u];const p=()=>{const m=d[u];f!==m&&(c("SCROLL"),i()),f=m};return d.addEventListener("scroll",p),()=>d.removeEventListener("scroll",p)}},[n.viewport,a,c,i]),o.jsx(Es,{present:t||l!=="hidden",children:o.jsx(ci,{"data-state":l==="hidden"?"hidden":"visible",...s,ref:e,onPointerEnter:le(r.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:le(r.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),Oc=h.forwardRef((r,e)=>{const t=rt(jt,r.__scopeScrollArea),{forceMount:s,...n}=r,[a,i]=h.useState(!1),l=r.orientation==="horizontal",c=Vn(()=>{if(t.viewport){const d=t.viewport.offsetWidth<t.viewport.scrollWidth,u=t.viewport.offsetHeight<t.viewport.scrollHeight;i(l?d:u)}},10);return Fr(t.viewport,c),Fr(t.content,c),o.jsx(Es,{present:s||a,children:o.jsx(ci,{"data-state":a?"visible":"hidden",...n,ref:e})})}),ci=h.forwardRef((r,e)=>{const{orientation:t="vertical",...s}=r,n=rt(jt,r.__scopeScrollArea),a=h.useRef(null),i=h.useRef(0),[l,c]=h.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=Uc(l.viewport,l.content),u={...s,sizes:l,onSizesChange:c,hasThumb:d>0&&d<1,onThumbChange:p=>a.current=p,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:p=>i.current=p};function f(p,m){return by(p,i.current,l,m)}return t==="horizontal"?o.jsx(gy,{...u,ref:e,onThumbPositionChange:()=>{if(n.viewport&&a.current){const p=n.viewport.scrollLeft,m=So(p,l,n.dir);a.current.style.transform=`translate3d(${m}px, 0, 0)`}},onWheelScroll:p=>{n.viewport&&(n.viewport.scrollLeft=p)},onDragScroll:p=>{n.viewport&&(n.viewport.scrollLeft=f(p,n.dir))}}):t==="vertical"?o.jsx(vy,{...u,ref:e,onThumbPositionChange:()=>{if(n.viewport&&a.current){const p=n.viewport.scrollTop,m=So(p,l);a.current.style.transform=`translate3d(0, ${m}px, 0)`}},onWheelScroll:p=>{n.viewport&&(n.viewport.scrollTop=p)},onDragScroll:p=>{n.viewport&&(n.viewport.scrollTop=f(p))}}):null}),gy=h.forwardRef((r,e)=>{const{sizes:t,onSizesChange:s,...n}=r,a=rt(jt,r.__scopeScrollArea),[i,l]=h.useState(),c=h.useRef(null),d=Me(e,c,a.onScrollbarXChange);return h.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),o.jsx(Mc,{"data-orientation":"horizontal",...n,ref:d,sizes:t,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Bn(t)+"px",...r.style},onThumbPointerDown:u=>r.onThumbPointerDown(u.x),onDragScroll:u=>r.onDragScroll(u.x),onWheelScroll:(u,f)=>{if(a.viewport){const p=a.viewport.scrollLeft+u.deltaX;r.onWheelScroll(p),Vc(p,f)&&u.preventDefault()}},onResize:()=>{c.current&&a.viewport&&i&&s({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:kn(i.paddingLeft),paddingEnd:kn(i.paddingRight)}})}})}),vy=h.forwardRef((r,e)=>{const{sizes:t,onSizesChange:s,...n}=r,a=rt(jt,r.__scopeScrollArea),[i,l]=h.useState(),c=h.useRef(null),d=Me(e,c,a.onScrollbarYChange);return h.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),o.jsx(Mc,{"data-orientation":"vertical",...n,ref:d,sizes:t,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Bn(t)+"px",...r.style},onThumbPointerDown:u=>r.onThumbPointerDown(u.y),onDragScroll:u=>r.onDragScroll(u.y),onWheelScroll:(u,f)=>{if(a.viewport){const p=a.viewport.scrollTop+u.deltaY;r.onWheelScroll(p),Vc(p,f)&&u.preventDefault()}},onResize:()=>{c.current&&a.viewport&&i&&s({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:kn(i.paddingTop),paddingEnd:kn(i.paddingBottom)}})}})}),[yy,Lc]=Rc(jt),Mc=h.forwardRef((r,e)=>{const{__scopeScrollArea:t,sizes:s,hasThumb:n,onThumbChange:a,onThumbPointerUp:i,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:d,onWheelScroll:u,onResize:f,...p}=r,m=rt(jt,t),[b,y]=h.useState(null),w=Me(e,T=>y(T)),k=h.useRef(null),v=h.useRef(""),x=m.viewport,S=s.content-s.viewport,R=At(u),$=At(c),N=Vn(f,10);function C(T){if(k.current){const P=T.clientX-k.current.left,Z=T.clientY-k.current.top;d({x:P,y:Z})}}return h.useEffect(()=>{const T=P=>{const Z=P.target;b?.contains(Z)&&R(P,S)};return document.addEventListener("wheel",T,{passive:!1}),()=>document.removeEventListener("wheel",T,{passive:!1})},[x,b,S,R]),h.useEffect($,[s,$]),Fr(b,N),Fr(m.content,N),o.jsx(yy,{scope:t,scrollbar:b,hasThumb:n,onThumbChange:At(a),onThumbPointerUp:At(i),onThumbPositionChange:$,onThumbPointerDown:At(l),children:o.jsx(je.div,{...p,ref:w,style:{position:"absolute",...p.style},onPointerDown:le(r.onPointerDown,T=>{T.button===0&&(T.target.setPointerCapture(T.pointerId),k.current=b.getBoundingClientRect(),v.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),C(T))}),onPointerMove:le(r.onPointerMove,C),onPointerUp:le(r.onPointerUp,T=>{const P=T.target;P.hasPointerCapture(T.pointerId)&&P.releasePointerCapture(T.pointerId),document.body.style.webkitUserSelect=v.current,m.viewport&&(m.viewport.style.scrollBehavior=""),k.current=null})})})}),_n="ScrollAreaThumb",$c=h.forwardRef((r,e)=>{const{forceMount:t,...s}=r,n=Lc(_n,r.__scopeScrollArea);return o.jsx(Es,{present:t||n.hasThumb,children:o.jsx(xy,{ref:e,...s})})}),xy=h.forwardRef((r,e)=>{const{__scopeScrollArea:t,style:s,...n}=r,a=rt(_n,t),i=Lc(_n,t),{onThumbPositionChange:l}=i,c=Me(e,f=>i.onThumbChange(f)),d=h.useRef(),u=Vn(()=>{d.current&&(d.current(),d.current=void 0)},100);return h.useEffect(()=>{const f=a.viewport;if(f){const p=()=>{if(u(),!d.current){const m=_y(f,l);d.current=m,l()}};return l(),f.addEventListener("scroll",p),()=>f.removeEventListener("scroll",p)}},[a.viewport,u,l]),o.jsx(je.div,{"data-state":i.hasThumb?"visible":"hidden",...n,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...s},onPointerDownCapture:le(r.onPointerDownCapture,f=>{const m=f.target.getBoundingClientRect(),b=f.clientX-m.left,y=f.clientY-m.top;i.onThumbPointerDown({x:b,y})}),onPointerUp:le(r.onPointerUp,i.onThumbPointerUp)})});$c.displayName=_n;var di="ScrollAreaCorner",Dc=h.forwardRef((r,e)=>{const t=rt(di,r.__scopeScrollArea),s=!!(t.scrollbarX&&t.scrollbarY);return t.type!=="scroll"&&s?o.jsx(wy,{...r,ref:e}):null});Dc.displayName=di;var wy=h.forwardRef((r,e)=>{const{__scopeScrollArea:t,...s}=r,n=rt(di,t),[a,i]=h.useState(0),[l,c]=h.useState(0),d=!!(a&&l);return Fr(n.scrollbarX,()=>{const u=n.scrollbarX?.offsetHeight||0;n.onCornerHeightChange(u),c(u)}),Fr(n.scrollbarY,()=>{const u=n.scrollbarY?.offsetWidth||0;n.onCornerWidthChange(u),i(u)}),d?o.jsx(je.div,{...s,ref:e,style:{width:a,height:l,position:"absolute",right:n.dir==="ltr"?0:void 0,left:n.dir==="rtl"?0:void 0,bottom:0,...r.style}}):null});function kn(r){return r?parseInt(r,10):0}function Uc(r,e){const t=r/e;return isNaN(t)?0:t}function Bn(r){const e=Uc(r.viewport,r.content),t=r.scrollbar.paddingStart+r.scrollbar.paddingEnd,s=(r.scrollbar.size-t)*e;return Math.max(s,18)}function by(r,e,t,s="ltr"){const n=Bn(t),a=n/2,i=e||a,l=n-i,c=t.scrollbar.paddingStart+i,d=t.scrollbar.size-t.scrollbar.paddingEnd-l,u=t.content-t.viewport,f=s==="ltr"?[0,u]:[u*-1,0];return Bc([c,d],f)(r)}function So(r,e,t="ltr"){const s=Bn(e),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,a=e.scrollbar.size-n,i=e.content-e.viewport,l=a-s,c=t==="ltr"?[0,i]:[i*-1,0],d=Ra(r,c);return Bc([0,i],[0,l])(d)}function Bc(r,e){return t=>{if(r[0]===r[1]||e[0]===e[1])return e[0];const s=(e[1]-e[0])/(r[1]-r[0]);return e[0]+s*(t-r[0])}}function Vc(r,e){return r>0&&r<e}var _y=(r,e=()=>{})=>{let t={left:r.scrollLeft,top:r.scrollTop},s=0;return function n(){const a={left:r.scrollLeft,top:r.scrollTop},i=t.left!==a.left,l=t.top!==a.top;(i||l)&&e(),t=a,s=window.requestAnimationFrame(n)}(),()=>window.cancelAnimationFrame(s)};function Vn(r,e){const t=At(r),s=h.useRef(0);return h.useEffect(()=>()=>window.clearTimeout(s.current),[]),h.useCallback(()=>{window.clearTimeout(s.current),s.current=window.setTimeout(t,e)},[t,e])}function Fr(r,e){const t=At(e);pt(()=>{let s=0;if(r){const n=new ResizeObserver(()=>{cancelAnimationFrame(s),s=window.requestAnimationFrame(t)});return n.observe(r),()=>{window.cancelAnimationFrame(s),n.unobserve(r)}}},[r,t])}function ky(r,e){const{asChild:t,children:s}=r;if(!t)return typeof e=="function"?e(s):e;const n=h.Children.only(s);return h.cloneElement(n,{children:typeof e=="function"?e(n.props.children):e})}var Fc=Ac,jy=Ic,Sy=Dc;const zc=h.forwardRef(({className:r,children:e,...t},s)=>o.jsxs(Fc,{ref:s,className:q("relative overflow-hidden",r),...t,children:[o.jsx(jy,{className:"h-full w-full rounded-[inherit]",children:e}),o.jsx(Wc,{}),o.jsx(Sy,{})]}));zc.displayName=Fc.displayName;const Wc=h.forwardRef(({className:r,orientation:e="vertical",...t},s)=>o.jsx(li,{ref:s,orientation:e,className:q("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",r),...t,children:o.jsx($c,{className:"relative flex-1 rounded-full bg-border"})}));Wc.displayName=li.displayName;function ia({selectedCategory:r,onCategoryChange:e}){return o.jsx("div",{className:"bg-card border-b border-border",children:o.jsx(zc,{className:"w-full whitespace-nowrap",children:o.jsxs("div",{className:"flex gap-2 p-4 sm:px-6",children:[o.jsx(J,{variant:r==="all"?"default":"outline",size:"sm",className:q("min-w-fit px-3 sm:px-4 text-xs sm:text-sm",r==="all"&&"bg-primary hover:bg-primary/90"),onClick:()=>e("all"),children:"All"}),Dn.map(t=>o.jsxs(J,{variant:r===t.id?"default":"outline",size:"sm",className:q("min-w-fit px-3 sm:px-4 gap-1 text-xs sm:text-sm",r===t.id&&"bg-primary hover:bg-primary/90"),onClick:()=>e(t.id),children:[o.jsx("span",{children:t.emoji}),o.jsx("span",{className:"hidden sm:inline",children:t.label})]},t.id))]})})})}function Ny({icon:r,title:e,description:t,action:s}){return o.jsxs("div",{className:"flex flex-col items-center justify-center py-12 px-4 text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:o.jsx(r,{className:"w-8 h-8 text-gray-400"})}),o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:e}),o.jsx("p",{className:"text-gray-600 mb-6 max-w-sm",children:t}),s]})}const qc=dl(r=>({tips:[],selectedCategory:"all",currentLocation:null,isLoading:!1,setTips:e=>r({tips:e}),addTip:e=>r(t=>({tips:[e,...t.tips]})),updateTip:(e,t)=>r(s=>({tips:s.tips.map(n=>n.id===e?{...n,...t}:n)})),setSelectedCategory:e=>r({selectedCategory:e}),setCurrentLocation:e=>r({currentLocation:e}),setLoading:e=>r({isLoading:e})})),Cy=!1;function Ty(){const{tips:r,selectedCategory:e,isLoading:t,setTips:s,setSelectedCategory:n,setLoading:a,updateTip:i}=qc(),{user:l}=It(),[c,d]=h.useState(!1),[u,f]=h.useState(null),[p,m]=h.useState(null),[b,y]=h.useState(!1),w=async(N=!1)=>{console.log("🔄 TipFeed: Starting to load tips..."),console.log("📊 Current state:",{selectedCategory:e,userId:l?.id,isLoading:t,currentTipsCount:r.length});try{a(!0),f(null),console.log("🔍 TipFeed: Calling tipsApi...");const C=e==="all"?await Cs.getTips(l?.id):await Cs.getTipsByCategory(e,l?.id);console.log("✅ TipFeed: Received data from API:",C),console.log(`📈 TipFeed: Got ${C?.length||0} tips`),m({apiCallTime:new Date().toISOString(),selectedCategory:e,userId:l?.id||"Not logged in",userLoggedIn:!!l,dataReceived:C?.length||0,firstTip:C?.[0]||null,rawData:C}),s(C||[]),y(!0),!C||C.length===0?(console.log("⚠️ TipFeed: No tips received from database"),N&&z.info("No tips found. The database might be empty.")):(console.log(`🎉 TipFeed: Successfully loaded ${C.length} tips`),N&&z.success(`Loaded ${C.length} tips`))}catch(C){console.error("💥 TipFeed: Error loading tips:",C),f(C instanceof Error?C.message:"Unknown error occurred"),N&&z.error("Failed to load tips. Please try again."),s([])}finally{a(!1),console.log("🏁 TipFeed: Finished loading tips")}};h.useEffect(()=>{console.log("🔄 TipFeed: Initial load useEffect triggered"),w()},[]),h.useEffect(()=>{console.log("🔄 TipFeed: Category change useEffect triggered"),console.log("📊 Dependencies changed:",{selectedCategory:e,userId:l?.id}),b&&w()},[e,l?.id]);const k=async()=>{console.log("🔄 TipFeed: Manual refresh triggered"),d(!0),await w(!0),d(!1)},v=async N=>{if(!l){z.error("Please sign in to like tips");return}try{const C=await Vt.toggleLike(N,l.id),T=r.find(P=>P.id===N);T&&i(N,{is_liked:C,likes_count:T.likes_count+(C?1:-1)}),z.success(C?"Tip liked! ❤️":"Tip unliked")}catch(C){console.error("Error toggling like:",C),z.error("Failed to update like")}},x=async N=>{if(!l){z.error("Please sign in to save tips");return}try{const C=await Vt.toggleSave(N,l.id),T=r.find(P=>P.id===N);T&&i(N,{is_saved:C,saves_count:T.saves_count+(C?1:-1)}),z.success(C?"Tip saved! 📌":"Tip unsaved")}catch(C){console.error("Error toggling save:",C),z.error("Failed to update save")}},S=N=>{console.log("Comment on tip:",N),z.info("Comments feature coming soon! 💬")},R=N=>{console.log("View user profile:",N),z.info("User profiles feature coming soon! 👤")},$=e==="all"?r:r.filter(N=>N.category===e);return console.log("🎨 TipFeed: Rendering with state:",{isLoading:t,tipsCount:r.length,filteredTipsCount:$.length,selectedCategory:e,error:u,hasInitialLoad:b,userLoggedIn:!!l}),u&&!t?o.jsxs("div",{className:"bg-background",children:[o.jsx(ia,{selectedCategory:e,onCategoryChange:n}),o.jsx("div",{className:"px-4 sm:px-6 py-4",children:o.jsx(et,{className:"border-red-200 bg-red-50",children:o.jsx(tt,{className:"p-4",children:o.jsxs("div",{className:"flex items-center gap-3 text-red-800",children:[o.jsx(Il,{className:"w-5 h-5 flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium",children:"Failed to load tips"}),o.jsx("p",{className:"text-sm mt-1",children:u}),o.jsxs(J,{onClick:k,variant:"outline",size:"sm",className:"mt-3",children:[o.jsx(Ys,{className:"w-4 h-4 mr-2"}),"Try Again"]})]})]})})})})]}):t&&r.length===0?o.jsxs("div",{className:"bg-background",children:[o.jsx(ia,{selectedCategory:e,onCategoryChange:n}),o.jsx("div",{className:"px-4 sm:px-6",children:o.jsx("div",{className:"space-y-4 py-4",children:[...Array(3)].map((N,C)=>o.jsxs("div",{className:"bg-card rounded-lg p-4 animate-pulse",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[o.jsx("div",{className:"w-12 h-12 bg-muted rounded-full"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"h-4 bg-muted rounded w-24 mb-1"}),o.jsx("div",{className:"h-3 bg-muted rounded w-32"})]})]}),o.jsx("div",{className:"h-16 bg-muted rounded mb-3"}),o.jsx("div",{className:"h-32 bg-muted rounded"})]},C))})})]}):o.jsxs("div",{className:"bg-background",children:[o.jsx(ia,{selectedCategory:e,onCategoryChange:n}),o.jsx("div",{className:"px-4 sm:px-6",children:o.jsxs("div",{className:"space-y-4 sm:space-y-6 py-4",children:[Cy,r.length>0&&o.jsx("div",{className:"flex justify-center",children:o.jsxs(J,{variant:"outline",size:"sm",onClick:k,disabled:c,className:"text-xs gap-2",children:[o.jsx(Ys,{className:`w-3 h-3 ${c?"animate-spin":""}`}),c?"Refreshing...":"Refresh"]})}),$.length===0&&!t&&b?o.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:o.jsx(Ny,{icon:hs,title:"No tips yet",description:r.length===0?"No tips found in the database. The database might be empty or there could be a connection issue.":`No tips found in the "${e}" category.`,action:o.jsxs("div",{className:"space-y-3",children:[l&&o.jsxs(J,{className:"bg-primary hover:bg-primary/90",children:[o.jsx(Kt,{className:"w-4 h-4 mr-2"}),"Write a tip"]}),r.length===0&&o.jsxs("div",{className:"text-center space-y-2",children:[o.jsxs(J,{variant:"outline",size:"sm",onClick:k,className:"text-xs",children:[o.jsx(Ys,{className:"w-3 h-3 mr-1"}),"Check for tips"]}),o.jsxs("div",{className:"text-xs text-muted-foreground",children:["Visit ",o.jsx("a",{href:"/dev",className:"text-primary hover:underline",children:"/dev"})," to add sample data or check database connection"]})]})]})})}):o.jsx("div",{className:"grid gap-4 sm:gap-6",children:$.map(N=>o.jsx(Qs,{tip:N,onLike:()=>v(N.id),onSave:()=>x(N.id),onComment:()=>S(N.id),onUserClick:()=>R(N.user_id)},N.id))})]})})]})}function Ey(){const{user:r}=It(),[e,t]=h.useState(!1);return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx("header",{className:"bg-card border-b border-border",children:o.jsxs("div",{className:"px-4 py-4 sm:px-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-foreground",children:"Nomading Now"}),o.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Discover real-time nomad tips"})]}),o.jsxs("div",{className:"hidden lg:flex items-center gap-4 flex-1 max-w-md",children:[o.jsxs("div",{className:"relative flex-1",children:[o.jsx(cn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),o.jsx(Ge,{placeholder:"Search by location or keyword...",className:"pl-10"})]}),r?o.jsxs(J,{size:"sm",className:"bg-primary hover:bg-primary/90 text-primary-foreground whitespace-nowrap",children:[o.jsx(Kt,{className:"w-4 h-4 mr-1"}),"Write tip"]}):o.jsxs(J,{size:"sm",variant:"outline",className:"whitespace-nowrap",onClick:()=>t(!0),children:[o.jsx(on,{className:"w-4 h-4 mr-1"}),"Sign In"]})]}),o.jsx("div",{className:"lg:hidden",children:r?o.jsxs(J,{size:"sm",className:"bg-primary hover:bg-primary/90 text-primary-foreground w-full sm:w-auto",children:[o.jsx(Kt,{className:"w-4 h-4 mr-1"}),"Write tip"]}):o.jsxs(J,{size:"sm",variant:"outline",className:"w-full sm:w-auto",onClick:()=>t(!0),children:[o.jsx(on,{className:"w-4 h-4 mr-1"}),"Sign In"]})})]}),o.jsx("div",{className:"mt-4 lg:hidden",children:o.jsxs("div",{className:"relative",children:[o.jsx(cn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),o.jsx(Ge,{placeholder:"Search by location or keyword...",className:"pl-10"})]})})]})}),o.jsx(Ty,{})]}),o.jsx($n,{open:e,onOpenChange:t})]})}const ui=h.forwardRef(({className:r,...e},t)=>o.jsx("textarea",{className:q("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...e}));ui.displayName="Textarea";var Hc=h.forwardRef((r,e)=>{const{children:t,...s}=r,n=h.Children.toArray(t),a=n.find(Ay);if(a){const i=a.props.children,l=n.map(c=>c===a?h.Children.count(i)>1?h.Children.only(null):h.isValidElement(i)?i.props.children:null:c);return o.jsx(Aa,{...s,ref:e,children:h.isValidElement(i)?h.cloneElement(i,void 0,l):null})}return o.jsx(Aa,{...s,ref:e,children:t})});Hc.displayName="Slot";var Aa=h.forwardRef((r,e)=>{const{children:t,...s}=r;if(h.isValidElement(t)){const n=Iy(t);return h.cloneElement(t,{...Py(s,t.props),ref:e?Qd(e,n):n})}return h.Children.count(t)>1?h.Children.only(null):null});Aa.displayName="SlotClone";var Ry=({children:r})=>o.jsx(o.Fragment,{children:r});function Ay(r){return h.isValidElement(r)&&r.type===Ry}function Py(r,e){const t={...e};for(const s in e){const n=r[s],a=e[s];/^on[A-Z]/.test(s)?n&&a?t[s]=(...l)=>{a(...l),n(...l)}:n&&(t[s]=n):s==="style"?t[s]={...n,...a}:s==="className"&&(t[s]=[n,a].filter(Boolean).join(" "))}return{...r,...t}}function Iy(r){let e=Object.getOwnPropertyDescriptor(r.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?r.ref:(e=Object.getOwnPropertyDescriptor(r,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?r.props.ref:r.props.ref||r.ref)}function Zc(r){const e=h.useRef({value:r,previous:r});return h.useMemo(()=>(e.current.value!==r&&(e.current.previous=e.current.value,e.current.value=r),e.current.previous),[r])}var Oy="VisuallyHidden",Kc=h.forwardRef((r,e)=>o.jsx(je.span,{...r,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...r.style}}));Kc.displayName=Oy;var Ly=[" ","Enter","ArrowUp","ArrowDown"],My=[" ","Enter"],Ms="Select",[Fn,zn,$y]=eu(Ms),[Hr,Hx]=Ts(Ms,[$y,Sn]),Wn=Sn(),[Dy,rr]=Hr(Ms),[Uy,By]=Hr(Ms),Gc=r=>{const{__scopeSelect:e,children:t,open:s,defaultOpen:n,onOpenChange:a,value:i,defaultValue:l,onValueChange:c,dir:d,name:u,autoComplete:f,disabled:p,required:m,form:b}=r,y=Wn(e),[w,k]=h.useState(null),[v,x]=h.useState(null),[S,R]=h.useState(!1),$=Uo(d),[N=!1,C]=en({prop:s,defaultProp:n,onChange:a}),[T,P]=en({prop:i,defaultProp:l,onChange:c}),Z=h.useRef(null),E=w?b||!!w.closest("form"):!0,[W,X]=h.useState(new Set),oe=Array.from(W).map(ae=>ae.props.value).join(";");return o.jsx(Mo,{...y,children:o.jsxs(Dy,{required:m,scope:e,trigger:w,onTriggerChange:k,valueNode:v,onValueNodeChange:x,valueNodeHasChildren:S,onValueNodeHasChildrenChange:R,contentId:$a(),value:T,onValueChange:P,open:N,onOpenChange:C,dir:$,triggerPointerDownPosRef:Z,disabled:p,children:[o.jsx(Fn.Provider,{scope:e,children:o.jsx(Uy,{scope:r.__scopeSelect,onNativeOptionAdd:h.useCallback(ae=>{X(me=>new Set(me).add(ae))},[]),onNativeOptionRemove:h.useCallback(ae=>{X(me=>{const Pe=new Set(me);return Pe.delete(ae),Pe})},[]),children:t})}),E?o.jsxs(wd,{"aria-hidden":!0,required:m,tabIndex:-1,name:u,autoComplete:f,value:T,onChange:ae=>P(ae.target.value),disabled:p,form:b,children:[T===void 0?o.jsx("option",{value:""}):null,Array.from(W)]},oe):null]})})};Gc.displayName=Ms;var Jc="SelectTrigger",Yc=h.forwardRef((r,e)=>{const{__scopeSelect:t,disabled:s=!1,...n}=r,a=Wn(t),i=rr(Jc,t),l=i.disabled||s,c=Me(e,i.onTriggerChange),d=zn(t),u=h.useRef("touch"),[f,p,m]=bd(y=>{const w=d().filter(x=>!x.disabled),k=w.find(x=>x.value===i.value),v=_d(w,y,k);v!==void 0&&i.onValueChange(v.value)}),b=y=>{l||(i.onOpenChange(!0),m()),y&&(i.triggerPointerDownPosRef.current={x:Math.round(y.pageX),y:Math.round(y.pageY)})};return o.jsx($o,{asChild:!0,...a,children:o.jsx(je.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":xd(i.value)?"":void 0,...n,ref:c,onClick:le(n.onClick,y=>{y.currentTarget.focus(),u.current!=="mouse"&&b(y)}),onPointerDown:le(n.onPointerDown,y=>{u.current=y.pointerType;const w=y.target;w.hasPointerCapture(y.pointerId)&&w.releasePointerCapture(y.pointerId),y.button===0&&y.ctrlKey===!1&&y.pointerType==="mouse"&&(b(y),y.preventDefault())}),onKeyDown:le(n.onKeyDown,y=>{const w=f.current!=="";!(y.ctrlKey||y.altKey||y.metaKey)&&y.key.length===1&&p(y.key),!(w&&y.key===" ")&&Ly.includes(y.key)&&(b(),y.preventDefault())})})})});Yc.displayName=Jc;var Xc="SelectValue",Qc=h.forwardRef((r,e)=>{const{__scopeSelect:t,className:s,style:n,children:a,placeholder:i="",...l}=r,c=rr(Xc,t),{onValueNodeHasChildrenChange:d}=c,u=a!==void 0,f=Me(e,c.onValueNodeChange);return pt(()=>{d(u)},[d,u]),o.jsx(je.span,{...l,ref:f,style:{pointerEvents:"none"},children:xd(c.value)?o.jsx(o.Fragment,{children:i}):a})});Qc.displayName=Xc;var Vy="SelectIcon",ed=h.forwardRef((r,e)=>{const{__scopeSelect:t,children:s,...n}=r;return o.jsx(je.span,{"aria-hidden":!0,...n,ref:e,children:s||"▼"})});ed.displayName=Vy;var Fy="SelectPortal",td=r=>o.jsx(tu,{asChild:!0,...r});td.displayName=Fy;var vr="SelectContent",rd=h.forwardRef((r,e)=>{const t=rr(vr,r.__scopeSelect),[s,n]=h.useState();if(pt(()=>{n(new DocumentFragment)},[]),!t.open){const a=s;return a?Bo.createPortal(o.jsx(sd,{scope:r.__scopeSelect,children:o.jsx(Fn.Slot,{scope:r.__scopeSelect,children:o.jsx("div",{children:r.children})})}),a):null}return o.jsx(nd,{...r,ref:e})});rd.displayName=vr;var ct=10,[sd,sr]=Hr(vr),zy="SelectContentImpl",nd=h.forwardRef((r,e)=>{const{__scopeSelect:t,position:s="item-aligned",onCloseAutoFocus:n,onEscapeKeyDown:a,onPointerDownOutside:i,side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:f,collisionBoundary:p,collisionPadding:m,sticky:b,hideWhenDetached:y,avoidCollisions:w,...k}=r,v=rr(vr,t),[x,S]=h.useState(null),[R,$]=h.useState(null),N=Me(e,V=>S(V)),[C,T]=h.useState(null),[P,Z]=h.useState(null),E=zn(t),[W,X]=h.useState(!1),oe=h.useRef(!1);h.useEffect(()=>{if(x)return ru(x)},[x]),su();const ae=h.useCallback(V=>{const[we,...Se]=E().map(_e=>_e.ref.current),[fe]=Se.slice(-1),pe=document.activeElement;for(const _e of V)if(_e===pe||(_e?.scrollIntoView({block:"nearest"}),_e===we&&R&&(R.scrollTop=0),_e===fe&&R&&(R.scrollTop=R.scrollHeight),_e?.focus(),document.activeElement!==pe))return},[E,R]),me=h.useCallback(()=>ae([C,x]),[ae,C,x]);h.useEffect(()=>{W&&me()},[W,me]);const{onOpenChange:Pe,triggerPointerDownPosRef:K}=v;h.useEffect(()=>{if(x){let V={x:0,y:0};const we=fe=>{V={x:Math.abs(Math.round(fe.pageX)-(K.current?.x??0)),y:Math.abs(Math.round(fe.pageY)-(K.current?.y??0))}},Se=fe=>{V.x<=10&&V.y<=10?fe.preventDefault():x.contains(fe.target)||Pe(!1),document.removeEventListener("pointermove",we),K.current=null};return K.current!==null&&(document.addEventListener("pointermove",we),document.addEventListener("pointerup",Se,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",we),document.removeEventListener("pointerup",Se,{capture:!0})}}},[x,Pe,K]),h.useEffect(()=>{const V=()=>Pe(!1);return window.addEventListener("blur",V),window.addEventListener("resize",V),()=>{window.removeEventListener("blur",V),window.removeEventListener("resize",V)}},[Pe]);const[Ce,st]=bd(V=>{const we=E().filter(pe=>!pe.disabled),Se=we.find(pe=>pe.ref.current===document.activeElement),fe=_d(we,V,Se);fe&&setTimeout(()=>fe.ref.current.focus())}),de=h.useCallback((V,we,Se)=>{const fe=!oe.current&&!Se;(v.value!==void 0&&v.value===we||fe)&&(T(V),fe&&(oe.current=!0))},[v.value]),ue=h.useCallback(()=>x?.focus(),[x]),he=h.useCallback((V,we,Se)=>{const fe=!oe.current&&!Se;(v.value!==void 0&&v.value===we||fe)&&Z(V)},[v.value]),Te=s==="popper"?Pa:ad,We=Te===Pa?{side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:f,collisionBoundary:p,collisionPadding:m,sticky:b,hideWhenDetached:y,avoidCollisions:w}:{};return o.jsx(sd,{scope:t,content:x,viewport:R,onViewportChange:$,itemRefCallback:de,selectedItem:C,onItemLeave:ue,itemTextRefCallback:he,focusSelectedItem:me,selectedItemText:P,position:s,isPositioned:W,searchRef:Ce,children:o.jsx(nu,{as:Hc,allowPinchZoom:!0,children:o.jsx(au,{asChild:!0,trapped:v.open,onMountAutoFocus:V=>{V.preventDefault()},onUnmountAutoFocus:le(n,V=>{v.trigger?.focus({preventScroll:!0}),V.preventDefault()}),children:o.jsx(Oo,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:V=>V.preventDefault(),onDismiss:()=>v.onOpenChange(!1),children:o.jsx(Te,{role:"listbox",id:v.contentId,"data-state":v.open?"open":"closed",dir:v.dir,onContextMenu:V=>V.preventDefault(),...k,...We,onPlaced:()=>X(!0),ref:N,style:{display:"flex",flexDirection:"column",outline:"none",...k.style},onKeyDown:le(k.onKeyDown,V=>{const we=V.ctrlKey||V.altKey||V.metaKey;if(V.key==="Tab"&&V.preventDefault(),!we&&V.key.length===1&&st(V.key),["ArrowUp","ArrowDown","Home","End"].includes(V.key)){let fe=E().filter(pe=>!pe.disabled).map(pe=>pe.ref.current);if(["ArrowUp","End"].includes(V.key)&&(fe=fe.slice().reverse()),["ArrowUp","ArrowDown"].includes(V.key)){const pe=V.target,_e=fe.indexOf(pe);fe=fe.slice(_e+1)}setTimeout(()=>ae(fe)),V.preventDefault()}})})})})})})});nd.displayName=zy;var Wy="SelectItemAlignedPosition",ad=h.forwardRef((r,e)=>{const{__scopeSelect:t,onPlaced:s,...n}=r,a=rr(vr,t),i=sr(vr,t),[l,c]=h.useState(null),[d,u]=h.useState(null),f=Me(e,N=>u(N)),p=zn(t),m=h.useRef(!1),b=h.useRef(!0),{viewport:y,selectedItem:w,selectedItemText:k,focusSelectedItem:v}=i,x=h.useCallback(()=>{if(a.trigger&&a.valueNode&&l&&d&&y&&w&&k){const N=a.trigger.getBoundingClientRect(),C=d.getBoundingClientRect(),T=a.valueNode.getBoundingClientRect(),P=k.getBoundingClientRect();if(a.dir!=="rtl"){const pe=P.left-C.left,_e=T.left-pe,Xe=N.left-_e,Qe=N.width+Xe,Ot=Math.max(Qe,C.width),Lt=window.innerWidth-ct,nr=Ra(_e,[ct,Math.max(ct,Lt-Ot)]);l.style.minWidth=Qe+"px",l.style.left=nr+"px"}else{const pe=C.right-P.right,_e=window.innerWidth-T.right-pe,Xe=window.innerWidth-N.right-_e,Qe=N.width+Xe,Ot=Math.max(Qe,C.width),Lt=window.innerWidth-ct,nr=Ra(_e,[ct,Math.max(ct,Lt-Ot)]);l.style.minWidth=Qe+"px",l.style.right=nr+"px"}const Z=p(),E=window.innerHeight-ct*2,W=y.scrollHeight,X=window.getComputedStyle(d),oe=parseInt(X.borderTopWidth,10),ae=parseInt(X.paddingTop,10),me=parseInt(X.borderBottomWidth,10),Pe=parseInt(X.paddingBottom,10),K=oe+ae+W+Pe+me,Ce=Math.min(w.offsetHeight*5,K),st=window.getComputedStyle(y),de=parseInt(st.paddingTop,10),ue=parseInt(st.paddingBottom,10),he=N.top+N.height/2-ct,Te=E-he,We=w.offsetHeight/2,V=w.offsetTop+We,we=oe+ae+V,Se=K-we;if(we<=he){const pe=Z.length>0&&w===Z[Z.length-1].ref.current;l.style.bottom="0px";const _e=d.clientHeight-y.offsetTop-y.offsetHeight,Xe=Math.max(Te,We+(pe?ue:0)+_e+me),Qe=we+Xe;l.style.height=Qe+"px"}else{const pe=Z.length>0&&w===Z[0].ref.current;l.style.top="0px";const Xe=Math.max(he,oe+y.offsetTop+(pe?de:0)+We)+Se;l.style.height=Xe+"px",y.scrollTop=we-he+y.offsetTop}l.style.margin=`${ct}px 0`,l.style.minHeight=Ce+"px",l.style.maxHeight=E+"px",s?.(),requestAnimationFrame(()=>m.current=!0)}},[p,a.trigger,a.valueNode,l,d,y,w,k,a.dir,s]);pt(()=>x(),[x]);const[S,R]=h.useState();pt(()=>{d&&R(window.getComputedStyle(d).zIndex)},[d]);const $=h.useCallback(N=>{N&&b.current===!0&&(x(),v?.(),b.current=!1)},[x,v]);return o.jsx(Hy,{scope:t,contentWrapper:l,shouldExpandOnScrollRef:m,onScrollButtonChange:$,children:o.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S},children:o.jsx(je.div,{...n,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...n.style}})})})});ad.displayName=Wy;var qy="SelectPopperPosition",Pa=h.forwardRef((r,e)=>{const{__scopeSelect:t,align:s="start",collisionPadding:n=ct,...a}=r,i=Wn(t);return o.jsx(Lo,{...i,...a,ref:e,align:s,collisionPadding:n,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Pa.displayName=qy;var[Hy,hi]=Hr(vr,{}),Ia="SelectViewport",id=h.forwardRef((r,e)=>{const{__scopeSelect:t,nonce:s,...n}=r,a=sr(Ia,t),i=hi(Ia,t),l=Me(e,a.onViewportChange),c=h.useRef(0);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),o.jsx(Fn.Slot,{scope:t,children:o.jsx(je.div,{"data-radix-select-viewport":"",role:"presentation",...n,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...n.style},onScroll:le(n.onScroll,d=>{const u=d.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:p}=i;if(p?.current&&f){const m=Math.abs(c.current-u.scrollTop);if(m>0){const b=window.innerHeight-ct*2,y=parseFloat(f.style.minHeight),w=parseFloat(f.style.height),k=Math.max(y,w);if(k<b){const v=k+m,x=Math.min(b,v),S=v-x;f.style.height=x+"px",f.style.bottom==="0px"&&(u.scrollTop=S>0?S:0,f.style.justifyContent="flex-end")}}}c.current=u.scrollTop})})})]})});id.displayName=Ia;var od="SelectGroup",[Zy,Ky]=Hr(od),Gy=h.forwardRef((r,e)=>{const{__scopeSelect:t,...s}=r,n=$a();return o.jsx(Zy,{scope:t,id:n,children:o.jsx(je.div,{role:"group","aria-labelledby":n,...s,ref:e})})});Gy.displayName=od;var ld="SelectLabel",cd=h.forwardRef((r,e)=>{const{__scopeSelect:t,...s}=r,n=Ky(ld,t);return o.jsx(je.div,{id:n.id,...s,ref:e})});cd.displayName=ld;var jn="SelectItem",[Jy,dd]=Hr(jn),ud=h.forwardRef((r,e)=>{const{__scopeSelect:t,value:s,disabled:n=!1,textValue:a,...i}=r,l=rr(jn,t),c=sr(jn,t),d=l.value===s,[u,f]=h.useState(a??""),[p,m]=h.useState(!1),b=Me(e,v=>c.itemRefCallback?.(v,s,n)),y=$a(),w=h.useRef("touch"),k=()=>{n||(l.onValueChange(s),l.onOpenChange(!1))};if(s==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return o.jsx(Jy,{scope:t,value:s,disabled:n,textId:y,isSelected:d,onItemTextChange:h.useCallback(v=>{f(x=>x||(v?.textContent??"").trim())},[]),children:o.jsx(Fn.ItemSlot,{scope:t,value:s,disabled:n,textValue:u,children:o.jsx(je.div,{role:"option","aria-labelledby":y,"data-highlighted":p?"":void 0,"aria-selected":d&&p,"data-state":d?"checked":"unchecked","aria-disabled":n||void 0,"data-disabled":n?"":void 0,tabIndex:n?void 0:-1,...i,ref:b,onFocus:le(i.onFocus,()=>m(!0)),onBlur:le(i.onBlur,()=>m(!1)),onClick:le(i.onClick,()=>{w.current!=="mouse"&&k()}),onPointerUp:le(i.onPointerUp,()=>{w.current==="mouse"&&k()}),onPointerDown:le(i.onPointerDown,v=>{w.current=v.pointerType}),onPointerMove:le(i.onPointerMove,v=>{w.current=v.pointerType,n?c.onItemLeave?.():w.current==="mouse"&&v.currentTarget.focus({preventScroll:!0})}),onPointerLeave:le(i.onPointerLeave,v=>{v.currentTarget===document.activeElement&&c.onItemLeave?.()}),onKeyDown:le(i.onKeyDown,v=>{c.searchRef?.current!==""&&v.key===" "||(My.includes(v.key)&&k(),v.key===" "&&v.preventDefault())})})})})});ud.displayName=jn;var ts="SelectItemText",hd=h.forwardRef((r,e)=>{const{__scopeSelect:t,className:s,style:n,...a}=r,i=rr(ts,t),l=sr(ts,t),c=dd(ts,t),d=By(ts,t),[u,f]=h.useState(null),p=Me(e,k=>f(k),c.onItemTextChange,k=>l.itemTextRefCallback?.(k,c.value,c.disabled)),m=u?.textContent,b=h.useMemo(()=>o.jsx("option",{value:c.value,disabled:c.disabled,children:m},c.value),[c.disabled,c.value,m]),{onNativeOptionAdd:y,onNativeOptionRemove:w}=d;return pt(()=>(y(b),()=>w(b)),[y,w,b]),o.jsxs(o.Fragment,{children:[o.jsx(je.span,{id:c.textId,...a,ref:p}),c.isSelected&&i.valueNode&&!i.valueNodeHasChildren?Bo.createPortal(a.children,i.valueNode):null]})});hd.displayName=ts;var fd="SelectItemIndicator",md=h.forwardRef((r,e)=>{const{__scopeSelect:t,...s}=r;return dd(fd,t).isSelected?o.jsx(je.span,{"aria-hidden":!0,...s,ref:e}):null});md.displayName=fd;var Oa="SelectScrollUpButton",pd=h.forwardRef((r,e)=>{const t=sr(Oa,r.__scopeSelect),s=hi(Oa,r.__scopeSelect),[n,a]=h.useState(!1),i=Me(e,s.onScrollButtonChange);return pt(()=>{if(t.viewport&&t.isPositioned){let l=function(){const d=c.scrollTop>0;a(d)};const c=t.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[t.viewport,t.isPositioned]),n?o.jsx(vd,{...r,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=t;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});pd.displayName=Oa;var La="SelectScrollDownButton",gd=h.forwardRef((r,e)=>{const t=sr(La,r.__scopeSelect),s=hi(La,r.__scopeSelect),[n,a]=h.useState(!1),i=Me(e,s.onScrollButtonChange);return pt(()=>{if(t.viewport&&t.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,u=Math.ceil(c.scrollTop)<d;a(u)};const c=t.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[t.viewport,t.isPositioned]),n?o.jsx(vd,{...r,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=t;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});gd.displayName=La;var vd=h.forwardRef((r,e)=>{const{__scopeSelect:t,onAutoScroll:s,...n}=r,a=sr("SelectScrollButton",t),i=h.useRef(null),l=zn(t),c=h.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return h.useEffect(()=>()=>c(),[c]),pt(()=>{l().find(u=>u.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[l]),o.jsx(je.div,{"aria-hidden":!0,...n,ref:e,style:{flexShrink:0,...n.style},onPointerDown:le(n.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(s,50))}),onPointerMove:le(n.onPointerMove,()=>{a.onItemLeave?.(),i.current===null&&(i.current=window.setInterval(s,50))}),onPointerLeave:le(n.onPointerLeave,()=>{c()})})}),Yy="SelectSeparator",yd=h.forwardRef((r,e)=>{const{__scopeSelect:t,...s}=r;return o.jsx(je.div,{"aria-hidden":!0,...s,ref:e})});yd.displayName=Yy;var Ma="SelectArrow",Xy=h.forwardRef((r,e)=>{const{__scopeSelect:t,...s}=r,n=Wn(t),a=rr(Ma,t),i=sr(Ma,t);return a.open&&i.position==="popper"?o.jsx(Do,{...n,...s,ref:e}):null});Xy.displayName=Ma;function xd(r){return r===""||r===void 0}var wd=h.forwardRef((r,e)=>{const{value:t,...s}=r,n=h.useRef(null),a=Me(e,n),i=Zc(t);return h.useEffect(()=>{const l=n.current,c=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(c,"value").set;if(i!==t&&u){const f=new Event("change",{bubbles:!0});u.call(l,t),l.dispatchEvent(f)}},[i,t]),o.jsx(Kc,{asChild:!0,children:o.jsx("select",{...s,ref:a,defaultValue:t})})});wd.displayName="BubbleSelect";function bd(r){const e=At(r),t=h.useRef(""),s=h.useRef(0),n=h.useCallback(i=>{const l=t.current+i;e(l),function c(d){t.current=d,window.clearTimeout(s.current),d!==""&&(s.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),a=h.useCallback(()=>{t.current="",window.clearTimeout(s.current)},[]);return h.useEffect(()=>()=>window.clearTimeout(s.current),[]),[t,n,a]}function _d(r,e,t){const n=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,a=t?r.indexOf(t):-1;let i=Qy(r,Math.max(a,0));n.length===1&&(i=i.filter(d=>d!==t));const c=i.find(d=>d.textValue.toLowerCase().startsWith(n.toLowerCase()));return c!==t?c:void 0}function Qy(r,e){return r.map((t,s)=>r[(e+s)%r.length])}var ex=Gc,kd=Yc,tx=Qc,rx=ed,sx=td,jd=rd,nx=id,Sd=cd,Nd=ud,ax=hd,ix=md,Cd=pd,Td=gd,Ed=yd;const Rd=ex,Ad=tx,fi=h.forwardRef(({className:r,children:e,...t},s)=>o.jsxs(kd,{ref:s,className:q("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r),...t,children:[e,o.jsx(rx,{asChild:!0,children:o.jsx(Pl,{className:"h-4 w-4 opacity-50"})})]}));fi.displayName=kd.displayName;const Pd=h.forwardRef(({className:r,...e},t)=>o.jsx(Cd,{ref:t,className:q("flex cursor-default items-center justify-center py-1",r),...e,children:o.jsx(Tp,{className:"h-4 w-4"})}));Pd.displayName=Cd.displayName;const Id=h.forwardRef(({className:r,...e},t)=>o.jsx(Td,{ref:t,className:q("flex cursor-default items-center justify-center py-1",r),...e,children:o.jsx(Pl,{className:"h-4 w-4"})}));Id.displayName=Td.displayName;const mi=h.forwardRef(({className:r,children:e,position:t="popper",...s},n)=>o.jsx(sx,{children:o.jsxs(jd,{ref:n,className:q("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:t,...s,children:[o.jsx(Pd,{}),o.jsx(nx,{className:q("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),o.jsx(Id,{})]})}));mi.displayName=jd.displayName;const ox=h.forwardRef(({className:r,...e},t)=>o.jsx(Sd,{ref:t,className:q("py-1.5 pl-8 pr-2 text-sm font-semibold",r),...e}));ox.displayName=Sd.displayName;const pi=h.forwardRef(({className:r,children:e,...t},s)=>o.jsxs(Nd,{ref:s,className:q("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...t,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(ix,{children:o.jsx(Cp,{className:"h-4 w-4"})})}),o.jsx(ax,{children:e})]}));pi.displayName=Nd.displayName;const lx=h.forwardRef(({className:r,...e},t)=>o.jsx(Ed,{ref:t,className:q("-mx-1 my-1 h-px bg-muted",r),...e}));lx.displayName=Ed.displayName;const cx=Je.object({content:Je.string().min(10,"Tip content must be at least 10 characters"),category:Je.string().min(1,"Please select a category"),images:Je.array(Je.string()).optional()});function dx({open:r,onOpenChange:e,location:t,onTipCreated:s}){const{user:n}=It(),[a,i]=h.useState(!1),[l,c]=h.useState([]),[d,u]=h.useState(null),[f,p]=h.useState(!1),m=ja({resolver:Sa(cx),defaultValues:{content:"",category:"",images:[]}});h.useEffect(()=>{t&&r&&b(t.latitude,t.longitude)},[t,r]);const b=async(x,S)=>{p(!0);try{const $=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${x}&lon=${S}&zoom=18&addressdetails=1`)).json();if($&&$.address){const N=$.address,C=$.display_name||"",T=[];N.road&&T.push(N.road),N.suburb&&T.push(N.suburb),(N.city||N.town||N.village)&&T.push(N.city||N.town||N.village),u({city:N.city||N.town||N.village||N.suburb||"Unknown City",country:N.country||"Unknown Country",address:C,shortAddress:T.join(", ")||C})}else u({city:t?.city||"Unknown City",country:t?.country||"Unknown Country",address:t?.address,shortAddress:t?.address||`${x.toFixed(4)}, ${S.toFixed(4)}`})}catch(R){console.error("Error fetching location info:",R),u({city:t?.city||"Unknown City",country:t?.country||"Unknown Country",address:t?.address,shortAddress:t?.address||`${x.toFixed(4)}, ${S.toFixed(4)}`})}finally{p(!1)}},y=()=>{const x=prompt("Enter image URL (from Pexels or other source):");if(x&&x.trim()){const S=[...l,x.trim()];c(S),m.setValue("images",S)}},w=x=>{const S=l.filter((R,$)=>$!==x);c(S),m.setValue("images",S)},k=async x=>{if(!n){z.error("Please sign in to create tips");return}if(!t||!d){z.error("Location information is required");return}i(!0);try{await Cs.createTip({user_id:n.id,content:x.content,category:x.category,images:l.length>0?l:void 0,location:{latitude:t.latitude,longitude:t.longitude,city:d.city,country:d.country,address:d.address}}),z.success("🎉 Tip created successfully!"),e(!1),m.reset(),c([]),u(null),s?.()}catch(S){console.error("Error creating tip:",S),z.error("Failed to create tip. Please try again.")}finally{i(!1)}},v=()=>{e(!1),m.reset(),c([]),u(null)};return n?o.jsx(ti,{open:r,onOpenChange:v,children:o.jsxs(On,{className:"sm:max-w-lg max-h-[90vh] overflow-y-auto",children:[o.jsxs(Ln,{children:[o.jsxs(Mn,{className:"flex items-center gap-2",children:[o.jsx(Kt,{className:"w-5 h-5"}),"Share a Tip"]}),o.jsx(ri,{children:"Share your experience at this location with fellow nomads"})]}),o.jsx("div",{className:"bg-muted rounded-lg p-4 mb-4",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"flex-shrink-0 mt-0.5",children:f?o.jsx("div",{className:"w-4 h-4 border border-primary border-t-transparent rounded-full animate-spin"}):o.jsx(hs,{className:"w-4 h-4 text-primary"})}),o.jsx("div",{className:"flex-1 min-w-0",children:f?o.jsxs("div",{className:"space-y-2",children:[o.jsx("div",{className:"h-4 bg-muted-foreground/20 rounded animate-pulse"}),o.jsx("div",{className:"h-3 bg-muted-foreground/20 rounded w-3/4 animate-pulse"})]}):d?o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{className:"font-medium text-sm",children:[d.city,", ",d.country]}),d.shortAddress&&o.jsx("div",{className:"text-muted-foreground text-xs leading-relaxed break-words",children:d.shortAddress}),o.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[o.jsx(ln,{className:"w-3 h-3"}),o.jsxs("span",{children:[t?.latitude.toFixed(4),", ",t?.longitude.toFixed(4)]})]})]}):o.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading location information..."})})]})}),o.jsxs("form",{onSubmit:m.handleSubmit(k),className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Be,{htmlFor:"category",children:"Category"}),o.jsxs(Rd,{onValueChange:x=>m.setValue("category",x),children:[o.jsx(fi,{children:o.jsx(Ad,{placeholder:"Select a category"})}),o.jsx(mi,{children:Dn.map(x=>o.jsx(pi,{value:x.id,children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{children:x.emoji}),o.jsx("span",{children:x.label})]})},x.id))})]}),m.formState.errors.category&&o.jsx("p",{className:"text-sm text-destructive",children:m.formState.errors.category.message})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Be,{htmlFor:"content",children:"Your Tip"}),o.jsx(ui,{id:"content",placeholder:"Share your experience... What makes this place special? Any tips for fellow nomads?",className:"min-h-[100px] resize-none",...m.register("content")}),m.formState.errors.content&&o.jsx("p",{className:"text-sm text-destructive",children:m.formState.errors.content.message})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(Be,{children:"Images (optional)"}),o.jsxs(J,{type:"button",variant:"outline",size:"sm",onClick:y,className:"text-xs h-8",children:[o.jsx(Np,{className:"w-3 h-3 mr-1"}),"Add Image"]})]}),l.length>0&&o.jsx("div",{className:"grid grid-cols-2 gap-3",children:l.map((x,S)=>o.jsxs("div",{className:"relative group",children:[o.jsx("div",{className:"aspect-video bg-muted rounded-md overflow-hidden",children:o.jsx("img",{src:x,alt:`Tip image ${S+1}`,className:"w-full h-full object-cover",onError:R=>{R.currentTarget.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiBmaWxsPSIjZjNmNGY2Ii8+CjxwYXRoIGQ9Ik0xMiAxNmMtMi4yMSAwLTQtMS43OS00LTRzMS43OS00IDQtNCA0IDEuNzkgNCA0LTEuNzkgNC00IDR6bTAtNmMtMS4xIDAtMiAuOS0yIDJzLjkgMiAyIDIgMi0uOSAyLTItLjktMi0yLTJ6IiBmaWxsPSIjOWNhM2FmIi8+Cjwvc3ZnPgo="}})}),o.jsx(J,{type:"button",variant:"destructive",size:"sm",className:"absolute top-1 right-1 w-6 h-6 p-0 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>w(S),children:o.jsx(Ul,{className:"w-3 h-3"})})]},S))})]}),o.jsxs("div",{className:"flex gap-3 pt-4",children:[o.jsx(J,{type:"button",variant:"outline",onClick:v,className:"flex-1",disabled:a,children:"Cancel"}),o.jsxs(J,{type:"submit",disabled:a||f,className:"flex-1",children:[a&&o.jsx(ba,{className:"mr-2 h-4 w-4 animate-spin"}),a?"Creating...":"Share Tip"]})]})]})]})}):null}const ux=ou,hx=lu,fx=h.forwardRef(({className:r,inset:e,children:t,...s},n)=>o.jsxs(Vo,{ref:n,className:q("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",r),...s,children:[t,o.jsx(Rv,{className:"ml-auto h-4 w-4"})]}));fx.displayName=Vo.displayName;const mx=h.forwardRef(({className:r,...e},t)=>o.jsx(Fo,{ref:t,className:q("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...e}));mx.displayName=Fo.displayName;const Od=h.forwardRef(({className:r,sideOffset:e=4,...t},s)=>o.jsx(iu,{children:o.jsx(zo,{ref:s,sideOffset:e,className:q("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...t})}));Od.displayName=zo.displayName;const Ld=h.forwardRef(({className:r,inset:e,...t},s)=>o.jsx(Wo,{ref:s,className:q("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",r),...t}));Ld.displayName=Wo.displayName;const px=h.forwardRef(({className:r,children:e,checked:t,...s},n)=>o.jsxs(qo,{ref:n,className:q("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),checked:t,...s,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(Ho,{children:o.jsx(Tv,{className:"h-4 w-4"})})}),e]}));px.displayName=qo.displayName;const gx=h.forwardRef(({className:r,children:e,...t},s)=>o.jsxs(Zo,{ref:s,className:q("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...t,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(Ho,{children:o.jsx(Ov,{className:"h-4 w-4 fill-current"})})}),e]}));gx.displayName=Zo.displayName;const Md=h.forwardRef(({className:r,inset:e,...t},s)=>o.jsx(Ko,{ref:s,className:q("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",r),...t}));Md.displayName=Ko.displayName;const $d=h.forwardRef(({className:r,...e},t)=>o.jsx(Go,{ref:t,className:q("-mx-1 my-1 h-px bg-muted",r),...e}));$d.displayName=Go.displayName;delete Rs.Icon.Default.prototype._getIconUrl;Rs.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});const Js={lat:13.7563,lng:100.5018},No={voyager:{name:"Voyager",url:"https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png",attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>'},clean:{name:"Clean",url:"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>'},standard:{name:"Standard",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'},minimal:{name:"Minimal",url:"https://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}{r}.png",attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}},vx=(r,e)=>{const t=`
    <svg width="40" height="40" viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
      <circle cx="20" cy="20" r="18" fill="#ffc0cb" stroke="#ffffff" stroke-width="3"/>
      <text x="20" y="26" text-anchor="middle" font-size="16" fill="black">${e}</text>
    </svg>
  `,s=btoa(unescape(encodeURIComponent(t)));return new Rs.Icon({iconUrl:`data:image/svg+xml;base64,${s}`,iconSize:[40,40],iconAnchor:[20,40],popupAnchor:[0,-40]})},yx=()=>{const e=btoa(unescape(encodeURIComponent(`
    <svg width="40" height="40" viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
      <circle cx="20" cy="20" r="18" fill="#10b981" stroke="#ffffff" stroke-width="3"/>
      <text x="20" y="26" text-anchor="middle" font-size="20" fill="white">+</text>
    </svg>
  `)));return new Rs.Icon({iconUrl:`data:image/svg+xml;base64,${e}`,iconSize:[40,40],iconAnchor:[20,40],popupAnchor:[0,-40]})},xx=(r=!1)=>{const e=r?"#3b82f6":"#10b981",t=r?"#1d4ed8":"#059669",s=`
    <svg width="50" height="50" viewBox="0 0 50 50" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <radialGradient id="userGradient" cx="50%" cy="50%" r="50%">
          <stop offset="0%" style="stop-color:${e};stop-opacity:1" />
          <stop offset="100%" style="stop-color:${t};stop-opacity:1" />
        </radialGradient>
        <filter id="glow">
          <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
          <feMerge> 
            <feMergeNode in="coloredBlur"/>
            <feMergeNode in="SourceGraphic"/>
          </feMerge>
        </filter>
      </defs>
      <!-- Outer pulse ring -->
      <circle cx="25" cy="25" r="22" fill="${e}" opacity="0.3" stroke="${t}" stroke-width="1"/>
      <!-- Inner circle -->
      <circle cx="25" cy="25" r="15" fill="url(#userGradient)" stroke="#ffffff" stroke-width="3" filter="url(#glow)"/>
      <!-- Center dot -->
      <circle cx="25" cy="25" r="6" fill="#ffffff"/>
      <!-- Navigation icon -->
      <path d="M25 18 L28 25 L25 32 L22 25 Z" fill="${t}"/>
    </svg>
  `,n=btoa(unescape(encodeURIComponent(s)));return new Rs.Icon({iconUrl:`data:image/svg+xml;base64,${n}`,iconSize:[50,50],iconAnchor:[25,25],popupAnchor:[0,-25],className:"user-location-marker"})};function wx({center:r,zoom:e}){const t=vu();return h.useEffect(()=>{t.setView(r,e)},[t,r,e]),null}function bx({onLocationSelect:r,isEnabled:e}){return yu({click:t=>{e&&r(t.latlng.lat,t.latlng.lng)}}),null}function _x({tips:r,center:e,zoom:t=15,onTipClick:s,onTipCreated:n}){const{user:a}=It(),[i,l]=h.useState(null),[c,d]=h.useState(!1),[u,f]=h.useState(null),[p,m]=h.useState(!1),[b,y]=h.useState(null),[w,k]=h.useState("voyager"),[v,x]=h.useState(null),[S,R]=h.useState(!0);h.useEffect(()=>{(()=>{"geolocation"in navigator?navigator.geolocation.getCurrentPosition(W=>{const{latitude:X,longitude:oe}=W.coords;x({lat:X,lng:oe,isActual:!0,name:"Your Location"}),console.log("✅ 실제 사용자 위치 사용:",{latitude:X,longitude:oe})},W=>{console.log("⚠️ 위치 권한 거부 또는 오류, 방콕 기본 위치 사용:",W.message),x({lat:Js.lat,lng:Js.lng,isActual:!1,name:"Bangkok (Demo Location)"}),z.info("위치 권한이 없어 방콕을 기본 위치로 사용합니다 📍")},{enableHighAccuracy:!0,timeout:5e3,maximumAge:3e5}):(console.log("⚠️ Geolocation 미지원, 방콕 기본 위치 사용"),x({lat:Js.lat,lng:Js.lng,isActual:!1,name:"Bangkok (Demo Location)"}),z.info("위치 서비스가 지원되지 않아 방콕을 기본 위치로 사용합니다 📍"))})()},[]);const $=E=>{l(E),s?.(E)},N=E=>{const W=`https://www.google.com/maps/search/?api=1&query=${E.location.latitude},${E.location.longitude}`;window.open(W,"_blank")},C=(E,W)=>{if(!a){z.error("Please sign in to add tips");return}y({lat:E,lng:W}),f({latitude:E,longitude:W}),d(!0),m(!1)},T=()=>{y(null),n?.()},P=()=>{if(!a){z.error("Please sign in to add tips");return}m(!p),y(null)},Z=No[w];return o.jsxs("div",{className:"relative w-full h-full",children:[o.jsxs("div",{className:"absolute top-4 right-4 z-[1000] flex flex-col gap-y-2",children:[a&&o.jsx("div",{className:"",children:o.jsx(J,{onClick:P,className:`shadow-lg ${p?"bg-red-500 hover:bg-red-600":"bg-primary hover:bg-primary/90"}`,size:"sm",children:o.jsx(Kt,{className:"w-4 h-4"})})}),o.jsx("div",{className:"",children:o.jsx(J,{variant:"outline",size:"sm",onClick:()=>R(!S),className:`shadow-lg bg-white ${S?"border-blue-500 text-blue-600":""}`,children:o.jsx(ln,{className:"w-4 h-4"})})}),o.jsx("div",{className:"",children:o.jsxs(ux,{children:[o.jsx(hx,{asChild:!0,children:o.jsx(J,{variant:"outline",size:"sm",className:"shadow-lg bg-white",children:o.jsx(Lp,{className:"w-4 h-4"})})}),o.jsxs(Od,{align:"end",children:[o.jsx(Md,{children:"Map Style"}),o.jsx($d,{}),Object.entries(No).map(([E,W])=>o.jsxs(Ld,{onClick:()=>k(E),className:w===E?"bg-accent":"",children:[W.name,E==="voyager"&&o.jsx("span",{className:"ml-2 text-xs text-muted-foreground",children:"(Default)"})]},E))]})]})})]}),o.jsxs(pu,{center:e,zoom:t,className:"w-full h-full z-0",zoomControl:!0,attributionControl:!0,preferCanvas:!0,children:[o.jsx(wx,{center:e,zoom:t}),o.jsx(bx,{onLocationSelect:C,isEnabled:p}),o.jsx(gu,{attribution:Z.attribution,url:Z.url,maxZoom:19,subdomains:["a","b","c"],detectRetina:!0}),S&&v&&o.jsx(Zn,{position:[v.lat,v.lng],icon:xx(v.isActual),zIndexOffset:1e3,children:o.jsx(Kn,{className:"custom-popup",minWidth:200,children:o.jsxs("div",{className:"p-2 text-center",children:[o.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[o.jsx(ln,{className:`w-4 h-4 ${v.isActual?"text-blue-600":"text-green-600"}`}),o.jsx("span",{className:`font-medium ${v.isActual?"text-blue-700":"text-green-700"}`,children:v.name})]}),o.jsx("div",{className:"text-xs text-gray-600 mb-2",children:v.isActual?"GPS 기반 실제 위치":"데모용 기본 위치 (방콕)"}),o.jsxs("div",{className:"text-xs text-gray-500",children:[v.lat.toFixed(6),", ",v.lng.toFixed(6)]}),!v.isActual&&o.jsx("div",{className:"text-xs text-green-600 mt-2 bg-green-50 p-1 rounded",children:"💡 위치 권한을 허용하면 실제 위치를 사용할 수 있습니다"})]})})}),r.map(E=>{const W=Dn.find(oe=>oe.id===E.category),X=W?vx(E.category,W.emoji):void 0;return o.jsx(Zn,{position:[E.location.latitude,E.location.longitude],icon:X,eventHandlers:{click:()=>$(E)},children:o.jsx(Kn,{className:"custom-popup",minWidth:280,maxWidth:320,children:o.jsxs("div",{className:"p-2",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsxs(hr,{className:"w-8 h-8",children:[o.jsx(fr,{src:E.user?.avatar_url,alt:E.user?.nickname}),o.jsx(mr,{className:"bg-primary/10 text-primary text-xs",children:E.user?.nickname?.charAt(0).toUpperCase()})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h4",{className:"font-semibold text-sm text-gray-900 truncate",children:E.user?.nickname}),o.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[W&&o.jsxs(Vr,{variant:"secondary",className:"text-xs px-1 py-0",children:[W.emoji," ",W.label]}),E.user?.trust_level&&E.user.trust_level>50&&o.jsxs(Vr,{variant:"outline",className:"text-xs px-1 py-0",children:["Trust ",E.user.trust_level]})]})]})]}),o.jsx("p",{className:"text-sm text-gray-900 mb-3 leading-relaxed line-clamp-3",children:E.content}),E.images&&E.images.length>0&&o.jsx("div",{className:"mb-3",children:o.jsx("img",{src:E.images[0],alt:"Tip image",className:"w-full h-32 object-cover rounded-lg"})}),o.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 mb-3",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(Wa,{className:"w-3 h-3"}),E.likes_count]}),o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(qa,{className:"w-3 h-3"}),E.comments_count]})]}),o.jsx("span",{className:"truncate",children:E.location.city})]}),o.jsx("div",{className:"flex gap-2",children:o.jsxs(J,{size:"sm",variant:"outline",className:"flex-1 text-xs h-8",onClick:()=>N(E),children:[o.jsx(Is,{className:"w-3 h-3 mr-1"}),"View on map"]})})]})})},E.id)}),b&&o.jsx(Zn,{position:[b.lat,b.lng],icon:yx(),children:o.jsx(Kn,{children:o.jsxs("div",{className:"p-2 text-center",children:[o.jsx("div",{className:"text-sm font-medium text-green-700 mb-2",children:"New Tip Location"}),o.jsx("div",{className:"text-xs text-gray-600",children:"Creating tip at this location..."})]})})})]}),o.jsx(dx,{open:c,onOpenChange:d,location:u,onTipCreated:T})]})}const De={lat:13.7563,lng:100.5018};function kx(){const{user:r}=It(),[e,t]=h.useState(!1),[s,n]=h.useState([De.lat,De.lng]),[a,i]=h.useState(null),[l,c]=h.useState(""),[d,u]=h.useState(!1),[f,p]=h.useState([]),[m,b]=h.useState(!1),{currentLocation:y,setCurrentLocation:w}=qc(),k=async()=>{try{b(!0),console.log("Loading tips from database...");const T=await Cs.getTips(r?.id);console.log("Loaded tips:",T),p(T),T.length===0?z.info("No tips found in the database yet. Create some tips to see them on the map!"):console.log(`Loaded ${T.length} tips for the map`)}catch(T){console.error("Error loading tips:",T),z.error("Failed to load tips from database"),p([])}finally{b(!1)}};h.useEffect(()=>{k()},[r?.id]),h.useEffect(()=>{(()=>{if("geolocation"in navigator)navigator.geolocation.getCurrentPosition(P=>{const{latitude:Z,longitude:E}=P.coords;i({lat:Z,lng:E,isActual:!0,name:"Your Location"}),n([Z,E]),w({latitude:Z,longitude:E}),console.log("✅ 실제 사용자 위치 사용:",{latitude:Z,longitude:E})},P=>{console.log("⚠️ 위치 권한 거부 또는 오류, 방콕 기본 위치 사용:",P.message);const Z={lat:De.lat,lng:De.lng,isActual:!1,name:"Bangkok (Demo Location)"};i(Z),n([De.lat,De.lng]),w({latitude:De.lat,longitude:De.lng}),sessionStorage.getItem("location-demo-notified")||(z.info("위치 권한이 없어 방콕을 기본 위치로 사용합니다 📍",{duration:4e3}),sessionStorage.setItem("location-demo-notified","true"))},{enableHighAccuracy:!0,timeout:5e3,maximumAge:3e5});else{console.log("⚠️ Geolocation 미지원, 방콕 기본 위치 사용");const P={lat:De.lat,lng:De.lng,isActual:!1,name:"Bangkok (Demo Location)"};i(P),n([De.lat,De.lng]),w({latitude:De.lat,longitude:De.lng}),sessionStorage.getItem("location-demo-notified")||(z.info("위치 서비스가 지원되지 않아 방콕을 기본 위치로 사용합니다 📍",{duration:4e3}),sessionStorage.setItem("location-demo-notified","true"))}})()},[w]);const v=async()=>{t(!0);try{"geolocation"in navigator?navigator.geolocation.getCurrentPosition(T=>{const{latitude:P,longitude:Z}=T.coords;i({lat:P,lng:Z,isActual:!0,name:"Your Location"}),n([P,Z]),w({latitude:P,longitude:Z}),t(!1),z.success("실제 위치로 업데이트되었습니다 📍")},T=>{console.log("위치 권한 거부:",T.message),t(!1),z.info("위치 권한이 거부되어 방콕 기본 위치를 계속 사용합니다 📍")}):(t(!1),z.info("위치 서비스가 지원되지 않아 방콕을 기본 위치로 사용합니다 📍"))}catch{t(!1),z.info("위치를 가져올 수 없어 방콕을 기본 위치로 사용합니다 📍")}},x=T=>{c(T);const P=T.toLowerCase();P.includes("bangkok")||P.includes("방콕")?(n([13.7563,100.5018]),z.success("Moved to Bangkok")):P.includes("chiang mai")||P.includes("치앙마이")?(n([18.7883,98.9853]),z.success("Moved to Chiang Mai")):P.includes("phuket")||P.includes("푸켓")?(n([7.8804,98.3923]),z.success("Moved to Phuket")):P.includes("seoul")||P.includes("서울")?(n([37.5665,126.978]),z.success("Moved to Seoul")):P.includes("tokyo")||P.includes("도쿄")?(n([35.6762,139.6503]),z.success("Moved to Tokyo")):P.includes("singapore")||P.includes("싱가포르")?(n([1.3521,103.8198]),z.success("Moved to Singapore")):P.includes("kuala lumpur")||P.includes("쿠알라룸푸르")?(n([3.139,101.6869]),z.success("Moved to Kuala Lumpur")):P.includes("ho chi minh")||P.includes("saigon")||P.includes("호치민")?(n([10.8231,106.6297]),z.success("Moved to Ho Chi Minh City")):P.includes("hanoi")||P.includes("하노이")?(n([21.0285,105.8542]),z.success("Moved to Hanoi")):P.includes("manila")||P.includes("마닐라")?(n([14.5995,120.9842]),z.success("Moved to Manila")):P.includes("jakarta")||P.includes("자카르타")?(n([-6.2088,106.8456]),z.success("Moved to Jakarta")):T.trim()&&z.info(`Search for "${T}" - try Bangkok, Chiang Mai, Seoul, Tokyo, etc.`)},S=T=>{console.log("Tip clicked:",T)},R=()=>{if(a){n([a.lat,a.lng]);const T=a.isActual?"실제 위치로 중심을 맞췄습니다 📍":"방콕 데모 위치로 중심을 맞췄습니다 📍";z.success(T)}else n([De.lat,De.lng]),z.info("방콕으로 중심을 맞췄습니다 📍")},$=async()=>{await k(),z.success("Map updated with your new tip!")},N=async()=>{await k(),z.success("Tips refreshed!")},C=()=>{const[T,P]=s;return a&&Math.abs(T-a.lat)<.01&&Math.abs(P-a.lng)<.01?a.name:Math.abs(T-13.7563)<.1&&Math.abs(P-100.5018)<.1?"Bangkok":Math.abs(T-18.7883)<.1&&Math.abs(P-98.9853)<.1?"Chiang Mai":Math.abs(T-7.8804)<.1&&Math.abs(P-98.3923)<.1?"Phuket":Math.abs(T-37.5665)<.1&&Math.abs(P-126.978)<.1?"Seoul":Math.abs(T-35.6762)<.1&&Math.abs(P-139.6503)<.1?"Tokyo":Math.abs(T-1.3521)<.1&&Math.abs(P-103.8198)<.1?"Singapore":"Current Location"};return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"h-screen bg-background flex flex-col",children:[o.jsxs("header",{className:"bg-card border-b border-border p-4 sm:p-6 flex-shrink-0 z-10",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-foreground",children:"Map"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:m?o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-3 h-3 border border-primary border-t-transparent rounded-full animate-spin"}),"Loading tips..."]}):o.jsxs(o.Fragment,{children:[C()," · ",f.length," tips",r&&o.jsx("span",{className:"ml-2 text-primary",children:"• Click map to add tips"}),a&&!a.isActual&&o.jsx("span",{className:"ml-2 text-green-600",children:"• Demo location (Bangkok)"})]})})]}),o.jsxs("div",{className:"flex gap-2",children:[!r&&o.jsxs(J,{variant:"outline",size:"sm",onClick:()=>u(!0),className:"flex-shrink-0",children:[o.jsx(on,{className:"w-4 h-4 sm:mr-1"}),o.jsx("span",{className:"hidden sm:inline",children:"Sign In to Add Tips"}),o.jsx("span",{className:"sm:hidden",children:"Sign In"})]}),o.jsxs(J,{variant:"outline",size:"sm",onClick:N,disabled:m,className:"flex-shrink-0",children:[o.jsx(Ys,{className:`w-4 h-4 sm:mr-1 ${m?"animate-spin":""}`}),o.jsx("span",{className:"hidden sm:inline",children:"Refresh"})]}),o.jsxs(J,{variant:"outline",size:"sm",onClick:v,disabled:e,className:"flex-shrink-0",children:[o.jsx(ln,{className:`w-4 h-4 sm:mr-1 ${e?"animate-spin":""}`}),o.jsx("span",{className:"hidden sm:inline",children:a?.isActual?"Update Location":"Get Real Location"}),o.jsx("span",{className:"sm:hidden",children:"Location"})]}),o.jsxs(J,{variant:"outline",size:"sm",onClick:R,className:"flex-shrink-0",children:[o.jsx(Ep,{className:"w-4 h-4 sm:mr-1"}),o.jsx("span",{className:"hidden sm:inline",children:"Recenter"})]}),o.jsxs(J,{variant:"outline",size:"sm",className:"flex-shrink-0",children:[o.jsx(Rp,{className:"w-4 h-4 sm:mr-1"}),o.jsx("span",{className:"hidden sm:inline",children:"Filter"})]})]})]}),o.jsxs("div",{className:"relative",children:[o.jsx(cn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),o.jsx(Ge,{placeholder:"Search cities (Bangkok, Chiang Mai, Seoul, Tokyo, Singapore...)",className:"pl-10",value:l,onChange:T=>c(T.target.value),onKeyPress:T=>{T.key==="Enter"&&x(l)}})]})]}),o.jsx("div",{className:"flex-1 relative",children:m?o.jsx("div",{className:"absolute inset-0 bg-background/50 flex items-center justify-center z-[1000]",children:o.jsx("div",{className:"bg-card p-4 rounded-lg shadow-lg",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-5 h-5 border-2 border-primary border-t-transparent rounded-full animate-spin"}),o.jsx("span",{className:"text-sm font-medium",children:"Loading tips from database..."})]})})}):o.jsx(_x,{tips:f,center:s,zoom:15,onTipClick:S,onTipCreated:$})}),!1]}),o.jsx($n,{open:d,onOpenChange:u})]})}var gi="Switch",[jx,Zx]=Ts(gi),[Sx,Nx]=jx(gi),Dd=h.forwardRef((r,e)=>{const{__scopeSwitch:t,name:s,checked:n,defaultChecked:a,required:i,disabled:l,value:c="on",onCheckedChange:d,form:u,...f}=r,[p,m]=h.useState(null),b=Me(e,x=>m(x)),y=h.useRef(!1),w=p?u||!!p.closest("form"):!0,[k=!1,v]=en({prop:n,defaultProp:a,onChange:d});return o.jsxs(Sx,{scope:t,checked:k,disabled:l,children:[o.jsx(je.button,{type:"button",role:"switch","aria-checked":k,"aria-required":i,"data-state":Vd(k),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:b,onClick:le(r.onClick,x=>{v(S=>!S),w&&(y.current=x.isPropagationStopped(),y.current||x.stopPropagation())})}),w&&o.jsx(Cx,{control:p,bubbles:!y.current,name:s,value:c,checked:k,required:i,disabled:l,form:u,style:{transform:"translateX(-100%)"}})]})});Dd.displayName=gi;var Ud="SwitchThumb",Bd=h.forwardRef((r,e)=>{const{__scopeSwitch:t,...s}=r,n=Nx(Ud,t);return o.jsx(je.span,{"data-state":Vd(n.checked),"data-disabled":n.disabled?"":void 0,...s,ref:e})});Bd.displayName=Ud;var Cx=r=>{const{control:e,checked:t,bubbles:s=!0,...n}=r,a=h.useRef(null),i=Zc(t),l=cu(e);return h.useEffect(()=>{const c=a.current,d=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(d,"checked").set;if(i!==t&&f){const p=new Event("click",{bubbles:s});f.call(c,t),c.dispatchEvent(p)}},[i,t,s]),o.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...n,tabIndex:-1,ref:a,style:{...r.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Vd(r){return r?"checked":"unchecked"}var Fd=Dd,Tx=Bd;const zd=h.forwardRef(({className:r,...e},t)=>o.jsx(Fd,{className:q("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",r),...e,ref:t,children:o.jsx(Tx,{className:q("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));zd.displayName=Fd.displayName;const Wd=[{value:"website",label:"Website",icon:za},{value:"portfolio",label:"Portfolio",icon:us},{value:"social",label:"Social Media",icon:Dl},{value:"shop",label:"Shop/Store",icon:$l},{value:"donation",label:"Buy Me Coffee",icon:Ol},{value:"other",label:"Other",icon:an}],Ex=r=>{const e=Wd.find(t=>t.value===r);return e?e.icon:an};function Rx({userProfile:r,isOwner:e,onProfileUpdate:t}){const[s,n]=h.useState(!1),[a,i]=h.useState(!1),[l,c]=h.useState(r?.marketing_bio||""),[d,u]=h.useState(r?.marketing_links||[]),[f,p]=h.useState(r?.show_marketing||!1),m=()=>{const v={id:Date.now().toString(),title:"",url:"",type:"website"};u([...d,v])},b=(v,x,S)=>{u(R=>R.map($=>$.id===v?{...$,[x]:S}:$))},y=v=>{u(x=>x.filter(S=>S.id!==v))},w=async()=>{if(r?.user_id){i(!0);try{const v=d.filter(R=>R.title.trim()&&R.url.trim()),x={marketing_bio:l.trim()||null,marketing_links:v,show_marketing:f},S=await ii.updateUserProfile(r.user_id,x);t&&t({...r,...x}),n(!1),z.success("Marketing profile updated successfully!")}catch(v){console.error("Error updating marketing profile:",v),z.error("Failed to update marketing profile")}finally{i(!1)}}},k=()=>{c(r?.marketing_bio||""),u(r?.marketing_links||[]),p(r?.show_marketing||!1),n(!1)};return!e&&!r?.show_marketing||!e&&!r?.marketing_bio&&(!r?.marketing_links||r.marketing_links.length===0)?null:o.jsxs(et,{children:[o.jsx(yc,{children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs(xc,{className:"flex items-center gap-2",children:[o.jsx(us,{className:"w-5 h-5"}),"About Me"]}),e&&o.jsx("div",{className:"flex items-center gap-2",children:s?o.jsxs(o.Fragment,{children:[o.jsxs(J,{variant:"outline",size:"sm",onClick:k,disabled:a,children:[o.jsx(Ul,{className:"w-4 h-4 mr-1"}),"Cancel"]}),o.jsxs(J,{size:"sm",onClick:w,disabled:a,children:[a?o.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-1"}):o.jsx(Mp,{className:"w-4 h-4 mr-1"}),"Save"]})]}):o.jsxs(J,{variant:"outline",size:"sm",onClick:()=>n(!0),children:[o.jsx(_a,{className:"w-4 h-4 mr-1"}),"Edit"]})})]})}),o.jsx(tt,{className:"space-y-4",children:s?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[o.jsxs("div",{children:[o.jsx(Be,{htmlFor:"show-marketing",className:"font-medium",children:"Show on public profile"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Allow others to see your marketing information"})]}),o.jsx(zd,{id:"show-marketing",checked:f,onCheckedChange:p})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Be,{htmlFor:"marketing-bio",children:"About Me (Markdown supported)"}),o.jsx(ui,{id:"marketing-bio",placeholder:`Tell others about yourself, your work, or what you offer... 

You can use **bold**, *italic*, and [links](https://example.com)

Examples:
- 🚀 Full-stack developer specializing in React & Node.js
- 📸 Travel photographer capturing nomad life
- 💼 Digital marketing consultant helping startups grow
- 🎨 UI/UX designer creating beautiful experiences`,value:l,onChange:v=>c(v.target.value),className:"min-h-[120px] resize-none"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Use markdown formatting to make your bio stand out"})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(Be,{children:"External Links"}),o.jsxs(J,{type:"button",variant:"outline",size:"sm",onClick:m,children:[o.jsx(Kt,{className:"w-4 h-4 mr-1"}),"Add Link"]})]}),d.map(v=>o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 p-3 border rounded-lg",children:[o.jsxs("div",{children:[o.jsx(Be,{className:"text-xs",children:"Type"}),o.jsxs(Rd,{value:v.type,onValueChange:x=>b(v.id,"type",x),children:[o.jsx(fi,{className:"h-8",children:o.jsx(Ad,{})}),o.jsx(mi,{children:Wd.map(x=>o.jsx(pi,{value:x.value,children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(x.icon,{className:"w-3 h-3"}),x.label]})},x.value))})]})]}),o.jsxs("div",{children:[o.jsx(Be,{className:"text-xs",children:"Title"}),o.jsx(Ge,{placeholder:"My Portfolio",value:v.title,onChange:x=>b(v.id,"title",x.target.value),className:"h-8"})]}),o.jsxs("div",{children:[o.jsx(Be,{className:"text-xs",children:"URL"}),o.jsx(Ge,{placeholder:"https://example.com",value:v.url,onChange:x=>b(v.id,"url",x.target.value),className:"h-8"})]}),o.jsx("div",{className:"flex items-end",children:o.jsx(J,{type:"button",variant:"outline",size:"sm",onClick:()=>y(v.id),className:"h-8 w-full",children:o.jsx(Dp,{className:"w-3 h-3"})})})]},v.id)),d.length===0&&o.jsx("div",{className:"text-center py-4 text-muted-foreground text-sm",children:'No links added yet. Click "Add Link" to get started.'})]})]}):o.jsxs(o.Fragment,{children:[r?.marketing_bio&&o.jsx("div",{className:"prose prose-sm max-w-none",children:o.jsx("div",{className:"whitespace-pre-wrap text-sm leading-relaxed",children:r.marketing_bio.split(`
`).map((v,x)=>{let S=v.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/\[(.*?)\]\((.*?)\)/g,'<a href="$2" target="_blank" rel="noopener noreferrer" class="text-primary hover:underline">$1</a>');return o.jsx("div",{dangerouslySetInnerHTML:{__html:S},className:"mb-1"},x)})})}),r?.marketing_links&&r.marketing_links.length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("h4",{className:"font-medium text-sm",children:"Links"}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:r.marketing_links.map(v=>{const x=Ex(v.type);return o.jsxs("a",{href:v.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 p-2 border rounded-lg hover:bg-muted transition-colors group",children:[o.jsx(x,{className:"w-4 h-4 text-muted-foreground"}),o.jsx("span",{className:"text-sm font-medium truncate flex-1",children:v.title}),o.jsx(Is,{className:"w-3 h-3 text-muted-foreground group-hover:text-foreground"})]},v.id)})})]}),e&&!r?.marketing_bio&&(!r?.marketing_links||r.marketing_links.length===0)&&o.jsxs("div",{className:"text-center py-6 text-muted-foreground",children:[o.jsx(us,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),o.jsx("p",{className:"text-sm mb-3",children:"Share more about yourself with fellow nomads"}),o.jsxs(J,{variant:"outline",size:"sm",onClick:()=>n(!0),children:[o.jsx(_a,{className:"w-4 h-4 mr-1"}),"Add About Me Section"]})]})]})})]})}function Ax(){const{user:r,isLoading:e,signOut:t}=It(),[s,n]=h.useState(!1),[a,i]=h.useState(null),[l,c]=h.useState(null),[d,u]=h.useState([]),[f,p]=h.useState([]),[m,b]=h.useState([]),[y,w]=h.useState(!1),k=async()=>{if(r)try{w(!0);const C=await ii.getUserProfile(r.id);i(C.stats||{tips_count:0,likes_received:0,comments_received:0,saves_received:0,cities_visited:0,countries_visited:0}),c(C.profile||{});const T=await Cs.getUserTips(r.id);u(T);const P=await Vt.getUserLikedTips(r.id);p(P);const Z=await Vt.getUserSavedTips(r.id);b(Z)}catch(C){console.error("Error loading user data:",C),z.error("Failed to load profile data")}finally{w(!1)}};h.useEffect(()=>{r&&k()},[r]);const v=async()=>{try{await t(),z.success("Signed out successfully")}catch{z.error("Failed to sign out")}},x=async(C,T)=>{if(r)try{if(T==="like"){await Vt.toggleLike(C,r.id);const P=await Vt.getUserLikedTips(r.id);p(P)}else if(T==="save"){await Vt.toggleSave(C,r.id);const P=await Vt.getUserSavedTips(r.id);b(P)}}catch(P){console.error(`Error ${T}ing tip:`,P),z.error(`Failed to ${T} tip`)}},S=C=>{c(C)},R=C=>C>=90?{label:"Master",color:"bg-purple-100 text-purple-700"}:C>=70?{label:"Expert",color:"bg-blue-100 text-blue-700"}:C>=50?{label:"Experienced",color:"bg-green-100 text-green-700"}:C>=30?{label:"Beginner",color:"bg-yellow-100 text-yellow-700"}:{label:"Newcomer",color:"bg-gray-100 text-gray-700"};if(e)return o.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),o.jsx("p",{className:"text-muted-foreground",children:"Loading..."})]})});if(!r)return o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx("header",{className:"bg-card border-b border-border p-4 sm:p-6",children:o.jsx("div",{className:"flex items-center justify-between",children:o.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-foreground",children:"Profile"})})}),o.jsx("div",{className:"flex items-center justify-center min-h-[60vh] p-4",children:o.jsx(et,{className:"w-full max-w-md",children:o.jsxs(tt,{className:"p-6 text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-muted rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(Rn,{className:"w-8 h-8 text-muted-foreground"})}),o.jsx("h2",{className:"text-xl font-semibold text-foreground mb-2",children:"Sign in to view your profile"}),o.jsx("p",{className:"text-muted-foreground mb-6",children:"Create an account or sign in to start sharing tips and building your nomad profile."}),o.jsx(J,{onClick:()=>n(!0),className:"w-full",children:"Sign In / Sign Up"})]})})}),o.jsx($n,{open:s,onOpenChange:n})]});const $=R(r.trust_level),N=a||{tips_count:0,likes_received:0,comments_received:0,saves_received:0,cities_visited:0,countries_visited:0};return o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx("header",{className:"bg-card border-b border-border p-4 sm:p-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-foreground",children:"Profile"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(J,{variant:"ghost",size:"sm",children:o.jsx($p,{className:"w-4 h-4"})}),o.jsx(J,{variant:"ghost",size:"sm",onClick:v,children:o.jsx(Op,{className:"w-4 h-4"})})]})]})}),o.jsxs("div",{className:"p-4 sm:p-6 space-y-6",children:[o.jsx(et,{children:o.jsx(tt,{className:"p-4 sm:p-6",children:o.jsxs("div",{className:"flex flex-col sm:flex-row items-start gap-4",children:[o.jsxs(hr,{className:"w-20 h-20 sm:w-24 sm:h-24 mx-auto sm:mx-0",children:[o.jsx(fr,{src:r.avatar_url,alt:r.nickname}),o.jsx(mr,{className:"text-xl bg-primary/10 text-primary",children:r.nickname.charAt(0).toUpperCase()})]}),o.jsxs("div",{className:"flex-1 text-center sm:text-left",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 mb-2",children:[o.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-foreground",children:l?.full_name||r.nickname}),o.jsxs(Vr,{className:$.color,children:[o.jsx(Up,{className:"w-3 h-3 mr-1"}),$.label]})]}),r.bio&&o.jsx("p",{className:"text-muted-foreground mb-3",children:r.bio}),l?.location&&o.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-1 text-sm text-muted-foreground mb-2",children:[o.jsx(hs,{className:"w-3 h-3"}),o.jsx("span",{children:l.location})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4 text-sm text-muted-foreground mb-3",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(hs,{className:"w-3 h-3"}),N.countries_visited," countries, ",N.cities_visited," cities"]}),o.jsxs("span",{children:[r.points.toLocaleString()," points"]}),o.jsxs("span",{className:"text-xs bg-muted px-2 py-1 rounded",children:["Joined ",new Date(r.created_at).toLocaleDateString()]})]}),(l?.website||l?.instagram||l?.twitter||l?.linkedin)&&o.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-3 mb-3",children:[l.website&&o.jsx("a",{href:l.website,target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-primary",children:o.jsx(za,{className:"w-4 h-4"})}),l.instagram&&o.jsx("a",{href:`https://instagram.com/${l.instagram}`,target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-primary",children:o.jsx(Pp,{className:"w-4 h-4"})}),l.twitter&&o.jsx("a",{href:`https://twitter.com/${l.twitter}`,target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-primary",children:o.jsx(Bp,{className:"w-4 h-4"})}),l.linkedin&&o.jsx("a",{href:l.linkedin,target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-primary",children:o.jsx(Ip,{className:"w-4 h-4"})})]})]}),o.jsxs(J,{variant:"outline",size:"sm",className:"w-full sm:w-auto",children:[o.jsx(_a,{className:"w-4 h-4 mr-1"}),"Edit"]})]})})}),o.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[o.jsx(et,{children:o.jsxs(tt,{className:"p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-primary mb-1",children:N.tips_count}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Tips written"})]})}),o.jsx(et,{children:o.jsxs(tt,{className:"p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-red-500 mb-1",children:N.likes_received}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Likes received"})]})}),o.jsx(et,{children:o.jsxs(tt,{className:"p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-blue-500 mb-1",children:N.comments_received}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Comments"})]})}),o.jsx(et,{children:o.jsxs(tt,{className:"p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-purple-500 mb-1",children:N.saves_received}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Saves"})]})})]}),o.jsx(Rx,{userProfile:l,isOwner:!0,onProfileUpdate:S}),N.tips_count===0&&o.jsx(et,{className:"border-primary/20 bg-primary/5",children:o.jsx(tt,{className:"p-4 sm:p-6",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"Welcome to Nomading Now! 🎉"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:"Start sharing your travel experiences and discover amazing tips from fellow nomads."}),o.jsxs(J,{className:"bg-primary hover:bg-primary/90",children:[o.jsx(Kt,{className:"w-4 h-4 mr-2"}),"Write your first tip"]})]})})}),o.jsx(et,{children:o.jsx(tt,{className:"p-0",children:o.jsxs(vc,{defaultValue:"tips",className:"w-full",children:[o.jsxs(si,{className:"grid w-full grid-cols-3",children:[o.jsxs(Or,{value:"tips",children:["My Tips (",N.tips_count,")"]}),o.jsxs(Or,{value:"liked",children:["Liked (",f.length,")"]}),o.jsxs(Or,{value:"saved",children:["Saved (",m.length,")"]})]}),o.jsx(Lr,{value:"tips",className:"p-4 sm:p-6",children:y?o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),o.jsx("p",{className:"text-muted-foreground",children:"Loading tips..."})]}):d.length===0?o.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[o.jsx(qa,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),o.jsx("p",{className:"text-lg font-medium mb-2",children:"No tips yet"}),o.jsx("p",{className:"text-sm",children:"Share your first travel tip to get started!"})]}):o.jsx("div",{className:"space-y-4",children:d.map(C=>o.jsx(Qs,{tip:C,onLike:()=>x(C.id,"like"),onSave:()=>x(C.id,"save"),onComment:()=>console.log("Comment on tip:",C.id),onUserClick:()=>{}},C.id))})}),o.jsx(Lr,{value:"liked",className:"p-4 sm:p-6",children:y?o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),o.jsx("p",{className:"text-muted-foreground",children:"Loading liked tips..."})]}):f.length===0?o.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[o.jsx(Wa,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),o.jsx("p",{className:"text-lg font-medium mb-2",children:"No liked tips yet"}),o.jsx("p",{className:"text-sm",children:"Like tips you find helpful to save them here."})]}):o.jsx("div",{className:"space-y-4",children:f.map(C=>o.jsx(Qs,{tip:C,onLike:()=>x(C.id,"like"),onSave:()=>x(C.id,"save"),onComment:()=>console.log("Comment on tip:",C.id),onUserClick:()=>console.log("View user:",C.user_id)},C.id))})}),o.jsx(Lr,{value:"saved",className:"p-4 sm:p-6",children:y?o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),o.jsx("p",{className:"text-muted-foreground",children:"Loading saved tips..."})]}):m.length===0?o.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[o.jsx(Al,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"No saved tips yet"}),o.jsx("p",{className:"text-sm",children:"Save tips you want to reference later."})]}):o.jsx("div",{className:"space-y-4",children:m.map(C=>o.jsx(Qs,{tip:C,onLike:()=>x(C.id,"like"),onSave:()=>x(C.id,"save"),onComment:()=>console.log("Comment on tip:",C.id),onUserClick:()=>console.log("View user:",C.user_id)},C.id))})})]})})})]})]})}function Px(){return o.jsx(Rh,{defaultTheme:"light",storageKey:"nomad-tips-theme",children:o.jsx(wp,{children:o.jsx(bh,{children:o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(zv,{}),o.jsx("div",{className:"lg:pl-64",children:o.jsx(fh,{children:o.jsxs(Yr,{path:"/",element:o.jsx(zp,{}),children:[o.jsx(Yr,{index:!0,element:o.jsx(Ey,{})}),o.jsx(Yr,{path:"map",element:o.jsx(kx,{})}),o.jsx(Yr,{path:"profile",element:o.jsx(Ax,{})})]})})}),o.jsx(cf,{})]})})})})}wu.createRoot(document.getElementById("root")).render(o.jsx(h.StrictMode,{children:o.jsx(Px,{})}));
